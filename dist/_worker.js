var Bi=Object.defineProperty;var ns=e=>{throw TypeError(e)};var Ji=(e,t,r)=>t in e?Bi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var T=(e,t,r)=>Ji(e,typeof t!="symbol"?t+"":t,r),sn=(e,t,r)=>t.has(e)||ns("Cannot "+r);var f=(e,t,r)=>(sn(e,t,"read from private field"),r?r.call(e):t.get(e)),O=(e,t,r)=>t.has(e)?ns("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),E=(e,t,r,n)=>(sn(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),A=(e,t,r)=>(sn(e,t,"access private method"),r);var ss=(e,t,r,n)=>({set _(s){E(e,t,s,r)},get _(){return f(e,t,n)}});var os=(e,t,r)=>(n,s)=>{let o=-1;return i(0);async function i(a){if(a<=o)throw new Error("next() called multiple times");o=a;let c,u=!1,l;if(e[a]?(l=e[a][0][0],n.req.routeIndex=a):l=a===e.length&&s||void 0,l)try{c=await l(n,()=>i(a+1))}catch(h){if(h instanceof Error&&t)n.error=h,c=await t(h,n),u=!0;else throw h}else n.finalized===!1&&r&&(c=await r(n));return c&&(n.finalized===!1||u)&&(n.res=c),n}},is=class extends Error{constructor(t=500,r){super(r==null?void 0:r.message,{cause:r==null?void 0:r.cause});T(this,"res");T(this,"status");this.res=r==null?void 0:r.res,this.status=t}getResponse(){return this.res?new Response(this.res.body,{status:this.status,headers:this.res.headers}):new Response(this.message,{status:this.status})}},Wi=Symbol(),Vi=async(e,t=Object.create(null))=>{const{all:r=!1,dot:n=!1}=t,o=(e instanceof Io?e.raw.headers:e.headers).get("Content-Type");return o!=null&&o.startsWith("multipart/form-data")||o!=null&&o.startsWith("application/x-www-form-urlencoded")?Ki(e,{all:r,dot:n}):{}};async function Ki(e,t){const r=await e.formData();return r?Yi(r,t):{}}function Yi(e,t){const r=Object.create(null);return e.forEach((n,s)=>{t.all||s.endsWith("[]")?Xi(r,s,n):r[s]=n}),t.dot&&Object.entries(r).forEach(([n,s])=>{n.includes(".")&&(Qi(r,n,s),delete r[n])}),r}var Xi=(e,t,r)=>{e[t]!==void 0?Array.isArray(e[t])?e[t].push(r):e[t]=[e[t],r]:t.endsWith("[]")?e[t]=[r]:e[t]=r},Qi=(e,t,r)=>{let n=e;const s=t.split(".");s.forEach((o,i)=>{i===s.length-1?n[o]=r:((!n[o]||typeof n[o]!="object"||Array.isArray(n[o])||n[o]instanceof File)&&(n[o]=Object.create(null)),n=n[o])})},Ao=e=>{const t=e.split("/");return t[0]===""&&t.shift(),t},ea=e=>{const{groups:t,path:r}=ta(e),n=Ao(r);return ra(n,t)},ta=e=>{const t=[];return e=e.replace(/\{[^}]+\}/g,(r,n)=>{const s=`@${n}`;return t.push([s,r]),s}),{groups:t,path:e}},ra=(e,t)=>{for(let r=t.length-1;r>=0;r--){const[n]=t[r];for(let s=e.length-1;s>=0;s--)if(e[s].includes(n)){e[s]=e[s].replace(n,t[r][1]);break}}return e},ir={},na=(e,t)=>{if(e==="*")return"*";const r=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(r){const n=`${e}#${t}`;return ir[n]||(r[2]?ir[n]=t&&t[0]!==":"&&t[0]!=="*"?[n,r[1],new RegExp(`^${r[2]}(?=/${t})`)]:[e,r[1],new RegExp(`^${r[2]}$`)]:ir[n]=[e,r[1],!0]),ir[n]}return null},Jr=(e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,r=>{try{return t(r)}catch{return r}})}},sa=e=>Jr(e,decodeURI),$o=e=>{const t=e.url,r=t.indexOf("/",t.indexOf(":")+4);let n=r;for(;n<t.length;n++){const s=t.charCodeAt(n);if(s===37){const o=t.indexOf("?",n),i=t.indexOf("#",n),a=o===-1?i===-1?void 0:i:i===-1?o:Math.min(o,i),c=t.slice(r,a);return sa(c.includes("%25")?c.replace(/%25/g,"%2525"):c)}else if(s===63||s===35)break}return t.slice(r,n)},oa=e=>{const t=$o(e);return t.length>1&&t.at(-1)==="/"?t.slice(0,-1):t},ct=(e,t,...r)=>(r.length&&(t=ct(t,...r)),`${(e==null?void 0:e[0])==="/"?"":"/"}${e}${t==="/"?"":`${(e==null?void 0:e.at(-1))==="/"?"":"/"}${(t==null?void 0:t[0])==="/"?t.slice(1):t}`}`),Co=e=>{if(e.charCodeAt(e.length-1)!==63||!e.includes(":"))return null;const t=e.split("/"),r=[];let n="";return t.forEach(s=>{if(s!==""&&!/\:/.test(s))n+="/"+s;else if(/\:/.test(s))if(/\?/.test(s)){r.length===0&&n===""?r.push("/"):r.push(n);const o=s.replace("?","");n+="/"+o,r.push(n)}else n+="/"+s}),r.filter((s,o,i)=>i.indexOf(s)===o)},on=e=>/[%+]/.test(e)?(e.indexOf("+")!==-1&&(e=e.replace(/\+/g," ")),e.indexOf("%")!==-1?Jr(e,Gn):e):e,Ro=(e,t,r)=>{let n;if(!r&&t&&!/[%+]/.test(t)){let i=e.indexOf("?",8);if(i===-1)return;for(e.startsWith(t,i+1)||(i=e.indexOf(`&${t}`,i+1));i!==-1;){const a=e.charCodeAt(i+t.length+1);if(a===61){const c=i+t.length+2,u=e.indexOf("&",c);return on(e.slice(c,u===-1?void 0:u))}else if(a==38||isNaN(a))return"";i=e.indexOf(`&${t}`,i+1)}if(n=/[%+]/.test(e),!n)return}const s={};n??(n=/[%+]/.test(e));let o=e.indexOf("?",8);for(;o!==-1;){const i=e.indexOf("&",o+1);let a=e.indexOf("=",o);a>i&&i!==-1&&(a=-1);let c=e.slice(o+1,a===-1?i===-1?void 0:i:a);if(n&&(c=on(c)),o=i,c==="")continue;let u;a===-1?u="":(u=e.slice(a+1,i===-1?void 0:i),n&&(u=on(u))),r?(s[c]&&Array.isArray(s[c])||(s[c]=[]),s[c].push(u)):s[c]??(s[c]=u)}return t?s[t]:s},ia=Ro,aa=(e,t)=>Ro(e,t,!0),Gn=decodeURIComponent,as=e=>Jr(e,Gn),pt,se,ye,jo,zo,$n,xe,wo,Io=(wo=class{constructor(e,t="/",r=[[]]){O(this,ye);T(this,"raw");O(this,pt);O(this,se);T(this,"routeIndex",0);T(this,"path");T(this,"bodyCache",{});O(this,xe,e=>{const{bodyCache:t,raw:r}=this,n=t[e];if(n)return n;const s=Object.keys(t)[0];return s?t[s].then(o=>(s==="json"&&(o=JSON.stringify(o)),new Response(o)[e]())):t[e]=r[e]()});this.raw=e,this.path=t,E(this,se,r),E(this,pt,{})}param(e){return e?A(this,ye,jo).call(this,e):A(this,ye,zo).call(this)}query(e){return ia(this.url,e)}queries(e){return aa(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;const t={};return this.raw.headers.forEach((r,n)=>{t[n]=r}),t}async parseBody(e){var t;return(t=this.bodyCache).parsedBody??(t.parsedBody=await Vi(this,e))}json(){return f(this,xe).call(this,"text").then(e=>JSON.parse(e))}text(){return f(this,xe).call(this,"text")}arrayBuffer(){return f(this,xe).call(this,"arrayBuffer")}blob(){return f(this,xe).call(this,"blob")}formData(){return f(this,xe).call(this,"formData")}addValidatedData(e,t){f(this,pt)[e]=t}valid(e){return f(this,pt)[e]}get url(){return this.raw.url}get method(){return this.raw.method}get[Wi](){return f(this,se)}get matchedRoutes(){return f(this,se)[0].map(([[,e]])=>e)}get routePath(){return f(this,se)[0].map(([[,e]])=>e)[this.routeIndex].path}},pt=new WeakMap,se=new WeakMap,ye=new WeakSet,jo=function(e){const t=f(this,se)[0][this.routeIndex][1][e],r=A(this,ye,$n).call(this,t);return r&&/\%/.test(r)?as(r):r},zo=function(){const e={},t=Object.keys(f(this,se)[0][this.routeIndex][1]);for(const r of t){const n=A(this,ye,$n).call(this,f(this,se)[0][this.routeIndex][1][r]);n!==void 0&&(e[r]=/\%/.test(n)?as(n):n)}return e},$n=function(e){return f(this,se)[1]?f(this,se)[1][e]:e},xe=new WeakMap,wo),ca={Stringify:1},Mo=async(e,t,r,n,s)=>{typeof e=="object"&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));const o=e.callbacks;return o!=null&&o.length?(s?s[0]+=e:s=[e],Promise.all(o.map(a=>a({phase:t,buffer:s,context:n}))).then(a=>Promise.all(a.filter(Boolean).map(c=>Mo(c,t,!1,n,s))).then(()=>s[0]))):Promise.resolve(e)},ua="text/plain; charset=UTF-8",an=(e,t)=>({"Content-Type":e,...t}),Qt,er,me,ft,ve,Q,tr,mt,vt,Ue,rr,nr,Se,ut,Eo,la=(Eo=class{constructor(e,t){O(this,Se);O(this,Qt);O(this,er);T(this,"env",{});O(this,me);T(this,"finalized",!1);T(this,"error");O(this,ft);O(this,ve);O(this,Q);O(this,tr);O(this,mt);O(this,vt);O(this,Ue);O(this,rr);O(this,nr);T(this,"render",(...e)=>(f(this,mt)??E(this,mt,t=>this.html(t)),f(this,mt).call(this,...e)));T(this,"setLayout",e=>E(this,tr,e));T(this,"getLayout",()=>f(this,tr));T(this,"setRenderer",e=>{E(this,mt,e)});T(this,"header",(e,t,r)=>{this.finalized&&E(this,Q,new Response(f(this,Q).body,f(this,Q)));const n=f(this,Q)?f(this,Q).headers:f(this,Ue)??E(this,Ue,new Headers);t===void 0?n.delete(e):r!=null&&r.append?n.append(e,t):n.set(e,t)});T(this,"status",e=>{E(this,ft,e)});T(this,"set",(e,t)=>{f(this,me)??E(this,me,new Map),f(this,me).set(e,t)});T(this,"get",e=>f(this,me)?f(this,me).get(e):void 0);T(this,"newResponse",(...e)=>A(this,Se,ut).call(this,...e));T(this,"body",(e,t,r)=>A(this,Se,ut).call(this,e,t,r));T(this,"text",(e,t,r)=>!f(this,Ue)&&!f(this,ft)&&!t&&!r&&!this.finalized?new Response(e):A(this,Se,ut).call(this,e,t,an(ua,r)));T(this,"json",(e,t,r)=>A(this,Se,ut).call(this,JSON.stringify(e),t,an("application/json",r)));T(this,"html",(e,t,r)=>{const n=s=>A(this,Se,ut).call(this,s,t,an("text/html; charset=UTF-8",r));return typeof e=="object"?Mo(e,ca.Stringify,!1,{}).then(n):n(e)});T(this,"redirect",(e,t)=>{const r=String(e);return this.header("Location",/[^\x00-\xFF]/.test(r)?encodeURI(r):r),this.newResponse(null,t??302)});T(this,"notFound",()=>(f(this,vt)??E(this,vt,()=>new Response),f(this,vt).call(this,this)));E(this,Qt,e),t&&(E(this,ve,t.executionCtx),this.env=t.env,E(this,vt,t.notFoundHandler),E(this,nr,t.path),E(this,rr,t.matchResult))}get req(){return f(this,er)??E(this,er,new Io(f(this,Qt),f(this,nr),f(this,rr))),f(this,er)}get event(){if(f(this,ve)&&"respondWith"in f(this,ve))return f(this,ve);throw Error("This context has no FetchEvent")}get executionCtx(){if(f(this,ve))return f(this,ve);throw Error("This context has no ExecutionContext")}get res(){return f(this,Q)||E(this,Q,new Response(null,{headers:f(this,Ue)??E(this,Ue,new Headers)}))}set res(e){if(f(this,Q)&&e){e=new Response(e.body,e);for(const[t,r]of f(this,Q).headers.entries())if(t!=="content-type")if(t==="set-cookie"){const n=f(this,Q).headers.getSetCookie();e.headers.delete("set-cookie");for(const s of n)e.headers.append("set-cookie",s)}else e.headers.set(t,r)}E(this,Q,e),this.finalized=!0}get var(){return f(this,me)?Object.fromEntries(f(this,me)):{}}},Qt=new WeakMap,er=new WeakMap,me=new WeakMap,ft=new WeakMap,ve=new WeakMap,Q=new WeakMap,tr=new WeakMap,mt=new WeakMap,vt=new WeakMap,Ue=new WeakMap,rr=new WeakMap,nr=new WeakMap,Se=new WeakSet,ut=function(e,t,r){const n=f(this,Q)?new Headers(f(this,Q).headers):f(this,Ue)??new Headers;if(typeof t=="object"&&"headers"in t){const o=t.headers instanceof Headers?t.headers:new Headers(t.headers);for(const[i,a]of o)i.toLowerCase()==="set-cookie"?n.append(i,a):n.set(i,a)}if(r)for(const[o,i]of Object.entries(r))if(typeof i=="string")n.set(o,i);else{n.delete(o);for(const a of i)n.append(o,a)}const s=typeof t=="number"?t:(t==null?void 0:t.status)??f(this,ft);return new Response(e,{status:s,headers:n})},Eo),U="ALL",da="all",ha=["get","post","put","delete","options","patch"],Do="Can not add a route since the matcher is already built.",No=class extends Error{},pa="__COMPOSED_HANDLER",fa=e=>e.text("404 Not Found",404),cs=(e,t)=>{if("getResponse"in e){const r=e.getResponse();return t.newResponse(r.body,r)}return console.error(e),t.text("Internal Server Error",500)},ae,L,Go,ce,Ne,jr,zr,gt,ma=(gt=class{constructor(t={}){O(this,L);T(this,"get");T(this,"post");T(this,"put");T(this,"delete");T(this,"options");T(this,"patch");T(this,"all");T(this,"on");T(this,"use");T(this,"router");T(this,"getPath");T(this,"_basePath","/");O(this,ae,"/");T(this,"routes",[]);O(this,ce,fa);T(this,"errorHandler",cs);T(this,"onError",t=>(this.errorHandler=t,this));T(this,"notFound",t=>(E(this,ce,t),this));T(this,"fetch",(t,...r)=>A(this,L,zr).call(this,t,r[1],r[0],t.method));T(this,"request",(t,r,n,s)=>t instanceof Request?this.fetch(r?new Request(t,r):t,n,s):(t=t.toString(),this.fetch(new Request(/^https?:\/\//.test(t)?t:`http://localhost${ct("/",t)}`,r),n,s)));T(this,"fire",()=>{addEventListener("fetch",t=>{t.respondWith(A(this,L,zr).call(this,t.request,t,void 0,t.request.method))})});[...ha,da].forEach(o=>{this[o]=(i,...a)=>(typeof i=="string"?E(this,ae,i):A(this,L,Ne).call(this,o,f(this,ae),i),a.forEach(c=>{A(this,L,Ne).call(this,o,f(this,ae),c)}),this)}),this.on=(o,i,...a)=>{for(const c of[i].flat()){E(this,ae,c);for(const u of[o].flat())a.map(l=>{A(this,L,Ne).call(this,u.toUpperCase(),f(this,ae),l)})}return this},this.use=(o,...i)=>(typeof o=="string"?E(this,ae,o):(E(this,ae,"*"),i.unshift(o)),i.forEach(a=>{A(this,L,Ne).call(this,U,f(this,ae),a)}),this);const{strict:n,...s}=t;Object.assign(this,s),this.getPath=n??!0?t.getPath??$o:oa}route(t,r){const n=this.basePath(t);return r.routes.map(s=>{var i;let o;r.errorHandler===cs?o=s.handler:(o=async(a,c)=>(await os([],r.errorHandler)(a,()=>s.handler(a,c))).res,o[pa]=s.handler),A(i=n,L,Ne).call(i,s.method,s.path,o)}),this}basePath(t){const r=A(this,L,Go).call(this);return r._basePath=ct(this._basePath,t),r}mount(t,r,n){let s,o;n&&(typeof n=="function"?o=n:(o=n.optionHandler,n.replaceRequest===!1?s=c=>c:s=n.replaceRequest));const i=o?c=>{const u=o(c);return Array.isArray(u)?u:[u]}:c=>{let u;try{u=c.executionCtx}catch{}return[c.env,u]};s||(s=(()=>{const c=ct(this._basePath,t),u=c==="/"?0:c.length;return l=>{const h=new URL(l.url);return h.pathname=h.pathname.slice(u)||"/",new Request(h,l)}})());const a=async(c,u)=>{const l=await r(s(c.req.raw),...i(c));if(l)return l;await u()};return A(this,L,Ne).call(this,U,ct(t,"*"),a),this}},ae=new WeakMap,L=new WeakSet,Go=function(){const t=new gt({router:this.router,getPath:this.getPath});return t.errorHandler=this.errorHandler,E(t,ce,f(this,ce)),t.routes=this.routes,t},ce=new WeakMap,Ne=function(t,r,n){t=t.toUpperCase(),r=ct(this._basePath,r);const s={basePath:this._basePath,path:r,method:t,handler:n};this.router.add(t,r,[n,s]),this.routes.push(s)},jr=function(t,r){if(t instanceof Error)return this.errorHandler(t,r);throw t},zr=function(t,r,n,s){if(s==="HEAD")return(async()=>new Response(null,await A(this,L,zr).call(this,t,r,n,"GET")))();const o=this.getPath(t,{env:n}),i=this.router.match(s,o),a=new la(t,{path:o,matchResult:i,env:n,executionCtx:r,notFoundHandler:f(this,ce)});if(i[0].length===1){let u;try{u=i[0][0][0][0](a,async()=>{a.res=await f(this,ce).call(this,a)})}catch(l){return A(this,L,jr).call(this,l,a)}return u instanceof Promise?u.then(l=>l||(a.finalized?a.res:f(this,ce).call(this,a))).catch(l=>A(this,L,jr).call(this,l,a)):u??f(this,ce).call(this,a)}const c=os(i[0],this.errorHandler,f(this,ce));return(async()=>{try{const u=await c(a);if(!u.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return u.res}catch(u){return A(this,L,jr).call(this,u,a)}})()},gt),Zo=[];function va(e,t){const r=this.buildAllMatchers(),n=((s,o)=>{const i=r[s]||r[U],a=i[2][o];if(a)return a;const c=o.match(i[0]);if(!c)return[[],Zo];const u=c.indexOf("",1);return[i[1][u],c]});return this.match=n,n(e,t)}var Dr="[^/]+",Bt=".*",Jt="(?:|/.*)",lt=Symbol(),ga=new Set(".\\+*[^]$()");function _a(e,t){return e.length===1?t.length===1?e<t?-1:1:-1:t.length===1||e===Bt||e===Jt?1:t===Bt||t===Jt?-1:e===Dr?1:t===Dr?-1:e.length===t.length?e<t?-1:1:t.length-e.length}var Le,qe,ue,Je,ya=(Je=class{constructor(){O(this,Le);O(this,qe);O(this,ue,Object.create(null))}insert(t,r,n,s,o){if(t.length===0){if(f(this,Le)!==void 0)throw lt;if(o)return;E(this,Le,r);return}const[i,...a]=t,c=i==="*"?a.length===0?["","",Bt]:["","",Dr]:i==="/*"?["","",Jt]:i.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);let u;if(c){const l=c[1];let h=c[2]||Dr;if(l&&c[2]&&(h===".*"||(h=h.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(h))))throw lt;if(u=f(this,ue)[h],!u){if(Object.keys(f(this,ue)).some(p=>p!==Bt&&p!==Jt))throw lt;if(o)return;u=f(this,ue)[h]=new Je,l!==""&&E(u,qe,s.varIndex++)}!o&&l!==""&&n.push([l,f(u,qe)])}else if(u=f(this,ue)[i],!u){if(Object.keys(f(this,ue)).some(l=>l.length>1&&l!==Bt&&l!==Jt))throw lt;if(o)return;u=f(this,ue)[i]=new Je}u.insert(a,r,n,s,o)}buildRegExpStr(){const r=Object.keys(f(this,ue)).sort(_a).map(n=>{const s=f(this,ue)[n];return(typeof f(s,qe)=="number"?`(${n})@${f(s,qe)}`:ga.has(n)?`\\${n}`:n)+s.buildRegExpStr()});return typeof f(this,Le)=="number"&&r.unshift(`#${f(this,Le)}`),r.length===0?"":r.length===1?r[0]:"(?:"+r.join("|")+")"}},Le=new WeakMap,qe=new WeakMap,ue=new WeakMap,Je),Hr,sr,xo,Pa=(xo=class{constructor(){O(this,Hr,{varIndex:0});O(this,sr,new ya)}insert(e,t,r){const n=[],s=[];for(let i=0;;){let a=!1;if(e=e.replace(/\{[^}]+\}/g,c=>{const u=`@\\${i}`;return s[i]=[u,c],i++,a=!0,u}),!a)break}const o=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let i=s.length-1;i>=0;i--){const[a]=s[i];for(let c=o.length-1;c>=0;c--)if(o[c].indexOf(a)!==-1){o[c]=o[c].replace(a,s[i][1]);break}}return f(this,sr).insert(o,t,n,f(this,Hr),r),n}buildRegExp(){let e=f(this,sr).buildRegExpStr();if(e==="")return[/^$/,[],[]];let t=0;const r=[],n=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(s,o,i)=>o!==void 0?(r[++t]=Number(o),"$()"):(i!==void 0&&(n[Number(i)]=++t),"")),[new RegExp(`^${e}`),r,n]}},Hr=new WeakMap,sr=new WeakMap,xo),ba=[/^$/,[],Object.create(null)],Mr=Object.create(null);function Fo(e){return Mr[e]??(Mr[e]=new RegExp(e==="*"?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,(t,r)=>r?`\\${r}`:"(?:|/.*)")}$`))}function Ta(){Mr=Object.create(null)}function wa(e){var u;const t=new Pa,r=[];if(e.length===0)return ba;const n=e.map(l=>[!/\*|\/:/.test(l[0]),...l]).sort(([l,h],[p,v])=>l?1:p?-1:h.length-v.length),s=Object.create(null);for(let l=0,h=-1,p=n.length;l<p;l++){const[v,g,y]=n[l];v?s[g]=[y.map(([P])=>[P,Object.create(null)]),Zo]:h++;let _;try{_=t.insert(g,h,v)}catch(P){throw P===lt?new No(g):P}v||(r[h]=y.map(([P,w])=>{const k=Object.create(null);for(w-=1;w>=0;w--){const[x,S]=_[w];k[x]=S}return[P,k]}))}const[o,i,a]=t.buildRegExp();for(let l=0,h=r.length;l<h;l++)for(let p=0,v=r[l].length;p<v;p++){const g=(u=r[l][p])==null?void 0:u[1];if(!g)continue;const y=Object.keys(g);for(let _=0,P=y.length;_<P;_++)g[y[_]]=a[g[y[_]]]}const c=[];for(const l in i)c[l]=r[i[l]];return[o,c,s]}function Xe(e,t){if(e){for(const r of Object.keys(e).sort((n,s)=>s.length-n.length))if(Fo(r).test(t))return[...e[r]]}}var Oe,ke,Br,Uo,So,Ea=(So=class{constructor(){O(this,Br);T(this,"name","RegExpRouter");O(this,Oe);O(this,ke);T(this,"match",va);E(this,Oe,{[U]:Object.create(null)}),E(this,ke,{[U]:Object.create(null)})}add(e,t,r){var a;const n=f(this,Oe),s=f(this,ke);if(!n||!s)throw new Error(Do);n[e]||[n,s].forEach(c=>{c[e]=Object.create(null),Object.keys(c[U]).forEach(u=>{c[e][u]=[...c[U][u]]})}),t==="/*"&&(t="*");const o=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){const c=Fo(t);e===U?Object.keys(n).forEach(u=>{var l;(l=n[u])[t]||(l[t]=Xe(n[u],t)||Xe(n[U],t)||[])}):(a=n[e])[t]||(a[t]=Xe(n[e],t)||Xe(n[U],t)||[]),Object.keys(n).forEach(u=>{(e===U||e===u)&&Object.keys(n[u]).forEach(l=>{c.test(l)&&n[u][l].push([r,o])})}),Object.keys(s).forEach(u=>{(e===U||e===u)&&Object.keys(s[u]).forEach(l=>c.test(l)&&s[u][l].push([r,o]))});return}const i=Co(t)||[t];for(let c=0,u=i.length;c<u;c++){const l=i[c];Object.keys(s).forEach(h=>{var p;(e===U||e===h)&&((p=s[h])[l]||(p[l]=[...Xe(n[h],l)||Xe(n[U],l)||[]]),s[h][l].push([r,o-u+c+1]))})}}buildAllMatchers(){const e=Object.create(null);return Object.keys(f(this,ke)).concat(Object.keys(f(this,Oe))).forEach(t=>{e[t]||(e[t]=A(this,Br,Uo).call(this,t))}),E(this,Oe,E(this,ke,void 0)),Ta(),e}},Oe=new WeakMap,ke=new WeakMap,Br=new WeakSet,Uo=function(e){const t=[];let r=e===U;return[f(this,Oe),f(this,ke)].forEach(n=>{const s=n[e]?Object.keys(n[e]).map(o=>[o,n[e][o]]):[];s.length!==0?(r||(r=!0),t.push(...s)):e!==U&&t.push(...Object.keys(n[U]).map(o=>[o,n[U][o]]))}),r?wa(t):null},So),Ae,ge,Oo,xa=(Oo=class{constructor(e){T(this,"name","SmartRouter");O(this,Ae,[]);O(this,ge,[]);E(this,Ae,e.routers)}add(e,t,r){if(!f(this,ge))throw new Error(Do);f(this,ge).push([e,t,r])}match(e,t){if(!f(this,ge))throw new Error("Fatal error");const r=f(this,Ae),n=f(this,ge),s=r.length;let o=0,i;for(;o<s;o++){const a=r[o];try{for(let c=0,u=n.length;c<u;c++)a.add(...n[c]);i=a.match(e,t)}catch(c){if(c instanceof No)continue;throw c}this.match=a.match.bind(a),E(this,Ae,[a]),E(this,ge,void 0);break}if(o===s)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,i}get activeRouter(){if(f(this,ge)||f(this,Ae).length!==1)throw new Error("No active router has been determined yet.");return f(this,Ae)[0]}},Ae=new WeakMap,ge=new WeakMap,Oo),wt=Object.create(null),$e,K,He,_t,H,_e,Ge,yt,Sa=(yt=class{constructor(t,r,n){O(this,_e);O(this,$e);O(this,K);O(this,He);O(this,_t,0);O(this,H,wt);if(E(this,K,n||Object.create(null)),E(this,$e,[]),t&&r){const s=Object.create(null);s[t]={handler:r,possibleKeys:[],score:0},E(this,$e,[s])}E(this,He,[])}insert(t,r,n){E(this,_t,++ss(this,_t)._);let s=this;const o=ea(r),i=[];for(let a=0,c=o.length;a<c;a++){const u=o[a],l=o[a+1],h=na(u,l),p=Array.isArray(h)?h[0]:u;if(p in f(s,K)){s=f(s,K)[p],h&&i.push(h[1]);continue}f(s,K)[p]=new yt,h&&(f(s,He).push(h),i.push(h[1])),s=f(s,K)[p]}return f(s,$e).push({[t]:{handler:n,possibleKeys:i.filter((a,c,u)=>u.indexOf(a)===c),score:f(this,_t)}}),s}search(t,r){var c;const n=[];E(this,H,wt);let o=[this];const i=Ao(r),a=[];for(let u=0,l=i.length;u<l;u++){const h=i[u],p=u===l-1,v=[];for(let g=0,y=o.length;g<y;g++){const _=o[g],P=f(_,K)[h];P&&(E(P,H,f(_,H)),p?(f(P,K)["*"]&&n.push(...A(this,_e,Ge).call(this,f(P,K)["*"],t,f(_,H))),n.push(...A(this,_e,Ge).call(this,P,t,f(_,H)))):v.push(P));for(let w=0,k=f(_,He).length;w<k;w++){const x=f(_,He)[w],S=f(_,H)===wt?{}:{...f(_,H)};if(x==="*"){const de=f(_,K)["*"];de&&(n.push(...A(this,_e,Ge).call(this,de,t,f(_,H))),E(de,H,S),v.push(de));continue}const[Z,F,W]=x;if(!h&&!(W instanceof RegExp))continue;const V=f(_,K)[Z],re=i.slice(u).join("/");if(W instanceof RegExp){const de=W.exec(re);if(de){if(S[F]=de[0],n.push(...A(this,_e,Ge).call(this,V,t,f(_,H),S)),Object.keys(f(V,K)).length){E(V,H,S);const nn=((c=de[0].match(/\//))==null?void 0:c.length)??0;(a[nn]||(a[nn]=[])).push(V)}continue}}(W===!0||W.test(h))&&(S[F]=h,p?(n.push(...A(this,_e,Ge).call(this,V,t,S,f(_,H))),f(V,K)["*"]&&n.push(...A(this,_e,Ge).call(this,f(V,K)["*"],t,S,f(_,H)))):(E(V,H,S),v.push(V)))}}o=v.concat(a.shift()??[])}return n.length>1&&n.sort((u,l)=>u.score-l.score),[n.map(({handler:u,params:l})=>[u,l])]}},$e=new WeakMap,K=new WeakMap,He=new WeakMap,_t=new WeakMap,H=new WeakMap,_e=new WeakSet,Ge=function(t,r,n,s){const o=[];for(let i=0,a=f(t,$e).length;i<a;i++){const c=f(t,$e)[i],u=c[r]||c[U],l={};if(u!==void 0&&(u.params=Object.create(null),o.push(u),n!==wt||s&&s!==wt))for(let h=0,p=u.possibleKeys.length;h<p;h++){const v=u.possibleKeys[h],g=l[u.score];u.params[v]=s!=null&&s[v]&&!g?s[v]:n[v]??(s==null?void 0:s[v]),l[u.score]=!0}}return o},yt),Be,ko,Oa=(ko=class{constructor(){T(this,"name","TrieRouter");O(this,Be);E(this,Be,new Sa)}add(e,t,r){const n=Co(t);if(n){for(let s=0,o=n.length;s<o;s++)f(this,Be).insert(e,n[s],r);return}f(this,Be).insert(e,t,r)}match(e,t){return f(this,Be).search(e,t)}},Be=new WeakMap,ko),Ke=class extends ma{constructor(e={}){super(e),this.router=e.router??new xa({routers:[new Ea,new Oa]})}},ka=e=>{const r={...{origin:"*",allowMethods:["GET","HEAD","PUT","POST","DELETE","PATCH"],allowHeaders:[],exposeHeaders:[]},...e},n=(o=>typeof o=="string"?o==="*"?()=>o:i=>o===i?i:null:typeof o=="function"?o:i=>o.includes(i)?i:null)(r.origin),s=(o=>typeof o=="function"?o:Array.isArray(o)?()=>o:()=>[])(r.allowMethods);return async function(i,a){var l;function c(h,p){i.res.headers.set(h,p)}const u=await n(i.req.header("origin")||"",i);if(u&&c("Access-Control-Allow-Origin",u),r.credentials&&c("Access-Control-Allow-Credentials","true"),(l=r.exposeHeaders)!=null&&l.length&&c("Access-Control-Expose-Headers",r.exposeHeaders.join(",")),i.req.method==="OPTIONS"){r.origin!=="*"&&c("Vary","Origin"),r.maxAge!=null&&c("Access-Control-Max-Age",r.maxAge.toString());const h=await s(i.req.header("origin")||"",i);h.length&&c("Access-Control-Allow-Methods",h.join(","));let p=r.allowHeaders;if(!(p!=null&&p.length)){const v=i.req.header("Access-Control-Request-Headers");v&&(p=v.split(/\s*,\s*/))}return p!=null&&p.length&&(c("Access-Control-Allow-Headers",p.join(",")),i.res.headers.append("Vary","Access-Control-Request-Headers")),i.res.headers.delete("Content-Length"),i.res.headers.delete("Content-Type"),new Response(null,{headers:i.res.headers,status:204,statusText:"No Content"})}await a(),r.origin!=="*"&&i.header("Vary","Origin",{append:!0})}},Aa=/^\s*(?:text\/(?!event-stream(?:[;\s]|$))[^;\s]+|application\/(?:javascript|json|xml|xml-dtd|ecmascript|dart|postscript|rtf|tar|toml|vnd\.dart|vnd\.ms-fontobject|vnd\.ms-opentype|wasm|x-httpd-php|x-javascript|x-ns-proxy-autoconfig|x-sh|x-tar|x-virtualbox-hdd|x-virtualbox-ova|x-virtualbox-ovf|x-virtualbox-vbox|x-virtualbox-vdi|x-virtualbox-vhd|x-virtualbox-vmdk|x-www-form-urlencoded)|font\/(?:otf|ttf)|image\/(?:bmp|vnd\.adobe\.photoshop|vnd\.microsoft\.icon|vnd\.ms-dds|x-icon|x-ms-bmp)|message\/rfc822|model\/gltf-binary|x-shader\/x-fragment|x-shader\/x-vertex|[^;\s]+?\+(?:json|text|xml|yaml))(?:[;\s]|$)/i,us=(e,t=Ca)=>{const r=/\.([a-zA-Z0-9]+?)$/,n=e.match(r);if(!n)return;let s=t[n[1]];return s&&s.startsWith("text")&&(s+="; charset=utf-8"),s},$a={aac:"audio/aac",avi:"video/x-msvideo",avif:"image/avif",av1:"video/av1",bin:"application/octet-stream",bmp:"image/bmp",css:"text/css",csv:"text/csv",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",gz:"application/gzip",htm:"text/html",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",map:"application/json",mid:"audio/x-midi",midi:"audio/x-midi",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",pdf:"application/pdf",png:"image/png",rtf:"application/rtf",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",wasm:"application/wasm",webm:"video/webm",weba:"audio/webm",webmanifest:"application/manifest+json",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xml:"application/xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2",gltf:"model/gltf+json",glb:"model/gltf-binary"},Ca=$a,Ra=(...e)=>{let t=e.filter(s=>s!=="").join("/");t=t.replace(new RegExp("(?<=\\/)\\/+","g"),"");const r=t.split("/"),n=[];for(const s of r)s===".."&&n.length>0&&n.at(-1)!==".."?n.pop():s!=="."&&n.push(s);return n.join("/")||"."},Lo={br:".br",zstd:".zst",gzip:".gz"},Ia=Object.keys(Lo),ja="index.html",za=e=>{const t=e.root??"./",r=e.path,n=e.join??Ra;return async(s,o)=>{var l,h,p,v;if(s.finalized)return o();let i;if(e.path)i=e.path;else try{if(i=decodeURIComponent(s.req.path),/(?:^|[\/\\])\.\.(?:$|[\/\\])/.test(i))throw new Error}catch{return await((l=e.onNotFound)==null?void 0:l.call(e,s.req.path,s)),o()}let a=n(t,!r&&e.rewriteRequestPath?e.rewriteRequestPath(i):i);e.isDir&&await e.isDir(a)&&(a=n(a,ja));const c=e.getContent;let u=await c(a,s);if(u instanceof Response)return s.newResponse(u.body,u);if(u){const g=e.mimes&&us(a,e.mimes)||us(a);if(s.header("Content-Type",g||"application/octet-stream"),e.precompressed&&(!g||Aa.test(g))){const y=new Set((h=s.req.header("Accept-Encoding"))==null?void 0:h.split(",").map(_=>_.trim()));for(const _ of Ia){if(!y.has(_))continue;const P=await c(a+Lo[_],s);if(P){u=P,s.header("Content-Encoding",_),s.header("Vary","Accept-Encoding",{append:!0});break}}}return await((p=e.onFound)==null?void 0:p.call(e,a,s)),s.body(u)}await((v=e.onNotFound)==null?void 0:v.call(e,a,s)),await o()}},Ma=async(e,t)=>{let r;t&&t.manifest?typeof t.manifest=="string"?r=JSON.parse(t.manifest):r=t.manifest:typeof __STATIC_CONTENT_MANIFEST=="string"?r=JSON.parse(__STATIC_CONTENT_MANIFEST):r=__STATIC_CONTENT_MANIFEST;let n;t&&t.namespace?n=t.namespace:n=__STATIC_CONTENT;const s=r[e];if(!s)return null;const o=await n.get(s,{type:"stream"});return o||null},Da=e=>async function(r,n){return za({...e,getContent:async o=>Ma(o,{manifest:e.manifest,namespace:e.namespace?e.namespace:r.env?r.env.__STATIC_CONTENT:void 0})})(r,n)},Na=e=>Da(e),Ga=/^[\w!#$%&'*.^`|~+-]+$/,Za=/^[ !#-:<-[\]-~]*$/,Fa=(e,t)=>{const r=e.trim().split(";"),n={};for(let s of r){s=s.trim();const o=s.indexOf("=");if(o===-1)continue;const i=s.substring(0,o).trim();if(!Ga.test(i))continue;let a=s.substring(o+1).trim();a.startsWith('"')&&a.endsWith('"')&&(a=a.slice(1,-1)),Za.test(a)&&(n[i]=a.indexOf("%")!==-1?Jr(a,Gn):a)}return n},Ua=(e,t,r)=>{const n=e.req.raw.headers.get("Cookie");return n?Fa(n):{}},La=(e,t)=>new Response(e,{headers:{"Content-Type":t}}).formData(),qa=/^application\/([a-z-\.]+\+)?json(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,Ha=/^multipart\/form-data(;\s?boundary=[a-zA-Z0-9'"()+_,\-./:=?]+)?$/,Ba=/^application\/x-www-form-urlencoded(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,Ja=(e,t)=>async(r,n)=>{let s={};const o=r.req.header("Content-Type");switch(e){case"json":if(!o||!qa.test(o))break;try{s=await r.req.json()}catch{const a="Malformed JSON in request body";throw new is(400,{message:a})}break;case"form":{if(!o||!(Ha.test(o)||Ba.test(o)))break;let a;if(r.req.bodyCache.formData)a=await r.req.bodyCache.formData;else try{const u=await r.req.arrayBuffer();a=await La(u,o),r.req.bodyCache.formData=a}catch(u){let l="Malformed FormData request.";throw l+=u instanceof Error?` ${u.message}`:` ${String(u)}`,new is(400,{message:l})}const c={};a.forEach((u,l)=>{l.endsWith("[]")?(c[l]??(c[l]=[])).push(u):Array.isArray(c[l])?c[l].push(u):l in c?c[l]=[c[l],u]:c[l]=u}),s=c;break}case"query":s=Object.fromEntries(Object.entries(r.req.queries()).map(([a,c])=>c.length===1?[a,c[0]]:[a,c]));break;case"param":s=r.req.param();break;case"header":s=r.req.header();break;case"cookie":s=Ua(r);break}const i=await t(s,r);return i instanceof Response?i:(r.req.addValidatedData(e,i),await n())};function Wa(e,t,r,n){return Ja(e,async(s,o)=>{let i=s;if(e==="header"&&"_def"in t||e==="header"&&"_zod"in t){const c=Object.keys("in"in t?t.in.shape:t.shape),u=Object.fromEntries(c.map(l=>[l.toLowerCase(),l]));i=Object.fromEntries(Object.entries(s).map(([l,h])=>[u[l]||l,h]))}const a=n&&n.validationFunction?await n.validationFunction(t,i):await t.safeParseAsync(i);if(r){const c=await r({data:i,...a,target:e},o);if(c){if(c instanceof Response)return c;if("response"in c)return c.response}}return a.success?a.data:o.json(a,400)})}const Pt=Wa;function m(e,t,r){function n(a,c){if(a._zod||Object.defineProperty(a,"_zod",{value:{def:c,constr:i,traits:new Set},enumerable:!1}),a._zod.traits.has(e))return;a._zod.traits.add(e),t(a,c);const u=i.prototype,l=Object.keys(u);for(let h=0;h<l.length;h++){const p=l[h];p in a||(a[p]=u[p].bind(a))}}const s=(r==null?void 0:r.Parent)??Object;class o extends s{}Object.defineProperty(o,"name",{value:e});function i(a){var c;const u=r!=null&&r.Parent?new o:this;n(u,a),(c=u._zod).deferred??(c.deferred=[]);for(const l of u._zod.deferred)l();return u}return Object.defineProperty(i,"init",{value:n}),Object.defineProperty(i,Symbol.hasInstance,{value:a=>{var c,u;return r!=null&&r.Parent&&a instanceof r.Parent?!0:(u=(c=a==null?void 0:a._zod)==null?void 0:c.traits)==null?void 0:u.has(e)}}),Object.defineProperty(i,"name",{value:e}),i}class ht extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class qo extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const Ho={};function We(e){return Ho}function Bo(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,s])=>t.indexOf(+n)===-1).map(([n,s])=>s)}function Cn(e,t){return typeof t=="bigint"?t.toString():t}function Zn(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Fn(e){return e==null}function Un(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function Va(e,t){const r=(e.toString().split(".")[1]||"").length,n=t.toString();let s=(n.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(n)){const c=n.match(/\d?e-(\d?)/);c!=null&&c[1]&&(s=Number.parseInt(c[1]))}const o=r>s?r:s,i=Number.parseInt(e.toFixed(o).replace(".","")),a=Number.parseInt(t.toFixed(o).replace(".",""));return i%a/10**o}const ls=Symbol("evaluating");function $(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==ls)return n===void 0&&(n=ls,n=r()),n},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function Ye(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Ce(...e){const t={};for(const r of e){const n=Object.getOwnPropertyDescriptors(r);Object.assign(t,n)}return Object.defineProperties({},t)}function ds(e){return JSON.stringify(e)}function Ka(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Jo="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Nr(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Ya=Zn(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Kt(e){if(Nr(e)===!1)return!1;const t=e.constructor;if(t===void 0||typeof t!="function")return!0;const r=t.prototype;return!(Nr(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Wo(e){return Kt(e)?{...e}:Array.isArray(e)?[...e]:e}const Xa=new Set(["string","number","symbol"]);function Wr(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Re(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(n._zod.parent=e),n}function b(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Qa(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const ec={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function tc(e,t){const r=e._zod.def,n=r.checks;if(n&&n.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const o=Ce(e._zod.def,{get shape(){const i={};for(const a in t){if(!(a in r.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&(i[a]=r.shape[a])}return Ye(this,"shape",i),i},checks:[]});return Re(e,o)}function rc(e,t){const r=e._zod.def,n=r.checks;if(n&&n.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const o=Ce(e._zod.def,{get shape(){const i={...e._zod.def.shape};for(const a in t){if(!(a in r.shape))throw new Error(`Unrecognized key: "${a}"`);t[a]&&delete i[a]}return Ye(this,"shape",i),i},checks:[]});return Re(e,o)}function nc(e,t){if(!Kt(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0){const o=e._zod.def.shape;for(const i in t)if(Object.getOwnPropertyDescriptor(o,i)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=Ce(e._zod.def,{get shape(){const o={...e._zod.def.shape,...t};return Ye(this,"shape",o),o}});return Re(e,s)}function sc(e,t){if(!Kt(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r=Ce(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t};return Ye(this,"shape",n),n}});return Re(e,r)}function oc(e,t){const r=Ce(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return Ye(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return Re(e,r)}function ic(e,t,r){const s=t._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const i=Ce(t._zod.def,{get shape(){const a=t._zod.def.shape,c={...a};if(r)for(const u in r){if(!(u in a))throw new Error(`Unrecognized key: "${u}"`);r[u]&&(c[u]=e?new e({type:"optional",innerType:a[u]}):a[u])}else for(const u in a)c[u]=e?new e({type:"optional",innerType:a[u]}):a[u];return Ye(this,"shape",c),c},checks:[]});return Re(t,i)}function ac(e,t,r){const n=Ce(t._zod.def,{get shape(){const s=t._zod.def.shape,o={...s};if(r)for(const i in r){if(!(i in o))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(o[i]=new e({type:"nonoptional",innerType:s[i]}))}else for(const i in s)o[i]=new e({type:"nonoptional",innerType:s[i]});return Ye(this,"shape",o),o}});return Re(t,n)}function dt(e,t=0){var r;if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(((r=e.issues[n])==null?void 0:r.continue)!==!0)return!0;return!1}function Vo(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function ar(e){return typeof e=="string"?e:e==null?void 0:e.message}function Ve(e,t,r){var s,o,i,a,c,u;const n={...e,path:e.path??[]};if(!e.message){const l=ar((i=(o=(s=e.inst)==null?void 0:s._zod.def)==null?void 0:o.error)==null?void 0:i.call(o,e))??ar((a=t==null?void 0:t.error)==null?void 0:a.call(t,e))??ar((c=r.customError)==null?void 0:c.call(r,e))??ar((u=r.localeError)==null?void 0:u.call(r,e))??"Invalid input";n.message=l}return delete n.inst,delete n.continue,t!=null&&t.reportInput||delete n.input,n}function Ln(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Yt(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const Ko=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Cn,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Yo=m("$ZodError",Ko),Xo=m("$ZodError",Ko,{Parent:Error});function cc(e,t=r=>r.message){const r={},n=[];for(const s of e.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}function uc(e,t=r=>r.message){const r={_errors:[]},n=s=>{for(const o of s.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(i=>n({issues:i}));else if(o.code==="invalid_key")n({issues:o.issues});else if(o.code==="invalid_element")n({issues:o.issues});else if(o.path.length===0)r._errors.push(t(o));else{let i=r,a=0;for(;a<o.path.length;){const c=o.path[a];a===o.path.length-1?(i[c]=i[c]||{_errors:[]},i[c]._errors.push(t(o))):i[c]=i[c]||{_errors:[]},i=i[c],a++}}};return n(e),r}const qn=e=>(t,r,n,s)=>{const o=n?Object.assign(n,{async:!1}):{async:!1},i=t._zod.run({value:r,issues:[]},o);if(i instanceof Promise)throw new ht;if(i.issues.length){const a=new((s==null?void 0:s.Err)??e)(i.issues.map(c=>Ve(c,o,We())));throw Jo(a,s==null?void 0:s.callee),a}return i.value},Hn=e=>async(t,r,n,s)=>{const o=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},o);if(i instanceof Promise&&(i=await i),i.issues.length){const a=new((s==null?void 0:s.Err)??e)(i.issues.map(c=>Ve(c,o,We())));throw Jo(a,s==null?void 0:s.callee),a}return i.value},Vr=e=>(t,r,n)=>{const s=n?{...n,async:!1}:{async:!1},o=t._zod.run({value:r,issues:[]},s);if(o instanceof Promise)throw new ht;return o.issues.length?{success:!1,error:new(e??Yo)(o.issues.map(i=>Ve(i,s,We())))}:{success:!0,data:o.value}},lc=Vr(Xo),Kr=e=>async(t,r,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},s);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(i=>Ve(i,s,We())))}:{success:!0,data:o.value}},dc=Kr(Xo),hc=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return qn(e)(t,r,s)},pc=e=>(t,r,n)=>qn(e)(t,r,n),fc=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Hn(e)(t,r,s)},mc=e=>async(t,r,n)=>Hn(e)(t,r,n),vc=e=>(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Vr(e)(t,r,s)},gc=e=>(t,r,n)=>Vr(e)(t,r,n),_c=e=>async(t,r,n)=>{const s=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Kr(e)(t,r,s)},yc=e=>async(t,r,n)=>Kr(e)(t,r,n),Pc=/^[cC][^\s-]{8,}$/,bc=/^[0-9a-z]+$/,Tc=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,wc=/^[0-9a-vA-V]{20}$/,Ec=/^[A-Za-z0-9]{27}$/,xc=/^[a-zA-Z0-9_-]{21}$/,Sc=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Oc=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,hs=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,kc=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Ac="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function $c(){return new RegExp(Ac,"u")}const Cc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Rc=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Ic=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,jc=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,zc=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Qo=/^[A-Za-z0-9_-]*$/,Mc=/^\+[1-9]\d{6,14}$/,ei="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Dc=new RegExp(`^${ei}$`);function ti(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Nc(e){return new RegExp(`^${ti(e)}$`)}function Gc(e){const t=ti({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${ei}T(?:${n})$`)}const Zc=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Fc=/^-?\d+$/,Uc=/^-?\d+(?:\.\d+)?$/,Lc=/^[^A-Z]*$/,qc=/^[^a-z]*$/,ee=m("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),ri={number:"number",bigint:"bigint",object:"date"},ni=m("$ZodCheckLessThan",(e,t)=>{ee.init(e,t);const r=ri[typeof t.value];e._zod.onattach.push(n=>{const s=n._zod.bag,o=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:typeof t.value=="object"?t.value.getTime():t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),si=m("$ZodCheckGreaterThan",(e,t)=>{ee.init(e,t);const r=ri[typeof t.value];e._zod.onattach.push(n=>{const s=n._zod.bag,o=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:typeof t.value=="object"?t.value.getTime():t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Hc=m("$ZodCheckMultipleOf",(e,t)=>{ee.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):Va(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),Bc=m("$ZodCheckNumberFormat",(e,t)=>{var i;ee.init(e,t),t.format=t.format||"float64";const r=(i=t.format)==null?void 0:i.includes("int"),n=r?"int":"number",[s,o]=ec[t.format];e._zod.onattach.push(a=>{const c=a._zod.bag;c.format=t.format,c.minimum=s,c.maximum=o,r&&(c.pattern=Fc)}),e._zod.check=a=>{const c=a.value;if(r){if(!Number.isInteger(c)){a.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?a.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,inclusive:!0,continue:!t.abort}):a.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,inclusive:!0,continue:!t.abort});return}}c<s&&a.issues.push({origin:"number",input:c,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),c>o&&a.issues.push({origin:"number",input:c,code:"too_big",maximum:o,inclusive:!0,inst:e,continue:!t.abort})}}),Jc=m("$ZodCheckMaxLength",(e,t)=>{var r;ee.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!Fn(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const s=n.value;if(s.length<=t.maximum)return;const i=Ln(s);n.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Wc=m("$ZodCheckMinLength",(e,t)=>{var r;ee.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!Fn(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const s=n.value;if(s.length>=t.minimum)return;const i=Ln(s);n.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Vc=m("$ZodCheckLengthEquals",(e,t)=>{var r;ee.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!Fn(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=n=>{const s=n.value,o=s.length;if(o===t.length)return;const i=Ln(s),a=o>t.length;n.issues.push({origin:i,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Yr=m("$ZodCheckStringFormat",(e,t)=>{var r,n;ee.init(e,t),e._zod.onattach.push(s=>{const o=s._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),Kc=m("$ZodCheckRegex",(e,t)=>{Yr.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Yc=m("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Lc),Yr.init(e,t)}),Xc=m("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=qc),Yr.init(e,t)}),Qc=m("$ZodCheckIncludes",(e,t)=>{ee.init(e,t);const r=Wr(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(s=>{const o=s._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),eu=m("$ZodCheckStartsWith",(e,t)=>{ee.init(e,t);const r=new RegExp(`^${Wr(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),tu=m("$ZodCheckEndsWith",(e,t)=>{ee.init(e,t);const r=new RegExp(`.*${Wr(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),ru=m("$ZodCheckOverwrite",(e,t)=>{ee.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class nu{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(i=>i),s=Math.min(...n.map(i=>i.length-i.trimStart().length)),o=n.map(i=>i.slice(s)).map(i=>" ".repeat(this.indent*2)+i);for(const i of o)this.content.push(i)}compile(){const t=Function,r=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(o=>`  ${o}`)];return new t(...r,s.join(`
`))}}const su={major:4,minor:3,patch:6},N=m("$ZodType",(e,t)=>{var s;var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=su;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const o of n)for(const i of o._zod.onattach)i(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),(s=e._zod.deferred)==null||s.push(()=>{e._zod.run=e._zod.parse});else{const o=(a,c,u)=>{let l=dt(a),h;for(const p of c){if(p._zod.def.when){if(!p._zod.def.when(a))continue}else if(l)continue;const v=a.issues.length,g=p._zod.check(a);if(g instanceof Promise&&(u==null?void 0:u.async)===!1)throw new ht;if(h||g instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await g,a.issues.length!==v&&(l||(l=dt(a,v)))});else{if(a.issues.length===v)continue;l||(l=dt(a,v))}}return h?h.then(()=>a):a},i=(a,c,u)=>{if(dt(a))return a.aborted=!0,a;const l=o(c,n,u);if(l instanceof Promise){if(u.async===!1)throw new ht;return l.then(h=>e._zod.parse(h,u))}return e._zod.parse(l,u)};e._zod.run=(a,c)=>{if(c.skipChecks)return e._zod.parse(a,c);if(c.direction==="backward"){const l=e._zod.parse({value:a.value,issues:[]},{...c,skipChecks:!0});return l instanceof Promise?l.then(h=>i(h,a,c)):i(l,a,c)}const u=e._zod.parse(a,c);if(u instanceof Promise){if(c.async===!1)throw new ht;return u.then(l=>o(l,n,c))}return o(u,n,c)}}$(e,"~standard",()=>({validate:o=>{var i;try{const a=lc(e,o);return a.success?{value:a.data}:{issues:(i=a.error)==null?void 0:i.issues}}catch{return dc(e,o).then(c=>{var u;return c.success?{value:c.data}:{issues:(u=c.error)==null?void 0:u.issues}})}},vendor:"zod",version:1}))}),Bn=m("$ZodString",(e,t)=>{var r;N.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??Zc(e._zod.bag),e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),I=m("$ZodStringFormat",(e,t)=>{Yr.init(e,t),Bn.init(e,t)}),ou=m("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Oc),I.init(e,t)}),iu=m("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=hs(n))}else t.pattern??(t.pattern=hs());I.init(e,t)}),au=m("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=kc),I.init(e,t)}),cu=m("$ZodURL",(e,t)=>{I.init(e,t),e._zod.check=r=>{try{const n=r.value.trim(),s=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=s.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),uu=m("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=$c()),I.init(e,t)}),lu=m("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=xc),I.init(e,t)}),du=m("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Pc),I.init(e,t)}),hu=m("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=bc),I.init(e,t)}),pu=m("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Tc),I.init(e,t)}),fu=m("$ZodXID",(e,t)=>{t.pattern??(t.pattern=wc),I.init(e,t)}),mu=m("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Ec),I.init(e,t)}),vu=m("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Gc(t)),I.init(e,t)}),gu=m("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Dc),I.init(e,t)}),_u=m("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Nc(t)),I.init(e,t)}),yu=m("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Sc),I.init(e,t)}),Pu=m("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Cc),I.init(e,t),e._zod.bag.format="ipv4"}),bu=m("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Rc),I.init(e,t),e._zod.bag.format="ipv6",e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),Tu=m("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Ic),I.init(e,t)}),wu=m("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=jc),I.init(e,t),e._zod.check=r=>{const n=r.value.split("/");try{if(n.length!==2)throw new Error;const[s,o]=n;if(!o)throw new Error;const i=Number(o);if(`${i}`!==o)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${s}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function oi(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Eu=m("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=zc),I.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=r=>{oi(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function xu(e){if(!Qo.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return oi(r)}const Su=m("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Qo),I.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=r=>{xu(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),Ou=m("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Mc),I.init(e,t)});function ku(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const s=JSON.parse(atob(n));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const Au=m("$ZodJWT",(e,t)=>{I.init(e,t),e._zod.check=r=>{ku(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),ii=m("$ZodNumber",(e,t)=>{N.init(e,t),e._zod.pattern=e._zod.bag.pattern??Uc,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const s=r.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return r;const o=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...o?{received:o}:{}}),r}}),$u=m("$ZodNumberFormat",(e,t)=>{Bc.init(e,t),ii.init(e,t)}),Cu=m("$ZodUnknown",(e,t)=>{N.init(e,t),e._zod.parse=r=>r}),Ru=m("$ZodNever",(e,t)=>{N.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function ps(e,t,r){e.issues.length&&t.issues.push(...Vo(r,e.issues)),t.value[r]=e.value}const Iu=m("$ZodArray",(e,t)=>{N.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),r;r.value=Array(s.length);const o=[];for(let i=0;i<s.length;i++){const a=s[i],c=t.element._zod.run({value:a,issues:[]},n);c instanceof Promise?o.push(c.then(u=>ps(u,r,i))):ps(c,r,i)}return o.length?Promise.all(o).then(()=>r):r}});function Gr(e,t,r,n,s){if(e.issues.length){if(s&&!(r in n))return;t.issues.push(...Vo(r,e.issues))}e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function ai(e){var n,s,o,i;const t=Object.keys(e.shape);for(const a of t)if(!((i=(o=(s=(n=e.shape)==null?void 0:n[a])==null?void 0:s._zod)==null?void 0:o.traits)!=null&&i.has("$ZodType")))throw new Error(`Invalid element at key "${a}": expected a Zod schema`);const r=Qa(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function ci(e,t,r,n,s,o){const i=[],a=s.keySet,c=s.catchall._zod,u=c.def.type,l=c.optout==="optional";for(const h in t){if(a.has(h))continue;if(u==="never"){i.push(h);continue}const p=c.run({value:t[h],issues:[]},n);p instanceof Promise?e.push(p.then(v=>Gr(v,r,h,t,l))):Gr(p,r,h,t,l)}return i.length&&r.issues.push({code:"unrecognized_keys",keys:i,input:t,inst:o}),e.length?Promise.all(e).then(()=>r):r}const ju=m("$ZodObject",(e,t)=>{N.init(e,t);const r=Object.getOwnPropertyDescriptor(t,"shape");if(!(r!=null&&r.get)){const a=t.shape;Object.defineProperty(t,"shape",{get:()=>{const c={...a};return Object.defineProperty(t,"shape",{value:c}),c}})}const n=Zn(()=>ai(t));$(e._zod,"propValues",()=>{const a=t.shape,c={};for(const u in a){const l=a[u]._zod;if(l.values){c[u]??(c[u]=new Set);for(const h of l.values)c[u].add(h)}}return c});const s=Nr,o=t.catchall;let i;e._zod.parse=(a,c)=>{i??(i=n.value);const u=a.value;if(!s(u))return a.issues.push({expected:"object",code:"invalid_type",input:u,inst:e}),a;a.value={};const l=[],h=i.shape;for(const p of i.keys){const v=h[p],g=v._zod.optout==="optional",y=v._zod.run({value:u[p],issues:[]},c);y instanceof Promise?l.push(y.then(_=>Gr(_,a,p,u,g))):Gr(y,a,p,u,g)}return o?ci(l,u,a,c,n.value,e):l.length?Promise.all(l).then(()=>a):a}}),zu=m("$ZodObjectJIT",(e,t)=>{ju.init(e,t);const r=e._zod.parse,n=Zn(()=>ai(t)),s=p=>{var k;const v=new nu(["shape","payload","ctx"]),g=n.value,y=x=>{const S=ds(x);return`shape[${S}]._zod.run({ value: input[${S}], issues: [] }, ctx)`};v.write("const input = payload.value;");const _=Object.create(null);let P=0;for(const x of g.keys)_[x]=`key_${P++}`;v.write("const newResult = {};");for(const x of g.keys){const S=_[x],Z=ds(x),F=p[x],W=((k=F==null?void 0:F._zod)==null?void 0:k.optout)==="optional";v.write(`const ${S} = ${y(x)};`),W?v.write(`
        if (${S}.issues.length) {
          if (${Z} in input) {
            payload.issues = payload.issues.concat(${S}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${Z}, ...iss.path] : [${Z}]
            })));
          }
        }
        
        if (${S}.value === undefined) {
          if (${Z} in input) {
            newResult[${Z}] = undefined;
          }
        } else {
          newResult[${Z}] = ${S}.value;
        }
        
      `):v.write(`
        if (${S}.issues.length) {
          payload.issues = payload.issues.concat(${S}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Z}, ...iss.path] : [${Z}]
          })));
        }
        
        if (${S}.value === undefined) {
          if (${Z} in input) {
            newResult[${Z}] = undefined;
          }
        } else {
          newResult[${Z}] = ${S}.value;
        }
        
      `)}v.write("payload.value = newResult;"),v.write("return payload;");const w=v.compile();return(x,S)=>w(p,x,S)};let o;const i=Nr,a=!Ho.jitless,u=a&&Ya.value,l=t.catchall;let h;e._zod.parse=(p,v)=>{h??(h=n.value);const g=p.value;return i(g)?a&&u&&(v==null?void 0:v.async)===!1&&v.jitless!==!0?(o||(o=s(t.shape)),p=o(p,v),l?ci([],g,p,v,h,e):p):r(p,v):(p.issues.push({expected:"object",code:"invalid_type",input:g,inst:e}),p)}});function fs(e,t,r,n){for(const o of e)if(o.issues.length===0)return t.value=o.value,t;const s=e.filter(o=>!dt(o));return s.length===1?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(o=>o.issues.map(i=>Ve(i,n,We())))}),t)}const Mu=m("$ZodUnion",(e,t)=>{N.init(e,t),$(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),$(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),$(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),$(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(o=>o._zod.pattern);return new RegExp(`^(${s.map(o=>Un(o.source)).join("|")})$`)}});const r=t.options.length===1,n=t.options[0]._zod.run;e._zod.parse=(s,o)=>{if(r)return n(s,o);let i=!1;const a=[];for(const c of t.options){const u=c._zod.run({value:s.value,issues:[]},o);if(u instanceof Promise)a.push(u),i=!0;else{if(u.issues.length===0)return u;a.push(u)}}return i?Promise.all(a).then(c=>fs(c,s,e,o)):fs(a,s,e,o)}}),Du=m("$ZodIntersection",(e,t)=>{N.init(e,t),e._zod.parse=(r,n)=>{const s=r.value,o=t.left._zod.run({value:s,issues:[]},n),i=t.right._zod.run({value:s,issues:[]},n);return o instanceof Promise||i instanceof Promise?Promise.all([o,i]).then(([c,u])=>ms(r,c,u)):ms(r,o,i)}});function Rn(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Kt(e)&&Kt(t)){const r=Object.keys(t),n=Object.keys(e).filter(o=>r.indexOf(o)!==-1),s={...e,...t};for(const o of n){const i=Rn(e[o],t[o]);if(!i.valid)return{valid:!1,mergeErrorPath:[o,...i.mergeErrorPath]};s[o]=i.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const s=e[n],o=t[n],i=Rn(s,o);if(!i.valid)return{valid:!1,mergeErrorPath:[n,...i.mergeErrorPath]};r.push(i.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function ms(e,t,r){const n=new Map;let s;for(const a of t.issues)if(a.code==="unrecognized_keys"){s??(s=a);for(const c of a.keys)n.has(c)||n.set(c,{}),n.get(c).l=!0}else e.issues.push(a);for(const a of r.issues)if(a.code==="unrecognized_keys")for(const c of a.keys)n.has(c)||n.set(c,{}),n.get(c).r=!0;else e.issues.push(a);const o=[...n].filter(([,a])=>a.l&&a.r).map(([a])=>a);if(o.length&&s&&e.issues.push({...s,keys:o}),dt(e))return e;const i=Rn(t.value,r.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const Nu=m("$ZodEnum",(e,t)=>{N.init(e,t);const r=Bo(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(s=>Xa.has(typeof s)).map(s=>typeof s=="string"?Wr(s):s.toString()).join("|")})$`),e._zod.parse=(s,o)=>{const i=s.value;return n.has(i)||s.issues.push({code:"invalid_value",values:r,input:i,inst:e}),s}}),Gu=m("$ZodTransform",(e,t)=>{N.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new qo(e.constructor.name);const s=t.transform(r.value,r);if(n.async)return(s instanceof Promise?s:Promise.resolve(s)).then(i=>(r.value=i,r));if(s instanceof Promise)throw new ht;return r.value=s,r}});function vs(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const ui=m("$ZodOptional",(e,t)=>{N.init(e,t),e._zod.optin="optional",e._zod.optout="optional",$(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),$(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Un(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>{if(t.innerType._zod.optin==="optional"){const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>vs(o,r.value)):vs(s,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,n)}}),Zu=m("$ZodExactOptional",(e,t)=>{ui.init(e,t),$(e._zod,"values",()=>t.innerType._zod.values),$(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(r,n)=>t.innerType._zod.run(r,n)}),Fu=m("$ZodNullable",(e,t)=>{N.init(e,t),$(e._zod,"optin",()=>t.innerType._zod.optin),$(e._zod,"optout",()=>t.innerType._zod.optout),$(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Un(r.source)}|null)$`):void 0}),$(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),Uu=m("$ZodDefault",(e,t)=>{N.init(e,t),e._zod.optin="optional",$(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);if(r.value===void 0)return r.value=t.defaultValue,r;const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>gs(o,t)):gs(s,t)}});function gs(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Lu=m("$ZodPrefault",(e,t)=>{N.init(e,t),e._zod.optin="optional",$(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),qu=m("$ZodNonOptional",(e,t)=>{N.init(e,t),$(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>_s(o,e)):_s(s,e)}});function _s(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Hu=m("$ZodCatch",(e,t)=>{N.init(e,t),$(e._zod,"optin",()=>t.innerType._zod.optin),$(e._zod,"optout",()=>t.innerType._zod.optout),$(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(o=>(r.value=o.value,o.issues.length&&(r.value=t.catchValue({...r,error:{issues:o.issues.map(i=>Ve(i,n,We()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=t.catchValue({...r,error:{issues:s.issues.map(o=>Ve(o,n,We()))},input:r.value}),r.issues=[]),r)}}),Bu=m("$ZodPipe",(e,t)=>{N.init(e,t),$(e._zod,"values",()=>t.in._zod.values),$(e._zod,"optin",()=>t.in._zod.optin),$(e._zod,"optout",()=>t.out._zod.optout),$(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{if(n.direction==="backward"){const o=t.out._zod.run(r,n);return o instanceof Promise?o.then(i=>cr(i,t.in,n)):cr(o,t.in,n)}const s=t.in._zod.run(r,n);return s instanceof Promise?s.then(o=>cr(o,t.out,n)):cr(s,t.out,n)}});function cr(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const Ju=m("$ZodReadonly",(e,t)=>{N.init(e,t),$(e._zod,"propValues",()=>t.innerType._zod.propValues),$(e._zod,"values",()=>t.innerType._zod.values),$(e._zod,"optin",()=>{var r,n;return(n=(r=t.innerType)==null?void 0:r._zod)==null?void 0:n.optin}),$(e._zod,"optout",()=>{var r,n;return(n=(r=t.innerType)==null?void 0:r._zod)==null?void 0:n.optout}),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(ys):ys(s)}});function ys(e){return e.value=Object.freeze(e.value),e}const Wu=m("$ZodCustom",(e,t)=>{ee.init(e,t),N.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,s=t.fn(n);if(s instanceof Promise)return s.then(o=>Ps(o,r,n,e));Ps(s,r,n,e)}});function Ps(e,t,r,n){if(!e){const s={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(s.params=n._zod.def.params),t.issues.push(Yt(s))}}var bs;class Vu{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){const n=r[0];return this._map.set(t,n),n&&typeof n=="object"&&"id"in n&&this._idmap.set(n.id,t),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const s={...n,...this._map.get(t)};return Object.keys(s).length?s:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function Ku(){return new Vu}(bs=globalThis).__zod_globalRegistry??(bs.__zod_globalRegistry=Ku());const Ht=globalThis.__zod_globalRegistry;function Yu(e,t){return new e({type:"string",...b(t)})}function Xu(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...b(t)})}function Ts(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...b(t)})}function Qu(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...b(t)})}function el(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...b(t)})}function tl(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...b(t)})}function rl(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...b(t)})}function nl(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...b(t)})}function sl(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...b(t)})}function ol(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...b(t)})}function il(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...b(t)})}function al(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...b(t)})}function cl(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...b(t)})}function ul(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...b(t)})}function ll(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...b(t)})}function dl(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...b(t)})}function hl(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...b(t)})}function pl(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...b(t)})}function fl(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...b(t)})}function ml(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...b(t)})}function vl(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...b(t)})}function gl(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...b(t)})}function _l(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...b(t)})}function yl(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...b(t)})}function Pl(e,t){return new e({type:"string",format:"date",check:"string_format",...b(t)})}function bl(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...b(t)})}function Tl(e,t){return new e({type:"string",format:"duration",check:"string_format",...b(t)})}function wl(e,t){return new e({type:"number",checks:[],...b(t)})}function El(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...b(t)})}function xl(e){return new e({type:"unknown"})}function Sl(e,t){return new e({type:"never",...b(t)})}function ws(e,t){return new ni({check:"less_than",...b(t),value:e,inclusive:!1})}function cn(e,t){return new ni({check:"less_than",...b(t),value:e,inclusive:!0})}function Es(e,t){return new si({check:"greater_than",...b(t),value:e,inclusive:!1})}function un(e,t){return new si({check:"greater_than",...b(t),value:e,inclusive:!0})}function xs(e,t){return new Hc({check:"multiple_of",...b(t),value:e})}function li(e,t){return new Jc({check:"max_length",...b(t),maximum:e})}function Zr(e,t){return new Wc({check:"min_length",...b(t),minimum:e})}function di(e,t){return new Vc({check:"length_equals",...b(t),length:e})}function Ol(e,t){return new Kc({check:"string_format",format:"regex",...b(t),pattern:e})}function kl(e){return new Yc({check:"string_format",format:"lowercase",...b(e)})}function Al(e){return new Xc({check:"string_format",format:"uppercase",...b(e)})}function $l(e,t){return new Qc({check:"string_format",format:"includes",...b(t),includes:e})}function Cl(e,t){return new eu({check:"string_format",format:"starts_with",...b(t),prefix:e})}function Rl(e,t){return new tu({check:"string_format",format:"ends_with",...b(t),suffix:e})}function bt(e){return new ru({check:"overwrite",tx:e})}function Il(e){return bt(t=>t.normalize(e))}function jl(){return bt(e=>e.trim())}function zl(){return bt(e=>e.toLowerCase())}function Ml(){return bt(e=>e.toUpperCase())}function Dl(){return bt(e=>Ka(e))}function Nl(e,t,r){return new e({type:"array",element:t,...b(r)})}function Gl(e,t,r){return new e({type:"custom",check:"custom",fn:t,...b(r)})}function Zl(e){const t=Fl(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(Yt(n,r.value,t._zod.def));else{const s=n;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),r.issues.push(Yt(s))}},e(r.value,r)));return t}function Fl(e,t){const r=new ee({check:"custom",...b(t)});return r._zod.check=e,r}function hi(e){let t=(e==null?void 0:e.target)??"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:(e==null?void 0:e.metadata)??Ht,target:t,unrepresentable:(e==null?void 0:e.unrepresentable)??"throw",override:(e==null?void 0:e.override)??(()=>{}),io:(e==null?void 0:e.io)??"output",counter:0,seen:new Map,cycles:(e==null?void 0:e.cycles)??"ref",reused:(e==null?void 0:e.reused)??"inline",external:(e==null?void 0:e.external)??void 0}}function B(e,t,r={path:[],schemaPath:[]}){var l,h;var n;const s=e._zod.def,o=t.seen.get(e);if(o)return o.count++,r.schemaPath.includes(e)&&(o.cycle=r.path),o.schema;const i={schema:{},count:1,cycle:void 0,path:r.path};t.seen.set(e,i);const a=(h=(l=e._zod).toJSONSchema)==null?void 0:h.call(l);if(a)i.schema=a;else{const p={...r,schemaPath:[...r.schemaPath,e],path:r.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,i.schema,p);else{const g=i.schema,y=t.processors[s.type];if(!y)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);y(e,t,g,p)}const v=e._zod.parent;v&&(i.ref||(i.ref=v),B(v,t,p),t.seen.get(v).isParent=!0)}const c=t.metadataRegistry.get(e);return c&&Object.assign(i.schema,c),t.io==="input"&&X(e)&&(delete i.schema.examples,delete i.schema.default),t.io==="input"&&i.schema._prefault&&((n=i.schema).default??(n.default=i.schema._prefault)),delete i.schema._prefault,t.seen.get(e).schema}function pi(e,t){var i,a,c,u;const r=e.seen.get(t);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const n=new Map;for(const l of e.seen.entries()){const h=(i=e.metadataRegistry.get(l[0]))==null?void 0:i.id;if(h){const p=n.get(h);if(p&&p!==l[0])throw new Error(`Duplicate schema id "${h}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);n.set(h,l[0])}}const s=l=>{var y;const h=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const _=(y=e.external.registry.get(l[0]))==null?void 0:y.id,P=e.external.uri??(k=>k);if(_)return{ref:P(_)};const w=l[1].defId??l[1].schema.id??`schema${e.counter++}`;return l[1].defId=w,{defId:w,ref:`${P("__shared")}#/${h}/${w}`}}if(l[1]===r)return{ref:"#"};const v=`#/${h}/`,g=l[1].schema.id??`__schema${e.counter++}`;return{defId:g,ref:v+g}},o=l=>{if(l[1].schema.$ref)return;const h=l[1],{ref:p,defId:v}=s(l);h.def={...h.schema},v&&(h.defId=v);const g=h.schema;for(const y in g)delete g[y];g.$ref=p};if(e.cycles==="throw")for(const l of e.seen.entries()){const h=l[1];if(h.cycle)throw new Error(`Cycle detected: #/${(a=h.cycle)==null?void 0:a.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of e.seen.entries()){const h=l[1];if(t===l[0]){o(l);continue}if(e.external){const v=(c=e.external.registry.get(l[0]))==null?void 0:c.id;if(t!==l[0]&&v){o(l);continue}}if((u=e.metadataRegistry.get(l[0]))==null?void 0:u.id){o(l);continue}if(h.cycle){o(l);continue}if(h.count>1&&e.reused==="ref"){o(l);continue}}}function fi(e,t){var i,a,c;const r=e.seen.get(t);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const n=u=>{const l=e.seen.get(u);if(l.ref===null)return;const h=l.def??l.schema,p={...h},v=l.ref;if(l.ref=null,v){n(v);const y=e.seen.get(v),_=y.schema;if(_.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(h.allOf=h.allOf??[],h.allOf.push(_)):Object.assign(h,_),Object.assign(h,p),u._zod.parent===v)for(const w in h)w==="$ref"||w==="allOf"||w in p||delete h[w];if(_.$ref&&y.def)for(const w in h)w==="$ref"||w==="allOf"||w in y.def&&JSON.stringify(h[w])===JSON.stringify(y.def[w])&&delete h[w]}const g=u._zod.parent;if(g&&g!==v){n(g);const y=e.seen.get(g);if(y!=null&&y.schema.$ref&&(h.$ref=y.schema.$ref,y.def))for(const _ in h)_==="$ref"||_==="allOf"||_ in y.def&&JSON.stringify(h[_])===JSON.stringify(y.def[_])&&delete h[_]}e.override({zodSchema:u,jsonSchema:h,path:l.path??[]})};for(const u of[...e.seen.entries()].reverse())n(u[0]);const s={};if(e.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":e.target,(i=e.external)!=null&&i.uri){const u=(a=e.external.registry.get(t))==null?void 0:a.id;if(!u)throw new Error("Schema is missing an `id` property");s.$id=e.external.uri(u)}Object.assign(s,r.def??r.schema);const o=((c=e.external)==null?void 0:c.defs)??{};for(const u of e.seen.entries()){const l=u[1];l.def&&l.defId&&(o[l.defId]=l.def)}e.external||Object.keys(o).length>0&&(e.target==="draft-2020-12"?s.$defs=o:s.definitions=o);try{const u=JSON.parse(JSON.stringify(s));return Object.defineProperty(u,"~standard",{value:{...t["~standard"],jsonSchema:{input:Fr(t,"input",e.processors),output:Fr(t,"output",e.processors)}},enumerable:!1,writable:!1}),u}catch{throw new Error("Error converting schema to JSON.")}}function X(e,t){const r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);const n=e._zod.def;if(n.type==="transform")return!0;if(n.type==="array")return X(n.element,r);if(n.type==="set")return X(n.valueType,r);if(n.type==="lazy")return X(n.getter(),r);if(n.type==="promise"||n.type==="optional"||n.type==="nonoptional"||n.type==="nullable"||n.type==="readonly"||n.type==="default"||n.type==="prefault")return X(n.innerType,r);if(n.type==="intersection")return X(n.left,r)||X(n.right,r);if(n.type==="record"||n.type==="map")return X(n.keyType,r)||X(n.valueType,r);if(n.type==="pipe")return X(n.in,r)||X(n.out,r);if(n.type==="object"){for(const s in n.shape)if(X(n.shape[s],r))return!0;return!1}if(n.type==="union"){for(const s of n.options)if(X(s,r))return!0;return!1}if(n.type==="tuple"){for(const s of n.items)if(X(s,r))return!0;return!!(n.rest&&X(n.rest,r))}return!1}const Ul=(e,t={})=>r=>{const n=hi({...r,processors:t});return B(e,n),pi(n,e),fi(n,e)},Fr=(e,t,r={})=>n=>{const{libraryOptions:s,target:o}=n??{},i=hi({...s??{},target:o,io:t,processors:r});return B(e,i),pi(i,e),fi(i,e)},Ll={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},ql=(e,t,r,n)=>{const s=r;s.type="string";const{minimum:o,maximum:i,format:a,patterns:c,contentEncoding:u}=e._zod.bag;if(typeof o=="number"&&(s.minLength=o),typeof i=="number"&&(s.maxLength=i),a&&(s.format=Ll[a]??a,s.format===""&&delete s.format,a==="time"&&delete s.format),u&&(s.contentEncoding=u),c&&c.size>0){const l=[...c];l.length===1?s.pattern=l[0].source:l.length>1&&(s.allOf=[...l.map(h=>({...t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0"?{type:"string"}:{},pattern:h.source}))])}},Hl=(e,t,r,n)=>{const s=r,{minimum:o,maximum:i,format:a,multipleOf:c,exclusiveMaximum:u,exclusiveMinimum:l}=e._zod.bag;typeof a=="string"&&a.includes("int")?s.type="integer":s.type="number",typeof l=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(s.minimum=l,s.exclusiveMinimum=!0):s.exclusiveMinimum=l),typeof o=="number"&&(s.minimum=o,typeof l=="number"&&t.target!=="draft-04"&&(l>=o?delete s.minimum:delete s.exclusiveMinimum)),typeof u=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(s.maximum=u,s.exclusiveMaximum=!0):s.exclusiveMaximum=u),typeof i=="number"&&(s.maximum=i,typeof u=="number"&&t.target!=="draft-04"&&(u<=i?delete s.maximum:delete s.exclusiveMaximum)),typeof c=="number"&&(s.multipleOf=c)},Bl=(e,t,r,n)=>{r.not={}},Jl=(e,t,r,n)=>{},Wl=(e,t,r,n)=>{const s=e._zod.def,o=Bo(s.entries);o.every(i=>typeof i=="number")&&(r.type="number"),o.every(i=>typeof i=="string")&&(r.type="string"),r.enum=o},Vl=(e,t,r,n)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},Kl=(e,t,r,n)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},Yl=(e,t,r,n)=>{const s=r,o=e._zod.def,{minimum:i,maximum:a}=e._zod.bag;typeof i=="number"&&(s.minItems=i),typeof a=="number"&&(s.maxItems=a),s.type="array",s.items=B(o.element,t,{...n,path:[...n.path,"items"]})},Xl=(e,t,r,n)=>{var u;const s=r,o=e._zod.def;s.type="object",s.properties={};const i=o.shape;for(const l in i)s.properties[l]=B(i[l],t,{...n,path:[...n.path,"properties",l]});const a=new Set(Object.keys(i)),c=new Set([...a].filter(l=>{const h=o.shape[l]._zod;return t.io==="input"?h.optin===void 0:h.optout===void 0}));c.size>0&&(s.required=Array.from(c)),((u=o.catchall)==null?void 0:u._zod.def.type)==="never"?s.additionalProperties=!1:o.catchall?o.catchall&&(s.additionalProperties=B(o.catchall,t,{...n,path:[...n.path,"additionalProperties"]})):t.io==="output"&&(s.additionalProperties=!1)},Ql=(e,t,r,n)=>{const s=e._zod.def,o=s.inclusive===!1,i=s.options.map((a,c)=>B(a,t,{...n,path:[...n.path,o?"oneOf":"anyOf",c]}));o?r.oneOf=i:r.anyOf=i},ed=(e,t,r,n)=>{const s=e._zod.def,o=B(s.left,t,{...n,path:[...n.path,"allOf",0]}),i=B(s.right,t,{...n,path:[...n.path,"allOf",1]}),a=u=>"allOf"in u&&Object.keys(u).length===1,c=[...a(o)?o.allOf:[o],...a(i)?i.allOf:[i]];r.allOf=c},td=(e,t,r,n)=>{const s=e._zod.def,o=B(s.innerType,t,n),i=t.seen.get(e);t.target==="openapi-3.0"?(i.ref=s.innerType,r.nullable=!0):r.anyOf=[o,{type:"null"}]},rd=(e,t,r,n)=>{const s=e._zod.def;B(s.innerType,t,n);const o=t.seen.get(e);o.ref=s.innerType},nd=(e,t,r,n)=>{const s=e._zod.def;B(s.innerType,t,n);const o=t.seen.get(e);o.ref=s.innerType,r.default=JSON.parse(JSON.stringify(s.defaultValue))},sd=(e,t,r,n)=>{const s=e._zod.def;B(s.innerType,t,n);const o=t.seen.get(e);o.ref=s.innerType,t.io==="input"&&(r._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},od=(e,t,r,n)=>{const s=e._zod.def;B(s.innerType,t,n);const o=t.seen.get(e);o.ref=s.innerType;let i;try{i=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}r.default=i},id=(e,t,r,n)=>{const s=e._zod.def,o=t.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;B(o,t,n);const i=t.seen.get(e);i.ref=o},ad=(e,t,r,n)=>{const s=e._zod.def;B(s.innerType,t,n);const o=t.seen.get(e);o.ref=s.innerType,r.readOnly=!0},mi=(e,t,r,n)=>{const s=e._zod.def;B(s.innerType,t,n);const o=t.seen.get(e);o.ref=s.innerType},cd=m("ZodISODateTime",(e,t)=>{vu.init(e,t),z.init(e,t)});function ud(e){return yl(cd,e)}const ld=m("ZodISODate",(e,t)=>{gu.init(e,t),z.init(e,t)});function dd(e){return Pl(ld,e)}const hd=m("ZodISOTime",(e,t)=>{_u.init(e,t),z.init(e,t)});function pd(e){return bl(hd,e)}const fd=m("ZodISODuration",(e,t)=>{yu.init(e,t),z.init(e,t)});function md(e){return Tl(fd,e)}const vd=(e,t)=>{Yo.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>uc(e,r)},flatten:{value:r=>cc(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,Cn,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,Cn,2)}},isEmpty:{get(){return e.issues.length===0}}})},ie=m("ZodError",vd,{Parent:Error}),gd=qn(ie),_d=Hn(ie),yd=Vr(ie),Pd=Kr(ie),bd=hc(ie),Td=pc(ie),wd=fc(ie),Ed=mc(ie),xd=vc(ie),Sd=gc(ie),Od=_c(ie),kd=yc(ie),G=m("ZodType",(e,t)=>(N.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:Fr(e,"input"),output:Fr(e,"output")}}),e.toJSONSchema=Ul(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(Ce(t,{checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),{parent:!0}),e.with=e.check,e.clone=(r,n)=>Re(e,r,n),e.brand=()=>e,e.register=((r,n)=>(r.add(e,n),e)),e.parse=(r,n)=>gd(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>yd(e,r,n),e.parseAsync=async(r,n)=>_d(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>Pd(e,r,n),e.spa=e.safeParseAsync,e.encode=(r,n)=>bd(e,r,n),e.decode=(r,n)=>Td(e,r,n),e.encodeAsync=async(r,n)=>wd(e,r,n),e.decodeAsync=async(r,n)=>Ed(e,r,n),e.safeEncode=(r,n)=>xd(e,r,n),e.safeDecode=(r,n)=>Sd(e,r,n),e.safeEncodeAsync=async(r,n)=>Od(e,r,n),e.safeDecodeAsync=async(r,n)=>kd(e,r,n),e.refine=(r,n)=>e.check(Ph(r,n)),e.superRefine=r=>e.check(bh(r)),e.overwrite=r=>e.check(bt(r)),e.optional=()=>As(e),e.exactOptional=()=>ah(e),e.nullable=()=>$s(e),e.nullish=()=>As($s(e)),e.nonoptional=r=>ph(e,r),e.array=()=>Xd(e),e.or=r=>th([e,r]),e.and=r=>nh(e,r),e.transform=r=>Cs(e,oh(r)),e.default=r=>lh(e,r),e.prefault=r=>hh(e,r),e.catch=r=>mh(e,r),e.pipe=r=>Cs(e,r),e.readonly=()=>_h(e),e.describe=r=>{const n=e.clone();return Ht.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){var r;return(r=Ht.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Ht.get(e);const n=e.clone();return Ht.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=r=>r(e),e)),vi=m("_ZodString",(e,t)=>{Bn.init(e,t),G.init(e,t),e._zod.processJSONSchema=(n,s,o)=>ql(e,n,s);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(Ol(...n)),e.includes=(...n)=>e.check($l(...n)),e.startsWith=(...n)=>e.check(Cl(...n)),e.endsWith=(...n)=>e.check(Rl(...n)),e.min=(...n)=>e.check(Zr(...n)),e.max=(...n)=>e.check(li(...n)),e.length=(...n)=>e.check(di(...n)),e.nonempty=(...n)=>e.check(Zr(1,...n)),e.lowercase=n=>e.check(kl(n)),e.uppercase=n=>e.check(Al(n)),e.trim=()=>e.check(jl()),e.normalize=(...n)=>e.check(Il(...n)),e.toLowerCase=()=>e.check(zl()),e.toUpperCase=()=>e.check(Ml()),e.slugify=()=>e.check(Dl())}),Ad=m("ZodString",(e,t)=>{Bn.init(e,t),vi.init(e,t),e.email=r=>e.check(Xu($d,r)),e.url=r=>e.check(nl(Cd,r)),e.jwt=r=>e.check(_l(Bd,r)),e.emoji=r=>e.check(sl(Rd,r)),e.guid=r=>e.check(Ts(Ss,r)),e.uuid=r=>e.check(Qu(ur,r)),e.uuidv4=r=>e.check(el(ur,r)),e.uuidv6=r=>e.check(tl(ur,r)),e.uuidv7=r=>e.check(rl(ur,r)),e.nanoid=r=>e.check(ol(Id,r)),e.guid=r=>e.check(Ts(Ss,r)),e.cuid=r=>e.check(il(jd,r)),e.cuid2=r=>e.check(al(zd,r)),e.ulid=r=>e.check(cl(Md,r)),e.base64=r=>e.check(ml(Ld,r)),e.base64url=r=>e.check(vl(qd,r)),e.xid=r=>e.check(ul(Dd,r)),e.ksuid=r=>e.check(ll(Nd,r)),e.ipv4=r=>e.check(dl(Gd,r)),e.ipv6=r=>e.check(hl(Zd,r)),e.cidrv4=r=>e.check(pl(Fd,r)),e.cidrv6=r=>e.check(fl(Ud,r)),e.e164=r=>e.check(gl(Hd,r)),e.datetime=r=>e.check(ud(r)),e.date=r=>e.check(dd(r)),e.time=r=>e.check(pd(r)),e.duration=r=>e.check(md(r))});function R(e){return Yu(Ad,e)}const z=m("ZodStringFormat",(e,t)=>{I.init(e,t),vi.init(e,t)}),$d=m("ZodEmail",(e,t)=>{au.init(e,t),z.init(e,t)}),Ss=m("ZodGUID",(e,t)=>{ou.init(e,t),z.init(e,t)}),ur=m("ZodUUID",(e,t)=>{iu.init(e,t),z.init(e,t)}),Cd=m("ZodURL",(e,t)=>{cu.init(e,t),z.init(e,t)}),Rd=m("ZodEmoji",(e,t)=>{uu.init(e,t),z.init(e,t)}),Id=m("ZodNanoID",(e,t)=>{lu.init(e,t),z.init(e,t)}),jd=m("ZodCUID",(e,t)=>{du.init(e,t),z.init(e,t)}),zd=m("ZodCUID2",(e,t)=>{hu.init(e,t),z.init(e,t)}),Md=m("ZodULID",(e,t)=>{pu.init(e,t),z.init(e,t)}),Dd=m("ZodXID",(e,t)=>{fu.init(e,t),z.init(e,t)}),Nd=m("ZodKSUID",(e,t)=>{mu.init(e,t),z.init(e,t)}),Gd=m("ZodIPv4",(e,t)=>{Pu.init(e,t),z.init(e,t)}),Zd=m("ZodIPv6",(e,t)=>{bu.init(e,t),z.init(e,t)}),Fd=m("ZodCIDRv4",(e,t)=>{Tu.init(e,t),z.init(e,t)}),Ud=m("ZodCIDRv6",(e,t)=>{wu.init(e,t),z.init(e,t)}),Ld=m("ZodBase64",(e,t)=>{Eu.init(e,t),z.init(e,t)}),qd=m("ZodBase64URL",(e,t)=>{Su.init(e,t),z.init(e,t)}),Hd=m("ZodE164",(e,t)=>{Ou.init(e,t),z.init(e,t)}),Bd=m("ZodJWT",(e,t)=>{Au.init(e,t),z.init(e,t)}),gi=m("ZodNumber",(e,t)=>{ii.init(e,t),G.init(e,t),e._zod.processJSONSchema=(n,s,o)=>Hl(e,n,s),e.gt=(n,s)=>e.check(Es(n,s)),e.gte=(n,s)=>e.check(un(n,s)),e.min=(n,s)=>e.check(un(n,s)),e.lt=(n,s)=>e.check(ws(n,s)),e.lte=(n,s)=>e.check(cn(n,s)),e.max=(n,s)=>e.check(cn(n,s)),e.int=n=>e.check(Os(n)),e.safe=n=>e.check(Os(n)),e.positive=n=>e.check(Es(0,n)),e.nonnegative=n=>e.check(un(0,n)),e.negative=n=>e.check(ws(0,n)),e.nonpositive=n=>e.check(cn(0,n)),e.multipleOf=(n,s)=>e.check(xs(n,s)),e.step=(n,s)=>e.check(xs(n,s)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function Ze(e){return wl(gi,e)}const Jd=m("ZodNumberFormat",(e,t)=>{$u.init(e,t),gi.init(e,t)});function Os(e){return El(Jd,e)}const Wd=m("ZodUnknown",(e,t)=>{Cu.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Jl()});function ks(){return xl(Wd)}const Vd=m("ZodNever",(e,t)=>{Ru.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Bl(e,r,n)});function Kd(e){return Sl(Vd,e)}const Yd=m("ZodArray",(e,t)=>{Iu.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Yl(e,r,n,s),e.element=t.element,e.min=(r,n)=>e.check(Zr(r,n)),e.nonempty=r=>e.check(Zr(1,r)),e.max=(r,n)=>e.check(li(r,n)),e.length=(r,n)=>e.check(di(r,n)),e.unwrap=()=>e.element});function Xd(e,t){return Nl(Yd,e,t)}const Qd=m("ZodObject",(e,t)=>{zu.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Xl(e,r,n,s),$(e,"shape",()=>t.shape),e.keyof=()=>Ur(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:ks()}),e.loose=()=>e.clone({...e._zod.def,catchall:ks()}),e.strict=()=>e.clone({...e._zod.def,catchall:Kd()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>nc(e,r),e.safeExtend=r=>sc(e,r),e.merge=r=>oc(e,r),e.pick=r=>tc(e,r),e.omit=r=>rc(e,r),e.partial=(...r)=>ic(_i,e,r[0]),e.required=(...r)=>ac(yi,e,r[0])});function Tt(e,t){const r={type:"object",shape:e??{},...b(t)};return new Qd(r)}const eh=m("ZodUnion",(e,t)=>{Mu.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Ql(e,r,n,s),e.options=t.options});function th(e,t){return new eh({type:"union",options:e,...b(t)})}const rh=m("ZodIntersection",(e,t)=>{Du.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>ed(e,r,n,s)});function nh(e,t){return new rh({type:"intersection",left:e,right:t})}const In=m("ZodEnum",(e,t)=>{Nu.init(e,t),G.init(e,t),e._zod.processJSONSchema=(n,s,o)=>Wl(e,n,s),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,s)=>{const o={};for(const i of n)if(r.has(i))o[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new In({...t,checks:[],...b(s),entries:o})},e.exclude=(n,s)=>{const o={...t.entries};for(const i of n)if(r.has(i))delete o[i];else throw new Error(`Key ${i} not found in enum`);return new In({...t,checks:[],...b(s),entries:o})}});function Ur(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new In({type:"enum",entries:r,...b(t)})}const sh=m("ZodTransform",(e,t)=>{Gu.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Kl(e,r),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new qo(e.constructor.name);r.addIssue=o=>{if(typeof o=="string")r.issues.push(Yt(o,r.value,t));else{const i=o;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=r.value),i.inst??(i.inst=e),r.issues.push(Yt(i))}};const s=t.transform(r.value,r);return s instanceof Promise?s.then(o=>(r.value=o,r)):(r.value=s,r)}});function oh(e){return new sh({type:"transform",transform:e})}const _i=m("ZodOptional",(e,t)=>{ui.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>mi(e,r,n,s),e.unwrap=()=>e._zod.def.innerType});function As(e){return new _i({type:"optional",innerType:e})}const ih=m("ZodExactOptional",(e,t)=>{Zu.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>mi(e,r,n,s),e.unwrap=()=>e._zod.def.innerType});function ah(e){return new ih({type:"optional",innerType:e})}const ch=m("ZodNullable",(e,t)=>{Fu.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>td(e,r,n,s),e.unwrap=()=>e._zod.def.innerType});function $s(e){return new ch({type:"nullable",innerType:e})}const uh=m("ZodDefault",(e,t)=>{Uu.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>nd(e,r,n,s),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function lh(e,t){return new uh({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Wo(t)}})}const dh=m("ZodPrefault",(e,t)=>{Lu.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>sd(e,r,n,s),e.unwrap=()=>e._zod.def.innerType});function hh(e,t){return new dh({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Wo(t)}})}const yi=m("ZodNonOptional",(e,t)=>{qu.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>rd(e,r,n,s),e.unwrap=()=>e._zod.def.innerType});function ph(e,t){return new yi({type:"nonoptional",innerType:e,...b(t)})}const fh=m("ZodCatch",(e,t)=>{Hu.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>od(e,r,n,s),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function mh(e,t){return new fh({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const vh=m("ZodPipe",(e,t)=>{Bu.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>id(e,r,n,s),e.in=t.in,e.out=t.out});function Cs(e,t){return new vh({type:"pipe",in:e,out:t})}const gh=m("ZodReadonly",(e,t)=>{Ju.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>ad(e,r,n,s),e.unwrap=()=>e._zod.def.innerType});function _h(e){return new gh({type:"readonly",innerType:e})}const yh=m("ZodCustom",(e,t)=>{Wu.init(e,t),G.init(e,t),e._zod.processJSONSchema=(r,n,s)=>Vl(e,r)});function Ph(e,t={}){return Gl(yh,e,t)}function bh(e){return Zl(e)}const Jn=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host","authenticator","stripeContext","additionalHeaders","streaming"];function Pi(e){return e&&typeof e=="object"&&Jn.some(t=>Object.prototype.hasOwnProperty.call(e,t))}function Xr(e,t){return wh(e)}function Rs(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/'/g,"%27").replace(/%5B/g,"[").replace(/%5D/g,"]")}function Th(e){return e instanceof Date?Math.floor(e.getTime()/1e3).toString():e===null?"":String(e)}function wh(e){const t=[];function r(n,s){if(s!==void 0){if(s===null||typeof s!="object"||s instanceof Date){t.push(Rs(n)+"="+Rs(Th(s)));return}if(Array.isArray(s)){for(let o=0;o<s.length;o++)s[o]!==void 0&&r(n+"["+o+"]",s[o]);return}for(const o of Object.keys(s))r(n+"["+o+"]",s[o])}}if(typeof e=="object"&&e!==null)for(const n of Object.keys(e))r(n,e[n]);return t.join("&")}const jn=(()=>{const e={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return t=>{const r=t.replace(/["\n\r\u2028\u2029]/g,n=>e[n]);return n=>r.replace(/\{([\s\S]+?)\}/g,(s,o)=>{const i=n[o];return Eh(i)?encodeURIComponent(i):""})}})();function Eh(e){return["number","string","boolean"].includes(typeof e)}function xh(e){const t=e.match(/\{\w+\}/g);return t?t.map(r=>r.replace(/[{}]/g,"")):[]}function Wn(e){if(!Array.isArray(e)||!e[0]||typeof e[0]!="object")return{};if(!Pi(e[0]))return e.shift();const t=Object.keys(e[0]),r=t.filter(n=>Jn.includes(n));return r.length>0&&r.length!==t.length&&Lr(`Options found in arguments (${r.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}function bi(e){const t={host:null,headers:{},settings:{},streaming:!1};if(e.length>0){const r=e[e.length-1];if(typeof r=="string")t.authenticator=zn(e.pop());else if(Pi(r)){const n=Object.assign({},e.pop()),s=Object.keys(n).filter(o=>!Jn.includes(o));if(s.length&&Lr(`Invalid options found (${s.join(", ")}); ignoring.`),n.apiKey&&(t.authenticator=zn(n.apiKey)),n.idempotencyKey&&(t.headers["Idempotency-Key"]=n.idempotencyKey),n.stripeAccount&&(t.headers["Stripe-Account"]=n.stripeAccount),n.stripeContext){if(t.headers["Stripe-Account"])throw new Error("Can't specify both stripeAccount and stripeContext.");t.headers["Stripe-Context"]=n.stripeContext}if(n.apiVersion&&(t.headers["Stripe-Version"]=n.apiVersion),Number.isInteger(n.maxNetworkRetries)&&(t.settings.maxNetworkRetries=n.maxNetworkRetries),Number.isInteger(n.timeout)&&(t.settings.timeout=n.timeout),n.host&&(t.host=n.host),n.authenticator){if(n.apiKey)throw new Error("Can't specify both apiKey and authenticator.");if(typeof n.authenticator!="function")throw new Error("The authenticator must be a function receiving a request as the first parameter.");t.authenticator=n.authenticator}n.additionalHeaders&&(t.headers=n.additionalHeaders),n.streaming&&(t.streaming=!0)}}return t}function Sh(e){const t=this,r=Object.prototype.hasOwnProperty.call(e,"constructor")?e.constructor:function(...n){t.apply(this,n)};return Object.assign(r,t),r.prototype=Object.create(t.prototype),Object.assign(r.prototype,e),r}function ln(e){if(typeof e!="object")throw new Error("Argument must be an object");return Object.keys(e).reduce((t,r)=>(e[r]!=null&&(t[r]=e[r]),t),{})}function Oh(e){return e&&typeof e=="object"?Object.keys(e).reduce((t,r)=>(t[kh(r)]=e[r],t),{}):e}function kh(e){return e.split("-").map(t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()).join("-")}function Vn(e,t){return t?e.then(r=>{setTimeout(()=>{t(null,r)},0)},r=>{setTimeout(()=>{t(r,null)},0)}):e}function Ah(e){return e==="OAuth"?"oauth":e[0].toLowerCase()+e.substring(1)}function Lr(e){return typeof process.emitWarning!="function"?console.warn(`Stripe: ${e}`):process.emitWarning(e,"Stripe")}function $h(e){const t=typeof e;return(t==="function"||t==="object")&&!!e}function Ch(e){const t={},r=(n,s)=>{Object.entries(n).forEach(([o,i])=>{const a=s?`${s}[${o}]`:o;if($h(i)){if(!(i instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(i,"data"))return r(i,a);t[a]=i}else t[a]=String(i)})};return r(e,null),t}function dn(e,t,r){if(!Number.isInteger(t)){if(r!==void 0)return r;throw new Error(`${e} must be an integer`)}return t}function Rh(){return typeof process>"u"?{}:{lang_version:process.version,platform:process.platform}}function zn(e){const t=r=>(r.headers.Authorization="Bearer "+e,Promise.resolve());return t._apiKey=e,t}function Ih(e,t){return this[e]instanceof Date?Math.floor(this[e].getTime()/1e3).toString():t}function jh(e){return JSON.stringify(e,Ih)}function Ti(e){return e&&e.startsWith("/v2")?"v2":"v1"}function Mn(e){return Array.isArray(e)?e.join(", "):String(e)}function zh(e){const t=Array.isArray(e)?e[0]:e;return Number(t)}function Mh(e){return Object.entries(e).map(([t,r])=>[t,Mn(r)])}class oe{getClientName(){throw new Error("getClientName not implemented.")}makeRequest(t,r,n,s,o,i,a,c){throw new Error("makeRequest not implemented.")}static makeTimeoutError(){const t=new TypeError(oe.TIMEOUT_ERROR_CODE);return t.code=oe.TIMEOUT_ERROR_CODE,t}}oe.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"];oe.TIMEOUT_ERROR_CODE="ETIMEDOUT";class wi{constructor(t,r){this._statusCode=t,this._headers=r}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw new Error("getRawResponse not implemented.")}toStream(t){throw new Error("toStream not implemented.")}toJSON(){throw new Error("toJSON not implemented.")}}class qr extends oe{constructor(t){if(super(),!t){if(!globalThis.fetch)throw new Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");t=globalThis.fetch}globalThis.AbortController?this._fetchFn=qr.makeFetchWithAbortTimeout(t):this._fetchFn=qr.makeFetchWithRaceTimeout(t)}static makeFetchWithRaceTimeout(t){return(r,n,s)=>{let o;const i=new Promise((c,u)=>{o=setTimeout(()=>{o=null,u(oe.makeTimeoutError())},s)}),a=t(r,n);return Promise.race([a,i]).finally(()=>{o&&clearTimeout(o)})}}static makeFetchWithAbortTimeout(t){return async(r,n,s)=>{const o=new AbortController;let i=setTimeout(()=>{i=null,o.abort(oe.makeTimeoutError())},s);try{return await t(r,Object.assign(Object.assign({},n),{signal:o.signal}))}catch(a){throw a.name==="AbortError"?oe.makeTimeoutError():a}finally{i&&clearTimeout(i)}}}getClientName(){return"fetch"}async makeRequest(t,r,n,s,o,i,a,c){const u=a==="http",l=new URL(n,`${u?"http":"https"}://${t}`);l.port=r;const h=s=="POST"||s=="PUT"||s=="PATCH",p=i||(h?"":void 0),v=await this._fetchFn(l.toString(),{method:s,headers:Mh(o),body:p},c);return new Kn(v)}}class Kn extends wi{constructor(t){super(t.status,Kn._transformHeadersToObject(t.headers)),this._res=t}getRawResponse(){return this._res}toStream(t){return t(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(t){const r={};for(const n of t){if(!Array.isArray(n)||n.length!=2)throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");r[n[0]]=n[1]}return r}}class Ei{computeHMACSignature(t,r){throw new Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(t,r){throw new Error("computeHMACSignatureAsync not implemented.")}computeSHA256Async(t){throw new Error("computeSHA256 not implemented.")}}class xi extends Error{}class Dh extends Ei{constructor(t){super(),this.subtleCrypto=t||crypto.subtle}computeHMACSignature(t,r){throw new xi("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(t,r){const n=new TextEncoder,s=await this.subtleCrypto.importKey("raw",n.encode(r),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),o=await this.subtleCrypto.sign("hmac",s,n.encode(t)),i=new Uint8Array(o),a=new Array(i.length);for(let c=0;c<i.length;c++)a[c]=Dn[i[c]];return a.join("")}async computeSHA256Async(t){return new Uint8Array(await this.subtleCrypto.digest("SHA-256",t))}}const Dn=new Array(256);for(let e=0;e<Dn.length;e++)Dn[e]=e.toString(16).padStart(2,"0");class Nh{constructor(){this._fetchFn=null,this._agent=null}getUname(){throw new Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=Math.random()*16|0;return(t==="x"?r:r&3|8).toString(16)})}secureCompare(t,r){if(t.length!==r.length)return!1;const n=t.length;let s=0;for(let o=0;o<n;++o)s|=t.charCodeAt(o)^r.charCodeAt(o);return s===0}createEmitter(){throw new Error("createEmitter not implemented.")}tryBufferData(t){throw new Error("tryBufferData not implemented.")}createNodeHttpClient(t){throw new Error("createNodeHttpClient not implemented.")}createFetchHttpClient(t){return new qr(t)}createDefaultHttpClient(){throw new Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw new Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(t){return new Dh(t)}createDefaultCryptoProvider(){throw new Error("createDefaultCryptoProvider not implemented.")}}class Gh extends Event{constructor(t,r){super(t),this.data=r}}class Zh{constructor(){this.eventTarget=new EventTarget,this.listenerMapping=new Map}on(t,r){const n=s=>{r(s.data)};return this.listenerMapping.set(r,n),this.eventTarget.addEventListener(t,n)}removeListener(t,r){const n=this.listenerMapping.get(r);return this.listenerMapping.delete(r),this.eventTarget.removeEventListener(t,n)}once(t,r){const n=s=>{r(s.data)};return this.listenerMapping.set(r,n),this.eventTarget.addEventListener(t,n,{once:!0})}emit(t,r){return this.eventTarget.dispatchEvent(new Gh(t,r))}}class Fh extends Nh{getUname(){return Promise.resolve(null)}createEmitter(){return new Zh}tryBufferData(t){if(t.file.data instanceof ReadableStream)throw new Error("Uploading a file as a stream is not supported in non-Node environments. Please open or upvote an issue at github.com/stripe/stripe-node if you use this, detailing your use-case.");return Promise.resolve(t)}createNodeHttpClient(){throw new Error("Stripe: `createNodeHttpClient()` is not available in non-Node environments. Please use `createFetchHttpClient()` instead.")}createDefaultHttpClient(){return super.createFetchHttpClient()}createNodeCryptoProvider(){throw new Error("Stripe: `createNodeCryptoProvider()` is not available in non-Node environments. Please use `createSubtleCryptoProvider()` instead.")}createDefaultCryptoProvider(){return this.createSubtleCryptoProvider()}}const Qr=e=>{switch(e.type){case"card_error":return new Oi(e);case"invalid_request_error":return new Yn(e);case"api_error":return new Xn(e);case"authentication_error":return new Qn(e);case"rate_limit_error":return new es(e);case"idempotency_error":return new $i(e);case"invalid_grant":return new Ci(e);default:return new Ri(e)}},Si=e=>{switch(e.type){case"temporary_session_expired":return new Ii(e)}switch(e.code){case"invalid_fields":return new Yn(e)}return Qr(e)};class Y extends Error{constructor(t={},r=null){var n;super(t.message),this.type=r||this.constructor.name,this.raw=t,this.rawType=t.type,this.code=t.code,this.doc_url=t.doc_url,this.param=t.param,this.detail=t.detail,this.headers=t.headers,this.requestId=t.requestId,this.statusCode=t.statusCode,this.message=(n=t.message)!==null&&n!==void 0?n:"",this.userMessage=t.user_message,this.charge=t.charge,this.decline_code=t.decline_code,this.payment_intent=t.payment_intent,this.payment_method=t.payment_method,this.payment_method_type=t.payment_method_type,this.setup_intent=t.setup_intent,this.source=t.source}}Y.generate=Qr;class Oi extends Y{constructor(t={}){super(t,"StripeCardError")}}class Yn extends Y{constructor(t={}){super(t,"StripeInvalidRequestError")}}class Xn extends Y{constructor(t={}){super(t,"StripeAPIError")}}class Qn extends Y{constructor(t={}){super(t,"StripeAuthenticationError")}}class ki extends Y{constructor(t={}){super(t,"StripePermissionError")}}class es extends Y{constructor(t={}){super(t,"StripeRateLimitError")}}class Ai extends Y{constructor(t={}){super(t,"StripeConnectionError")}}class Ee extends Y{constructor(t,r,n={}){super(n,"StripeSignatureVerificationError"),this.header=t,this.payload=r}}class $i extends Y{constructor(t={}){super(t,"StripeIdempotencyError")}}class Ci extends Y{constructor(t={}){super(t,"StripeInvalidGrantError")}}class Ri extends Y{constructor(t={}){super(t,"StripeUnknownError")}}class Ii extends Y{constructor(t={}){super(t,"TemporarySessionExpiredError")}}const Is=Object.freeze(Object.defineProperty({__proto__:null,StripeAPIError:Xn,StripeAuthenticationError:Qn,StripeCardError:Oi,StripeConnectionError:Ai,StripeError:Y,StripeIdempotencyError:$i,StripeInvalidGrantError:Ci,StripeInvalidRequestError:Yn,StripePermissionError:ki,StripeRateLimitError:es,StripeSignatureVerificationError:Ee,StripeUnknownError:Ri,TemporarySessionExpiredError:Ii,generateV1Error:Qr,generateV2Error:Si},Symbol.toStringTag,{value:"Module"})),Uh=60;class Wt{constructor(t,r){this._stripe=t,this._maxBufferedRequestMetric=r}_normalizeStripeContext(t,r){return t?t.toString()||null:(r==null?void 0:r.toString())||null}_addHeadersDirectlyToObject(t,r){t.requestId=r["request-id"],t.stripeAccount=t.stripeAccount||r["stripe-account"],t.apiVersion=t.apiVersion||r["stripe-version"],t.idempotencyKey=t.idempotencyKey||r["idempotency-key"]}_makeResponseEvent(t,r,n){const s=Date.now(),o=s-t.request_start_time;return ln({api_version:n["stripe-version"],account:n["stripe-account"],idempotency_key:n["idempotency-key"],method:t.method,path:t.path,status:r,request_id:this._getRequestId(n),elapsed:o,request_start_time:t.request_start_time,request_end_time:s})}_getRequestId(t){return t["request-id"]}_streamingResponseHandler(t,r,n){return s=>{const o=s.getHeaders(),i=()=>{const c=this._makeResponseEvent(t,s.getStatusCode(),o);this._stripe._emitter.emit("response",c),this._recordRequestMetrics(this._getRequestId(o),c.elapsed,r)},a=s.toStream(i);return this._addHeadersDirectlyToObject(a,o),n(null,a)}}_jsonResponseHandler(t,r,n,s){return o=>{const i=o.getHeaders(),a=this._getRequestId(i),c=o.getStatusCode(),u=this._makeResponseEvent(t,c,i);this._stripe._emitter.emit("response",u),o.toJSON().then(l=>{if(l.error){let h;throw typeof l.error=="string"&&(l.error={type:l.error,message:l.error_description}),l.error.headers=i,l.error.statusCode=c,l.error.requestId=a,c===401?h=new Qn(l.error):c===403?h=new ki(l.error):c===429?h=new es(l.error):r==="v2"?h=Si(l.error):h=Qr(l.error),h}return l},l=>{throw new Xn({message:"Invalid JSON received from the Stripe API",exception:l,requestId:i["request-id"]})}).then(l=>{this._recordRequestMetrics(a,u.elapsed,n);const h=o.getRawResponse();this._addHeadersDirectlyToObject(h,i),Object.defineProperty(l,"lastResponse",{enumerable:!1,writable:!1,value:h}),s(null,l)},l=>s(l,null))}}static _generateConnectionErrorMessage(t){return`An error occurred with our connection to Stripe.${t>0?` Request was retried ${t} times.`:""}`}static _shouldRetry(t,r,n,s){return s&&r===0&&oe.CONNECTION_CLOSED_ERROR_CODES.includes(s.code)?!0:r>=n?!1:t?t.getHeaders()["stripe-should-retry"]==="false"?!1:t.getHeaders()["stripe-should-retry"]==="true"||t.getStatusCode()===409||t.getStatusCode()>=500:!0}_getSleepTimeInMS(t,r=null){const n=this._stripe.getInitialNetworkRetryDelay(),s=this._stripe.getMaxNetworkRetryDelay();let o=Math.min(n*Math.pow(2,t-1),s);return o*=.5*(1+Math.random()),o=Math.max(n,o),Number.isInteger(r)&&r<=Uh&&(o=Math.max(o,r)),o*1e3}_getMaxNetworkRetries(t={}){return t.maxNetworkRetries!==void 0&&Number.isInteger(t.maxNetworkRetries)?t.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(t,r,n){const s=this._getMaxNetworkRetries(r),o=()=>`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`;if(n==="v2"){if(t==="POST"||t==="DELETE")return o()}else if(n==="v1"&&t==="POST"&&s>0)return o();return null}_makeHeaders({contentType:t,contentLength:r,apiVersion:n,clientUserAgent:s,method:o,userSuppliedHeaders:i,userSuppliedSettings:a,stripeAccount:c,stripeContext:u,apiMode:l}){const h={Accept:"application/json","Content-Type":t,"User-Agent":this._getUserAgentString(l),"X-Stripe-Client-User-Agent":s,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":n,"Stripe-Account":c,"Stripe-Context":u,"Idempotency-Key":this._defaultIdempotencyKey(o,a,l)},p=o=="POST"||o=="PUT"||o=="PATCH";return(p||r)&&(p||Lr(`${o} method had non-zero contentLength but no payload is expected for this verb`),h["Content-Length"]=r),Object.assign(ln(h),Oh(i))}_getUserAgentString(t){const r=this._stripe.getConstant("PACKAGE_VERSION"),n=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/${t} NodeBindings/${r} ${n}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){const t=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:t})}}_recordRequestMetrics(t,r,n){if(this._stripe.getTelemetryEnabled()&&t)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)Lr("Request metrics buffer is full, dropping telemetry message.");else{const s={request_id:t,request_duration_ms:r};n&&n.length>0&&(s.usage=n),this._stripe._prevRequestMetrics.push(s)}}_rawRequest(t,r,n,s,o){return new Promise((a,c)=>{let u;try{const g=t.toUpperCase();if(g!=="POST"&&n&&Object.keys(n).length!==0)throw new Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");const y=[].slice.call([n,s]),_=Wn(y),P=g==="POST"?Object.assign({},_):null,w=bi(y),k=w.headers,x=w.authenticator;u={requestMethod:g,requestPath:r,bodyData:P,queryData:{},authenticator:x,headers:k,host:w.host,streaming:!!w.streaming,settings:{},usage:o||["raw_request"]}}catch(g){c(g);return}function l(g,y){g?c(g):a(y)}const{headers:h,settings:p}=u,v=u.authenticator;this._request(u.requestMethod,u.host,r,u.bodyData,v,{headers:h,settings:p,streaming:u.streaming},u.usage,l)})}_getContentLength(t){return typeof t=="string"?new TextEncoder().encode(t).length:t.length}_request(t,r,n,s,o,i,a=[],c,u=null){var l;let h;o=(l=o??this._stripe._authenticator)!==null&&l!==void 0?l:null;const p=Ti(n),v=(_,P,w,k,x)=>setTimeout(_,this._getSleepTimeInMS(k,x),P,w,k+1),g=(_,P,w)=>{const k=i.settings&&i.settings.timeout&&Number.isInteger(i.settings.timeout)&&i.settings.timeout>=0?i.settings.timeout:this._stripe.getApiField("timeout"),x={host:r||this._stripe.getApiField("host"),port:this._stripe.getApiField("port"),path:n,method:t,headers:Object.assign({},P),body:h,protocol:this._stripe.getApiField("protocol")};o(x).then(()=>{const S=this._stripe.getApiField("httpClient").makeRequest(x.host,x.port,x.path,x.method,x.headers,x.body,x.protocol,k),Z=Date.now(),F=ln({api_version:_,account:Mn(P["Stripe-Account"]),idempotency_key:Mn(P["Idempotency-Key"]),method:t,path:n,request_start_time:Z}),W=w||0,V=this._getMaxNetworkRetries(i.settings||{});this._stripe._emitter.emit("request",F),S.then(re=>Wt._shouldRetry(re,W,V)?v(g,_,P,W,zh(re.getHeaders()["retry-after"])):i.streaming&&re.getStatusCode()<400?this._streamingResponseHandler(F,a,c)(re):this._jsonResponseHandler(F,p,a,c)(re)).catch(re=>{if(Wt._shouldRetry(null,W,V,re))return v(g,_,P,W,null);{const de=re.code&&re.code===oe.TIMEOUT_ERROR_CODE;return c(new Ai({message:de?`Request aborted due to timeout being reached (${k}ms)`:Wt._generateConnectionErrorMessage(W),detail:re}))}})}).catch(S=>{throw new Y({message:"Unable to authenticate the request",exception:S})})},y=(_,P)=>{if(_)return c(_);h=P,this._stripe.getClientUserAgent(w=>{var k,x,S;const Z=this._stripe.getApiField("version"),F=this._makeHeaders({contentType:p=="v2"?"application/json":"application/x-www-form-urlencoded",contentLength:this._getContentLength(P),apiVersion:Z,clientUserAgent:w,method:t,userSuppliedHeaders:(k=i.headers)!==null&&k!==void 0?k:null,userSuppliedSettings:(x=i.settings)!==null&&x!==void 0?x:{},stripeAccount:(S=i.stripeAccount)!==null&&S!==void 0?S:this._stripe.getApiField("stripeAccount"),stripeContext:this._normalizeStripeContext(i.stripeContext,this._stripe.getApiField("stripeContext")),apiMode:p});g(Z,F,0)})};if(u)u(t,s,i.headers,y);else{let _;p=="v2"?_=s?jh(s):"":_=Xr(s||{}),y(null,_)}}}class ji{constructor(t,r,n,s){this.index=0,this.pagePromise=t,this.promiseCache={currentPromise:null},this.requestArgs=r,this.spec=n,this.stripeResource=s}async iterate(t){if(!(t&&t.data&&typeof t.data.length=="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");const r=zi(this.requestArgs);if(this.index<t.data.length){const n=r?t.data.length-1-this.index:this.index,s=t.data[n];return this.index+=1,{value:s,done:!1}}else if(t.has_more){this.index=0,this.pagePromise=this.getNextPage(t);const n=await this.pagePromise;return this.iterate(n)}return{done:!0,value:void 0}}getNextPage(t){throw new Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;const t=(async()=>{const r=await this._next();return this.promiseCache.currentPromise=null,r})();return this.promiseCache.currentPromise=t,t}}class Lh extends ji{getNextPage(t){const r=zi(this.requestArgs),n=Kh(t,r);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[r?"ending_before":"starting_after"]:n})}}class qh extends ji{getNextPage(t){if(!t.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:t.next_page})}}class Hh{constructor(t,r,n,s){this.firstPagePromise=t,this.currentPageIterator=null,this.nextPageUrl=null,this.requestArgs=r,this.spec=n,this.stripeResource=s}async initFirstPage(){if(this.firstPagePromise){const t=await this.firstPagePromise;this.firstPagePromise=null,this.currentPageIterator=t.data[Symbol.iterator](),this.nextPageUrl=t.next_page_url||null}}async turnPage(){if(!this.nextPageUrl)return null;this.spec.fullPath=this.nextPageUrl;const t=await this.stripeResource._makeRequest([],this.spec,{});return this.nextPageUrl=t.next_page_url||null,this.currentPageIterator=t.data[Symbol.iterator](),this.currentPageIterator}async next(){if(await this.initFirstPage(),this.currentPageIterator){const n=this.currentPageIterator.next();if(!n.done)return{done:!1,value:n.value}}const t=await this.turnPage();if(!t)return{done:!0,value:void 0};const r=t.next();return r.done?{done:!0,value:void 0}:{done:!1,value:r.value}}}const Bh=(e,t,r,n)=>{const s=Ti(r.fullPath||r.path);return s!=="v2"&&r.methodType==="search"?hn(new qh(n,t,r,e)):s!=="v2"&&r.methodType==="list"?hn(new Lh(n,t,r,e)):s==="v2"&&r.methodType==="list"?hn(new Hh(n,t,r,e)):null},hn=e=>{const t=Yh((...s)=>e.next(...s)),r=Xh(t),n={autoPagingEach:t,autoPagingToArray:r,next:()=>e.next(),return:()=>({}),[Jh()]:()=>n};return n};function Jh(){return typeof Symbol<"u"&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"}function Wh(e){if(e.length<2)return null;const t=e[1];if(typeof t!="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof t}`);return t}function Vh(e){if(e.length===0)return;const t=e[0];if(typeof t!="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof t}`);if(t.length===2)return t;if(t.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${t}`);return function(n,s){const o=t(n);s(o)}}function Kh(e,t){const r=t?0:e.data.length-1,n=e.data[r],s=n&&n.id;if(!s)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return s}function Yh(e){return function(){const r=[].slice.call(arguments),n=Vh(r),s=Wh(r);if(r.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${r}`);const o=Qh(e,n);return Vn(o,s)}}function Xh(e){return function(r,n){const s=r&&r.limit;if(!s)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(s>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");const o=new Promise((i,a)=>{const c=[];e(u=>{if(c.push(u),c.length>=s)return!1}).then(()=>{i(c)}).catch(a)});return Vn(o,n)}}function Qh(e,t){return new Promise((r,n)=>{function s(o){if(o.done){r();return}const i=o.value;return new Promise(a=>{t(i,a)}).then(a=>a===!1?s({done:!0,value:void 0}):e().then(s))}e().then(s).catch(n)})}function zi(e){const t=[].slice.call(e);return!!Wn(t).ending_before}function ep(e){if(e.path!==void 0&&e.fullPath!==void 0)throw new Error(`Method spec specified both a 'path' (${e.path}) and a 'fullPath' (${e.fullPath}).`);return function(...t){const r=typeof t[t.length-1]=="function"&&t.pop();e.urlParams=xh(e.fullPath||this.createResourcePathWithSymbols(e.path||""));const n=Vn(this._makeRequest(t,e,{}),r);return Object.assign(n,Bh(this,t,e,n)),n}}d.extend=Sh;d.method=ep;d.MAX_BUFFERED_REQUEST_METRICS=100;function d(e,t){if(this._stripe=e,t)throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=jn(this.basePath||e.getApiField("basePath")),this.resourcePath=this.path,this.path=jn(this.path),this.initialize(...arguments)}d.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(e,t){const r=[this.basePath(t),this.path(t)];if(typeof e=="function"){const n=e(t);n&&r.push(n)}else r.push(e);return this._joinUrlParts(r)},createResourcePathWithSymbols(e){return e?`/${this._joinUrlParts([this.resourcePath,e])}`:`/${this.resourcePath}`},_joinUrlParts(e){return e.join("/").replace(/\/{2,}/g,"/")},_getRequestOpts(e,t,r){var n;const s=(t.method||"GET").toUpperCase(),o=t.usage||[],i=t.urlParams||[],a=t.encode||(F=>F),c=!!t.fullPath,u=jn(c?t.fullPath:t.path||""),l=c?t.fullPath:this.createResourcePathWithSymbols(t.path),h=[].slice.call(e),p=i.reduce((F,W)=>{const V=h.shift();if(typeof V!="string")throw new Error(`Stripe: Argument "${W}" must be a string, but got: ${V} (on API request to \`${s} ${l}\`)`);return F[W]=V,F},{}),v=Wn(h),g=a(Object.assign({},v,r)),y=bi(h),_=y.host||t.host,P=!!t.streaming||!!y.streaming;if(h.filter(F=>F!=null).length)throw new Error(`Stripe: Unknown arguments (${h}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${s} \`${l}\`)`);const w=c?u(p):this.createFullPath(u,p),k=Object.assign(y.headers,t.headers);t.validator&&t.validator(g,{headers:k});const x=t.method==="GET"||t.method==="DELETE";return{requestMethod:s,requestPath:w,bodyData:x?null:g,queryData:x?g:{},authenticator:(n=y.authenticator)!==null&&n!==void 0?n:null,headers:k,host:_??null,streaming:P,settings:y.settings,usage:o}},_makeRequest(e,t,r){return new Promise((n,s)=>{var o;let i;try{i=this._getRequestOpts(e,t,r)}catch(p){s(p);return}function a(p,v){p?s(p):n(t.transformResponseData?t.transformResponseData(v):v)}const c=Object.keys(i.queryData).length===0,u=[i.requestPath,c?"":"?",Xr(i.queryData)].join(""),{headers:l,settings:h}=i;this._stripe._requestSender._request(i.requestMethod,i.host,u,i.bodyData,i.authenticator,{headers:l,settings:h,streaming:i.streaming},i.usage,a,(o=this.requestDataProcessor)===null||o===void 0?void 0:o.bind(this))})}};class Fe{constructor(t=[]){this._segments=[...t]}get segments(){return[...this._segments]}push(t){if(!t)throw new Error("Segment cannot be null or undefined");return new Fe([...this._segments,t])}pop(){if(this._segments.length===0)throw new Error("Cannot pop from an empty context");return new Fe(this._segments.slice(0,-1))}toString(){return this._segments.join("/")}static parse(t){return t?new Fe(t.split("/")):new Fe([])}}function tp(e){const t={DEFAULT_TOLERANCE:300,signature:null,constructEvent(l,h,p,v,g,y){try{if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");this.signature.verifyHeader(l,h,p,v||t.DEFAULT_TOLERANCE,g,y)}catch(P){throw P instanceof xi&&(P.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),P}return l instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(l)):JSON.parse(l)},async constructEventAsync(l,h,p,v,g,y){if(!this.signature)throw new Error("ERR: missing signature helper, unable to verify");return await this.signature.verifyHeaderAsync(l,h,p,v||t.DEFAULT_TOLERANCE,g,y),l instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(l)):JSON.parse(l)},generateTestHeaderString:function(l){const h=u(l),p=h.signature||h.cryptoProvider.computeHMACSignature(h.payloadString,h.secret);return h.generateHeaderString(p)},generateTestHeaderStringAsync:async function(l){const h=u(l),p=h.signature||await h.cryptoProvider.computeHMACSignatureAsync(h.payloadString,h.secret);return h.generateHeaderString(p)}},r={EXPECTED_SCHEME:"v1",verifyHeader(l,h,p,v,g,y){const{decodedHeader:_,decodedPayload:P,details:w,suspectPayloadType:k}=s(l,h,this.EXPECTED_SCHEME),x=/\s/.test(p);g=g||c();const S=g.computeHMACSignature(n(P,w),p);return o(P,_,w,S,v,k,x,y),!0},async verifyHeaderAsync(l,h,p,v,g,y){const{decodedHeader:_,decodedPayload:P,details:w,suspectPayloadType:k}=s(l,h,this.EXPECTED_SCHEME),x=/\s/.test(p);g=g||c();const S=await g.computeHMACSignatureAsync(n(P,w),p);return o(P,_,w,S,v,k,x,y)}};function n(l,h){return`${h.timestamp}.${l}`}function s(l,h,p){if(!l)throw new Ee(h,l,{message:"No webhook payload was provided."});const v=typeof l!="string"&&!(l instanceof Uint8Array),g=new TextDecoder("utf8"),y=l instanceof Uint8Array?g.decode(l):l;if(Array.isArray(h))throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(h==null||h=="")throw new Ee(h,l,{message:"No stripe-signature header value was provided."});const _=h instanceof Uint8Array?g.decode(h):h,P=i(_,p);if(!P||P.timestamp===-1)throw new Ee(_,y,{message:"Unable to extract timestamp and signatures from header"});if(!P.signatures.length)throw new Ee(_,y,{message:"No signatures found with expected scheme"});return{decodedPayload:y,decodedHeader:_,details:P,suspectPayloadType:v}}function o(l,h,p,v,g,y,_,P){const w=!!p.signatures.filter(e.secureCompare.bind(e,v)).length,k=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature`,x=_?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!w)throw y?new Ee(h,l,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+k+`
`+x}):new Ee(h,l,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
 If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.
`+k+`
`+x});const S=Math.floor((typeof P=="number"?P:Date.now())/1e3)-p.timestamp;if(g>0&&S>g)throw new Ee(h,l,{message:"Timestamp outside the tolerance zone"});return!0}function i(l,h){return typeof l!="string"?null:l.split(",").reduce((p,v)=>{const g=v.split("=");return g[0]==="t"&&(p.timestamp=parseInt(g[1],10)),g[0]===h&&p.signatures.push(g[1]),p},{timestamp:-1,signatures:[]})}let a=null;function c(){return a||(a=e.createDefaultCryptoProvider()),a}function u(l){if(!l)throw new Y({message:"Options are required"});const h=Math.floor(l.timestamp)||Math.floor(Date.now()/1e3),p=l.scheme||r.EXPECTED_SCHEME,v=l.cryptoProvider||c(),g=`${h}.${l.payload}`,y=_=>`t=${h},${p}=${_}`;return Object.assign(Object.assign({},l),{timestamp:h,scheme:p,cryptoProvider:v,payloadString:g,generateHeaderString:y})}return t.signature=r,t}const Mi="2026-01-28.clover";function rp(e,t){for(const r in t){if(!Object.prototype.hasOwnProperty.call(t,r))continue;const n=r[0].toLowerCase()+r.substring(1),s=new t[r](e);this[n]=s}}function j(e,t){return function(r){return new rp(r,t)}}const np=d.method,sp=d.extend({create:np({method:"POST",fullPath:"/v2/core/account_links"})}),js=d.method,op=d.extend({create:js({method:"POST",fullPath:"/v2/core/account_tokens"}),retrieve:js({method:"GET",fullPath:"/v2/core/account_tokens/{id}"})}),Ie=d.method,ip=d.extend({retrieve:Ie({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:Ie({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:Ie({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:Ie({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:Ie({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:Ie({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:Ie({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})}),Et=d.method,ap=d.extend({create:Et({method:"POST",fullPath:"/v2/core/accounts/{account_id}/persons"}),retrieve:Et({method:"GET",fullPath:"/v2/core/accounts/{account_id}/persons/{id}"}),update:Et({method:"POST",fullPath:"/v2/core/accounts/{account_id}/persons/{id}"}),list:Et({method:"GET",fullPath:"/v2/core/accounts/{account_id}/persons",methodType:"list"}),del:Et({method:"DELETE",fullPath:"/v2/core/accounts/{account_id}/persons/{id}"})}),zs=d.method,cp=d.extend({create:zs({method:"POST",fullPath:"/v2/core/accounts/{account_id}/person_tokens"}),retrieve:zs({method:"GET",fullPath:"/v2/core/accounts/{account_id}/person_tokens/{id}"})}),xt=d.method,up=d.extend({constructor:function(...e){d.apply(this,e),this.persons=new ap(...e),this.personTokens=new cp(...e)},create:xt({method:"POST",fullPath:"/v2/core/accounts"}),retrieve:xt({method:"GET",fullPath:"/v2/core/accounts/{id}"}),update:xt({method:"POST",fullPath:"/v2/core/accounts/{id}"}),list:xt({method:"GET",fullPath:"/v2/core/accounts",methodType:"list"}),close:xt({method:"POST",fullPath:"/v2/core/accounts/{id}/close"})}),Ms=d.method,lp=d.extend({retrieve:Ms({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:Ms({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})}),Qe=d.method,dp=d.extend({create:Qe({method:"POST",fullPath:"/v1/billing/alerts"}),retrieve:Qe({method:"GET",fullPath:"/v1/billing/alerts/{id}"}),list:Qe({method:"GET",fullPath:"/v1/billing/alerts",methodType:"list"}),activate:Qe({method:"POST",fullPath:"/v1/billing/alerts/{id}/activate"}),archive:Qe({method:"POST",fullPath:"/v1/billing/alerts/{id}/archive"}),deactivate:Qe({method:"POST",fullPath:"/v1/billing/alerts/{id}/deactivate"})}),hp=d.method,pp=d.extend({find:hp({method:"GET",fullPath:"/v1/tax/associations/find"})}),St=d.method,fp=d.extend({retrieve:St({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:St({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:St({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:St({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:St({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})}),je=d.method,mp=d.extend({create:je({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:je({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:je({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),finalizeAmount:je({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"}),increment:je({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),respond:je({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"}),reverse:je({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})}),pn=d.method,vp=d.extend({create:pn({method:"POST",fullPath:"/v1/tax/calculations"}),retrieve:pn({method:"GET",fullPath:"/v1/tax/calculations/{calculation}"}),listLineItems:pn({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})}),lr=d.method,gp=d.extend({create:lr({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:lr({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:lr({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:lr({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})}),dr=d.method,_p=d.extend({create:dr({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:dr({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:dr({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:dr({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})}),Ot=d.method,yp=d.extend({deliverCard:Ot({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:Ot({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:Ot({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:Ot({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"}),submitCard:Ot({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/submit"})}),hr=d.method,Pp=d.extend({create:hr({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:hr({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:hr({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:hr({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})}),kt=d.method,bp=d.extend({create:kt({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:kt({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:kt({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:kt({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:kt({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})}),Tp=d.method,wp=d.extend({create:Tp({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})}),Ep=d.method,xp=d.extend({create:Ep({method:"POST",fullPath:"/v1/terminal/connection_tokens"})}),Sp=d.method,Op=d.extend({retrieve:Sp({method:"GET",fullPath:"/v1/billing/credit_balance_summary"})}),Ds=d.method,kp=d.extend({retrieve:Ds({method:"GET",fullPath:"/v1/billing/credit_balance_transactions/{id}"}),list:Ds({method:"GET",fullPath:"/v1/billing/credit_balance_transactions",methodType:"list"})}),et=d.method,Ap=d.extend({create:et({method:"POST",fullPath:"/v1/billing/credit_grants"}),retrieve:et({method:"GET",fullPath:"/v1/billing/credit_grants/{id}"}),update:et({method:"POST",fullPath:"/v1/billing/credit_grants/{id}"}),list:et({method:"GET",fullPath:"/v1/billing/credit_grants",methodType:"list"}),expire:et({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/expire"}),voidGrant:et({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/void"})}),fn=d.method,$p=d.extend({create:fn({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:fn({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:fn({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})}),Cp=d.method,Rp=d.extend({fundCashBalance:Cp({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})}),mn=d.method,Ip=d.extend({create:mn({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:mn({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:mn({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})}),At=d.method,jp=d.extend({create:At({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:At({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:At({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:At({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:At({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})}),Ns=d.method,zp=d.extend({retrieve:Ns({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:Ns({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})}),Pe=d.method,Mp=d.extend({create:Pe({method:"POST",fullPath:"/v2/core/event_destinations"}),retrieve:Pe({method:"GET",fullPath:"/v2/core/event_destinations/{id}"}),update:Pe({method:"POST",fullPath:"/v2/core/event_destinations/{id}"}),list:Pe({method:"GET",fullPath:"/v2/core/event_destinations",methodType:"list"}),del:Pe({method:"DELETE",fullPath:"/v2/core/event_destinations/{id}"}),disable:Pe({method:"POST",fullPath:"/v2/core/event_destinations/{id}/disable"}),enable:Pe({method:"POST",fullPath:"/v2/core/event_destinations/{id}/enable"}),ping:Pe({method:"POST",fullPath:"/v2/core/event_destinations/{id}/ping"})}),vn=d.method,Dp=d.extend({retrieve(...e){return vn({method:"GET",fullPath:"/v2/core/events/{id}",transformResponseData:r=>this.addFetchRelatedObjectIfNeeded(r)}).apply(this,e)},list(...e){return vn({method:"GET",fullPath:"/v2/core/events",methodType:"list",transformResponseData:r=>Object.assign(Object.assign({},r),{data:r.data.map(this.addFetchRelatedObjectIfNeeded.bind(this))})}).apply(this,e)},addFetchRelatedObjectIfNeeded(e){return!e.related_object||!e.related_object.url?e:Object.assign(Object.assign({},e),{fetchRelatedObject:()=>vn({method:"GET",fullPath:e.related_object.url}).apply(this,[{stripeContext:e.context}])})}}),pr=d.method,Np=d.extend({create:pr({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:pr({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:pr({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:pr({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})}),ze=d.method,Gp=d.extend({create:ze({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:ze({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:ze({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:ze({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),close:ze({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/close"}),retrieveFeatures:ze({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:ze({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})}),gn=d.method,Zp=d.extend({fail:gn({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:gn({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:gn({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})}),fr=d.method,Fp=d.extend({create:fr({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:fr({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:fr({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:fr({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})}),$t=d.method,Up=d.extend({create:$t({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:$t({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:$t({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:$t({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:$t({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})}),Lp=d.method,qp=d.extend({create:Lp({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})}),Hp=d.method,Bp=d.extend({create:Hp({method:"POST",fullPath:"/v2/billing/meter_event_adjustments"})}),Jp=d.method,Wp=d.extend({create:Jp({method:"POST",fullPath:"/v2/billing/meter_event_session"})}),Vp=d.method,Kp=d.extend({create:Vp({method:"POST",fullPath:"/v2/billing/meter_event_stream",host:"meter-events.stripe.com"})}),Yp=d.method,Xp=d.extend({create:Yp({method:"POST",fullPath:"/v1/billing/meter_events"})}),Qp=d.method,ef=d.extend({create:Qp({method:"POST",fullPath:"/v2/billing/meter_events"})}),Me=d.method,tf=d.extend({create:Me({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:Me({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:Me({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:Me({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:Me({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:Me({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:Me({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})}),rf=d.method,nf=d.extend({create:rf({method:"POST",fullPath:"/v1/terminal/onboarding_links"})}),Ct=d.method,sf=d.extend({create:Ct({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:Ct({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:Ct({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:Ct({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:Ct({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})}),mr=d.method,of=d.extend({update:mr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}"}),fail:mr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:mr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:mr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})}),vr=d.method,af=d.extend({create:vr({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:vr({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:vr({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:vr({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})}),gr=d.method,cf=d.extend({update:gr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"}),fail:gr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:gr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:gr({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})}),_r=d.method,uf=d.extend({create:_r({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:_r({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:_r({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:_r({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})}),lf=d.method,df=d.extend({create:lf({method:"POST",fullPath:"/v1/radar/payment_evaluations"})}),yr=d.method,hf=d.extend({create:yr({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:yr({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:yr({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:yr({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})}),_n=d.method,pf=d.extend({activate:_n({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:_n({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:_n({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})}),Gs=d.method,ff=d.extend({retrieve:Gs({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:Gs({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})}),Zs=d.method,mf=d.extend({retrieve:Zs({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:Zs({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})}),te=d.method,vf=d.extend({create:te({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:te({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:te({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:te({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:te({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:te({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),collectInputs:te({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_inputs"}),collectPaymentMethod:te({method:"POST",fullPath:"/v1/terminal/readers/{reader}/collect_payment_method"}),confirmPaymentIntent:te({method:"POST",fullPath:"/v1/terminal/readers/{reader}/confirm_payment_intent"}),processPaymentIntent:te({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:te({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:te({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:te({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})}),yn=d.method,gf=d.extend({presentPaymentMethod:yn({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"}),succeedInputCollection:yn({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/succeed_input_collection"}),timeoutInputCollection:yn({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/timeout_input_collection"})}),_f=d.method,yf=d.extend({create:_f({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})}),Fs=d.method,Pf=d.extend({retrieve:Fs({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:Fs({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})}),bf=d.method,Tf=d.extend({create:bf({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})}),Us=d.method,wf=d.extend({retrieve:Us({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:Us({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})}),Ef=d.method,xf=d.extend({expire:Ef({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})}),Pr=d.method,Sf=d.extend({create:Pr({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:Pr({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:Pr({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:Pr({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})}),Pn=d.method,Of=d.extend({create:Pn({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:Pn({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:Pn({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})}),Ls=d.method,kf=d.extend({retrieve:Ls({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:Ls({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})}),bn=d.method,Af=d.extend({create:bn({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:bn({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:bn({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})}),qs=d.method,$f=d.extend({retrieve:qs({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:qs({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})}),br=d.method,Cf=d.extend({create:br({method:"POST",fullPath:"/v1/apps/secrets"}),list:br({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:br({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:br({method:"GET",fullPath:"/v1/apps/secrets/find"})}),Rf=d.method,If=d.extend({create:Rf({method:"POST",fullPath:"/v1/billing_portal/sessions"})}),tt=d.method,jf=d.extend({create:tt({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:tt({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),update:tt({method:"POST",fullPath:"/v1/checkout/sessions/{session}"}),list:tt({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:tt({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:tt({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})}),Hs=d.method,zf=d.extend({create:Hs({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:Hs({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})}),Bs=d.method,Mf=d.extend({retrieve:Bs({method:"GET",fullPath:"/v1/tax/settings"}),update:Bs({method:"POST",fullPath:"/v1/tax/settings"})}),Js=d.method,Df=d.extend({retrieve:Js({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:Js({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})}),Rt=d.method,Nf=d.extend({create:Rt({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:Rt({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:Rt({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:Rt({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:Rt({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})}),Tn=d.method,Gf=d.extend({retrieve:Tn({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:Tn({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:Tn({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})}),Ws=d.method,Zf=d.extend({retrieve:Ws({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:Ws({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})}),Vs=d.method,Ff=d.extend({retrieve:Vs({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:Vs({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})}),wn=d.method,Uf=d.extend({retrieve:wn({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:wn({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:wn({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})}),Tr=d.method,Lf=d.extend({retrieve:Tr({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:Tr({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:Tr({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:Tr({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})}),En=d.method,qf=d.extend({createForceCapture:En({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:En({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:En({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})}),Ks=d.method,Hf=d.extend({retrieve:Ks({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:Ks({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})}),wr=d.method,Bf=d.extend({create:wr({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:wr({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:wr({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:wr({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})}),It=d.method,Jf=d.extend({create:It({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:It({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:It({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:It({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:It({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})}),Ys=d.method,Wf=d.extend({retrieve:Ys({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:Ys({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})}),rt=d.method,Vf=d.extend({create:rt({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:rt({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:rt({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:rt({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:rt({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:rt({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})}),M=d.method,Xs=d.extend({create:M({method:"POST",fullPath:"/v1/accounts"}),retrieve(e,...t){return typeof e=="string"?M({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[e,...t]):(e==null&&[].shift.apply([e,...t]),M({method:"GET",fullPath:"/v1/account"}).apply(this,[e,...t]))},update:M({method:"POST",fullPath:"/v1/accounts/{account}"}),list:M({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:M({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:M({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:M({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:M({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:M({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:M({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:M({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:M({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:M({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:M({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:M({method:"GET",fullPath:"/v1/account"}),retrieveCapability:M({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:M({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:M({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:M({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:M({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:M({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})}),Kf=d.method,Yf=d.extend({create:Kf({method:"POST",fullPath:"/v1/account_links"})}),Xf=d.method,Qf=d.extend({create:Xf({method:"POST",fullPath:"/v1/account_sessions"})}),Er=d.method,em=d.extend({create:Er({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:Er({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:Er({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:Er({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})}),nt=d.method,tm=d.extend({retrieve:nt({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:nt({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:nt({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:nt({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:nt({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:nt({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})}),rm=d.method,nm=d.extend({retrieve:rm({method:"GET",fullPath:"/v1/balance"})}),Qs=d.method,sm=d.extend({retrieve:Qs({method:"GET",fullPath:"/v1/balance_settings"}),update:Qs({method:"POST",fullPath:"/v1/balance_settings"})}),eo=d.method,om=d.extend({retrieve:eo({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:eo({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})}),st=d.method,im=d.extend({create:st({method:"POST",fullPath:"/v1/charges"}),retrieve:st({method:"GET",fullPath:"/v1/charges/{charge}"}),update:st({method:"POST",fullPath:"/v1/charges/{charge}"}),list:st({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:st({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:st({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})}),am=d.method,cm=d.extend({retrieve:am({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})}),to=d.method,um=d.extend({retrieve:to({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:to({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})}),jt=d.method,lm=d.extend({create:jt({method:"POST",fullPath:"/v1/coupons"}),retrieve:jt({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:jt({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:jt({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:jt({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})}),be=d.method,dm=d.extend({create:be({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:be({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:be({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:be({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:be({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:be({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:be({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:be({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})}),hm=d.method,pm=d.extend({create:hm({method:"POST",fullPath:"/v1/customer_sessions"})}),C=d.method,fm=d.extend({create:C({method:"POST",fullPath:"/v1/customers"}),retrieve:C({method:"GET",fullPath:"/v1/customers/{customer}"}),update:C({method:"POST",fullPath:"/v1/customers/{customer}"}),list:C({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:C({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:C({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:C({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:C({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:C({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:C({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:C({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:C({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:C({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:C({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:C({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:C({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:C({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:C({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:C({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:C({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:C({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:C({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:C({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:C({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:C({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:C({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:C({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:C({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})}),xr=d.method,mm=d.extend({retrieve:xr({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:xr({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:xr({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:xr({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})}),ro=d.method,vm=d.extend({create:ro({method:"POST",fullPath:"/v1/ephemeral_keys",validator:(e,t)=>{if(!t.headers||!t.headers["Stripe-Version"])throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")}}),del:ro({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})}),no=d.method,gm=d.extend({retrieve:no({method:"GET",fullPath:"/v1/events/{id}"}),list:no({method:"GET",fullPath:"/v1/events",methodType:"list"})}),so=d.method,_m=d.extend({retrieve:so({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:so({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})}),Sr=d.method,ym=d.extend({create:Sr({method:"POST",fullPath:"/v1/file_links"}),retrieve:Sr({method:"GET",fullPath:"/v1/file_links/{link}"}),update:Sr({method:"POST",fullPath:"/v1/file_links/{link}"}),list:Sr({method:"GET",fullPath:"/v1/file_links",methodType:"list"})}),Pm=(e,t,r)=>{const n=(Math.round(Math.random()*1e16)+Math.round(Math.random()*1e16)).toString();r["Content-Type"]=`multipart/form-data; boundary=${n}`;const s=new TextEncoder;let o=new Uint8Array(0);const i=s.encode(`\r
`);function a(l){const h=o,p=l instanceof Uint8Array?l:new Uint8Array(s.encode(l));o=new Uint8Array(h.length+p.length+2),o.set(h),o.set(p,h.length),o.set(i,o.length-2)}function c(l){return`"${l.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}const u=Ch(t);for(const l in u){if(!Object.prototype.hasOwnProperty.call(u,l))continue;const h=u[l];if(a(`--${n}`),Object.prototype.hasOwnProperty.call(h,"data")){const p=h;a(`Content-Disposition: form-data; name=${c(l)}; filename=${c(p.name||"blob")}`),a(`Content-Type: ${p.type||"application/octet-stream"}`),a(""),a(p.data)}else a(`Content-Disposition: form-data; name=${c(l)}`),a(""),a(h)}return a(`--${n}--`),o};function bm(e,t,r,n){if(t=t||{},e!=="POST")return n(null,Xr(t));this._stripe._platformFunctions.tryBufferData(t).then(s=>{const o=Pm(e,s,r);return n(null,o)}).catch(s=>n(s,null))}const xn=d.method,Tm=d.extend({create:xn({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:xn({method:"GET",fullPath:"/v1/files/{file}"}),list:xn({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:bm}),zt=d.method,wm=d.extend({create:zt({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:zt({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:zt({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:zt({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:zt({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})}),oo=d.method,Em=d.extend({retrieve:oo({method:"GET",fullPath:"/v1/invoice_payments/{invoice_payment}"}),list:oo({method:"GET",fullPath:"/v1/invoice_payments",methodType:"list"})}),Or=d.method,xm=d.extend({retrieve:Or({method:"GET",fullPath:"/v1/invoice_rendering_templates/{template}"}),list:Or({method:"GET",fullPath:"/v1/invoice_rendering_templates",methodType:"list"}),archive:Or({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/archive"}),unarchive:Or({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/unarchive"})}),q=d.method,Sm=d.extend({create:q({method:"POST",fullPath:"/v1/invoices"}),retrieve:q({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:q({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:q({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:q({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),addLines:q({method:"POST",fullPath:"/v1/invoices/{invoice}/add_lines"}),attachPayment:q({method:"POST",fullPath:"/v1/invoices/{invoice}/attach_payment"}),createPreview:q({method:"POST",fullPath:"/v1/invoices/create_preview"}),finalizeInvoice:q({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:q({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),markUncollectible:q({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:q({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),removeLines:q({method:"POST",fullPath:"/v1/invoices/{invoice}/remove_lines"}),search:q({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:q({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLines:q({method:"POST",fullPath:"/v1/invoices/{invoice}/update_lines"}),updateLineItem:q({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:q({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})}),Om=d.method,km=d.extend({retrieve:Om({method:"GET",fullPath:"/v1/mandates/{mandate}"})}),io=d.method,Sn="connect.stripe.com",Am=d.extend({basePath:"/",authorizeUrl(e,t){e=e||{},t=t||{};let r="oauth/authorize";return t.express&&(r=`express/${r}`),e.response_type||(e.response_type="code"),e.client_id||(e.client_id=this._stripe.getClientId()),e.scope||(e.scope="read_write"),`https://${Sn}/${r}?${Xr(e)}`},token:io({method:"POST",path:"oauth/token",host:Sn}),deauthorize(e,...t){return e.client_id||(e.client_id=this._stripe.getClientId()),io({method:"POST",path:"oauth/deauthorize",host:Sn}).apply(this,[e,...t])}}),ao=d.method,$m=d.extend({retrieve:ao({method:"GET",fullPath:"/v1/payment_attempt_records/{id}"}),list:ao({method:"GET",fullPath:"/v1/payment_attempt_records",methodType:"list"})}),ne=d.method,Cm=d.extend({create:ne({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:ne({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:ne({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:ne({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:ne({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:ne({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:ne({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:ne({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:ne({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),listAmountDetailsLineItems:ne({method:"GET",fullPath:"/v1/payment_intents/{intent}/amount_details_line_items",methodType:"list"}),search:ne({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:ne({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})}),Mt=d.method,Rm=d.extend({create:Mt({method:"POST",fullPath:"/v1/payment_links"}),retrieve:Mt({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:Mt({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:Mt({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:Mt({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})}),kr=d.method,Im=d.extend({create:kr({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:kr({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:kr({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:kr({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})}),Dt=d.method,jm=d.extend({create:Dt({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:Dt({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:Dt({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:Dt({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:Dt({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})}),ot=d.method,zm=d.extend({create:ot({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:ot({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:ot({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:ot({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:ot({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:ot({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})}),Te=d.method,Mm=d.extend({retrieve:Te({method:"GET",fullPath:"/v1/payment_records/{id}"}),reportPayment:Te({method:"POST",fullPath:"/v1/payment_records/report_payment"}),reportPaymentAttempt:Te({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt"}),reportPaymentAttemptCanceled:Te({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_canceled"}),reportPaymentAttemptFailed:Te({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_failed"}),reportPaymentAttemptGuaranteed:Te({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_guaranteed"}),reportPaymentAttemptInformational:Te({method:"POST",fullPath:"/v1/payment_records/{id}/report_payment_attempt_informational"}),reportRefund:Te({method:"POST",fullPath:"/v1/payment_records/{id}/report_refund"})}),it=d.method,Dm=d.extend({create:it({method:"POST",fullPath:"/v1/payouts"}),retrieve:it({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:it({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:it({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:it({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:it({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})}),Nt=d.method,Nm=d.extend({create:Nt({method:"POST",fullPath:"/v1/plans"}),retrieve:Nt({method:"GET",fullPath:"/v1/plans/{plan}"}),update:Nt({method:"POST",fullPath:"/v1/plans/{plan}"}),list:Nt({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:Nt({method:"DELETE",fullPath:"/v1/plans/{plan}"})}),Gt=d.method,Gm=d.extend({create:Gt({method:"POST",fullPath:"/v1/prices"}),retrieve:Gt({method:"GET",fullPath:"/v1/prices/{price}"}),update:Gt({method:"POST",fullPath:"/v1/prices/{price}"}),list:Gt({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:Gt({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})}),he=d.method,Zm=d.extend({create:he({method:"POST",fullPath:"/v1/products"}),retrieve:he({method:"GET",fullPath:"/v1/products/{id}"}),update:he({method:"POST",fullPath:"/v1/products/{id}"}),list:he({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:he({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:he({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:he({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:he({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:he({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:he({method:"GET",fullPath:"/v1/products/search",methodType:"search"})}),Ar=d.method,Fm=d.extend({create:Ar({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:Ar({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:Ar({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:Ar({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})}),pe=d.method,Um=d.extend({create:pe({method:"POST",fullPath:"/v1/quotes"}),retrieve:pe({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:pe({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:pe({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:pe({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:pe({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:pe({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:pe({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:pe({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:pe({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})}),Zt=d.method,Lm=d.extend({create:Zt({method:"POST",fullPath:"/v1/refunds"}),retrieve:Zt({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:Zt({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:Zt({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:Zt({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})}),On=d.method,qm=d.extend({retrieve:On({method:"GET",fullPath:"/v1/reviews/{review}"}),list:On({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:On({method:"POST",fullPath:"/v1/reviews/{review}/approve"})}),Hm=d.method,Bm=d.extend({list:Hm({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})}),De=d.method,Jm=d.extend({create:De({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:De({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:De({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:De({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:De({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:De({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:De({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})}),$r=d.method,Wm=d.extend({create:$r({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:$r({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:$r({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:$r({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})}),Ft=d.method,Vm=d.extend({create:Ft({method:"POST",fullPath:"/v1/sources"}),retrieve:Ft({method:"GET",fullPath:"/v1/sources/{source}"}),update:Ft({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:Ft({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:Ft({method:"POST",fullPath:"/v1/sources/{source}/verify"})}),Ut=d.method,Km=d.extend({create:Ut({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:Ut({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:Ut({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:Ut({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:Ut({method:"DELETE",fullPath:"/v1/subscription_items/{item}"})}),at=d.method,Ym=d.extend({create:at({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:at({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:at({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:at({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:at({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:at({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})}),fe=d.method,Xm=d.extend({create:fe({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:fe({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:fe({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:fe({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:fe({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:fe({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),migrate:fe({method:"POST",fullPath:"/v1/subscriptions/{subscription}/migrate"}),resume:fe({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:fe({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})}),co=d.method,Qm=d.extend({retrieve:co({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:co({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})}),Cr=d.method,ev=d.extend({create:Cr({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:Cr({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:Cr({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:Cr({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})}),Rr=d.method,tv=d.extend({create:Rr({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:Rr({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:Rr({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:Rr({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})}),uo=d.method,rv=d.extend({create:uo({method:"POST",fullPath:"/v1/tokens"}),retrieve:uo({method:"GET",fullPath:"/v1/tokens/{token}"})}),Lt=d.method,nv=d.extend({create:Lt({method:"POST",fullPath:"/v1/topups"}),retrieve:Lt({method:"GET",fullPath:"/v1/topups/{topup}"}),update:Lt({method:"POST",fullPath:"/v1/topups/{topup}"}),list:Lt({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:Lt({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})}),we=d.method,sv=d.extend({create:we({method:"POST",fullPath:"/v1/transfers"}),retrieve:we({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:we({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:we({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:we({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:we({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:we({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:we({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})}),qt=d.method,ov=d.extend({create:qt({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:qt({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:qt({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:qt({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:qt({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})}),iv=j("apps",{Secrets:Cf}),av=j("billing",{Alerts:dp,CreditBalanceSummary:Op,CreditBalanceTransactions:kp,CreditGrants:Ap,MeterEventAdjustments:qp,MeterEvents:Xp,Meters:tf}),cv=j("billingPortal",{Configurations:Pp,Sessions:If}),uv=j("checkout",{Sessions:jf}),lv=j("climate",{Orders:sf,Products:mf,Suppliers:Df}),dv=j("entitlements",{ActiveEntitlements:lp,Features:Np}),hv=j("financialConnections",{Accounts:ip,Sessions:zf,Transactions:Ff}),pv=j("forwarding",{Requests:Af}),fv=j("identity",{VerificationReports:Wf,VerificationSessions:Vf}),mv=j("issuing",{Authorizations:fp,Cardholders:gp,Cards:_p,Disputes:jp,PersonalizationDesigns:hf,PhysicalBundles:ff,Tokens:Gf,Transactions:Uf}),vv=j("radar",{EarlyFraudWarnings:zp,PaymentEvaluations:df,ValueListItems:Bf,ValueLists:Jf}),gv=j("reporting",{ReportRuns:Of,ReportTypes:kf}),_v=j("sigma",{ScheduledQueryRuns:$f}),yv=j("tax",{Associations:pp,Calculations:vp,Registrations:Sf,Settings:Mf,Transactions:Lf}),Pv=j("terminal",{Configurations:bp,ConnectionTokens:xp,Locations:Up,OnboardingLinks:nf,Readers:vf}),bv=j("testHelpers",{ConfirmationTokens:wp,Customers:Rp,Refunds:xf,TestClocks:Nf,Issuing:j("issuing",{Authorizations:mp,Cards:yp,PersonalizationDesigns:pf,Transactions:qf}),Terminal:j("terminal",{Readers:gf}),Treasury:j("treasury",{InboundTransfers:Zp,OutboundPayments:of,OutboundTransfers:cf,ReceivedCredits:yf,ReceivedDebits:Tf})}),Tv=j("treasury",{CreditReversals:$p,DebitReversals:Ip,FinancialAccounts:Gp,InboundTransfers:Fp,OutboundPayments:af,OutboundTransfers:uf,ReceivedCredits:Pf,ReceivedDebits:wf,TransactionEntries:Zf,Transactions:Hf}),wv=j("v2",{Billing:j("billing",{MeterEventAdjustments:Bp,MeterEventSession:Wp,MeterEventStream:Kp,MeterEvents:ef}),Core:j("core",{AccountLinks:sp,AccountTokens:op,Accounts:up,EventDestinations:Mp,Events:Dp})}),Ir=Object.freeze(Object.defineProperty({__proto__:null,Account:Xs,AccountLinks:Yf,AccountSessions:Qf,Accounts:Xs,ApplePayDomains:em,ApplicationFees:tm,Apps:iv,Balance:nm,BalanceSettings:sm,BalanceTransactions:om,Billing:av,BillingPortal:cv,Charges:im,Checkout:uv,Climate:lv,ConfirmationTokens:cm,CountrySpecs:um,Coupons:lm,CreditNotes:dm,CustomerSessions:pm,Customers:fm,Disputes:mm,Entitlements:dv,EphemeralKeys:vm,Events:gm,ExchangeRates:_m,FileLinks:ym,Files:Tm,FinancialConnections:hv,Forwarding:pv,Identity:fv,InvoiceItems:wm,InvoicePayments:Em,InvoiceRenderingTemplates:xm,Invoices:Sm,Issuing:mv,Mandates:km,OAuth:Am,PaymentAttemptRecords:$m,PaymentIntents:Cm,PaymentLinks:Rm,PaymentMethodConfigurations:Im,PaymentMethodDomains:jm,PaymentMethods:zm,PaymentRecords:Mm,Payouts:Dm,Plans:Nm,Prices:Gm,Products:Zm,PromotionCodes:Fm,Quotes:Um,Radar:vv,Refunds:Lm,Reporting:gv,Reviews:qm,SetupAttempts:Bm,SetupIntents:Jm,ShippingRates:Wm,Sigma:_v,Sources:Vm,SubscriptionItems:Km,SubscriptionSchedules:Ym,Subscriptions:Xm,Tax:yv,TaxCodes:Qm,TaxIds:ev,TaxRates:tv,Terminal:Pv,TestHelpers:bv,Tokens:rv,Topups:nv,Transfers:sv,Treasury:Tv,V2:wv,WebhookEndpoints:ov},Symbol.toStringTag,{value:"Module"})),lo="api.stripe.com",ho="443",po="/v1/",fo=Mi,mo=8e4,vo=5,go=.5,Ev=["name","version","url","partner_id"],_o=["authenticator","apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount","stripeContext"],xv=e=>new Wt(e,d.MAX_BUFFERED_REQUEST_METRICS);function Sv(e,t=xv){r.PACKAGE_VERSION="20.3.1",r.API_VERSION=Mi,r.USER_AGENT=Object.assign({bindings_version:r.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},Rh()),r.StripeResource=d,r.StripeContext=Fe,r.resources=Ir,r.HttpClient=oe,r.HttpClientResponse=wi,r.CryptoProvider=Ei,r.webhooks=tp(e);function r(n,s={}){if(!(this instanceof r))return new r(n,s);const o=this._getPropsFromConfig(s);this._platformFunctions=e,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=r.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);const i=o.httpAgent||null;this._api={host:o.host||lo,port:o.port||ho,protocol:o.protocol||"https",basePath:po,version:o.apiVersion||fo,timeout:dn("timeout",o.timeout,mo),maxNetworkRetries:dn("maxNetworkRetries",o.maxNetworkRetries,2),agent:i,httpClient:o.httpClient||(i?this._platformFunctions.createNodeHttpClient(i):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:o.stripeAccount||null,stripeContext:o.stripeContext||null};const a=o.typescript||!1;a!==r.USER_AGENT.typescript&&(r.USER_AGENT.typescript=a),o.appInfo&&this._setAppInfo(o.appInfo),this._prepResources(),this._setAuthenticator(n,o.authenticator),this.errors=Is,this.webhooks=r.webhooks,this._prevRequestMetrics=[],this._enableTelemetry=o.telemetry!==!1,this._requestSender=t(this),this.StripeResource=r.StripeResource}return r.errors=Is,r.createNodeHttpClient=e.createNodeHttpClient,r.createFetchHttpClient=e.createFetchHttpClient,r.createNodeCryptoProvider=e.createNodeCryptoProvider,r.createSubtleCryptoProvider=e.createSubtleCryptoProvider,r.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,rawRequest(n,s,o,i){return this._requestSender._rawRequest(n,s,o,i)},_setAuthenticator(n,s){if(n&&s)throw new Error("Can't specify both apiKey and authenticator");if(!n&&!s)throw new Error("Neither apiKey nor config.authenticator provided");this._authenticator=n?zn(n):s},_setAppInfo(n){if(n&&typeof n!="object")throw new Error("AppInfo must be an object.");if(n&&!n.name)throw new Error("AppInfo.name is required");n=n||{},this._appInfo=Ev.reduce((s,o)=>(typeof n[o]=="string"&&(s=s||{},s[o]=n[o]),s),{})},_setApiField(n,s){this._api[n]=s},getApiField(n){return this._api[n]},setClientId(n){this._clientId=n},getClientId(){return this._clientId},getConstant:n=>{switch(n){case"DEFAULT_HOST":return lo;case"DEFAULT_PORT":return ho;case"DEFAULT_BASE_PATH":return po;case"DEFAULT_API_VERSION":return fo;case"DEFAULT_TIMEOUT":return mo;case"MAX_NETWORK_RETRY_DELAY_SEC":return vo;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return go}return r[n]},getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(n,s,o){const i=dn(n,s,o);this._setApiField(n,i)},getMaxNetworkRetryDelay(){return vo},getInitialNetworkRetryDelay(){return go},getClientUserAgent(n){return this.getClientUserAgentSeeded(r.USER_AGENT,n)},getClientUserAgentSeeded(n,s){this._platformFunctions.getUname().then(o=>{var i;const a={};for(const u in n)Object.prototype.hasOwnProperty.call(n,u)&&(a[u]=encodeURIComponent((i=n[u])!==null&&i!==void 0?i:"null"));a.uname=encodeURIComponent(o||"UNKNOWN");const c=this.getApiField("httpClient");c&&(a.httplib=encodeURIComponent(c.getClientName())),this._appInfo&&(a.application=this._appInfo),s(JSON.stringify(a))})},getAppInfoAsString(){if(!this._appInfo)return"";let n=this._appInfo.name;return this._appInfo.version&&(n+=`/${this._appInfo.version}`),this._appInfo.url&&(n+=` (${this._appInfo.url})`),n},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(const n in Ir)Object.prototype.hasOwnProperty.call(Ir,n)&&(this[Ah(n)]=new Ir[n](this))},_getPropsFromConfig(n){if(!n)return{};const s=typeof n=="string";if(!(n===Object(n)&&!Array.isArray(n))&&!s)throw new Error("Config must either be an object or a string");if(s)return{apiVersion:n};if(Object.keys(n).filter(a=>!_o.includes(a)).length>0)throw new Error(`Config object may only contain the following: ${_o.join(", ")}`);return n},parseEventNotification(n,s,o,i,a,c){const u=this.webhooks.constructEvent(n,s,o,i,a,c);return u.context&&(u.context=Fe.parse(u.context)),u.fetchEvent=()=>this._requestSender._rawRequest("GET",`/v2/core/events/${u.id}`,void 0,{stripeContext:u.context},["fetch_event"]),u.fetchRelatedObject=()=>u.related_object?this._requestSender._rawRequest("GET",u.related_object.url,void 0,{stripeContext:u.context},["fetch_related_object"]):Promise.resolve(null),u}},r}const Ov=Sv(new Fh);function ts(e){return new Ov(e,{apiVersion:"2024-12-18.acacia"})}async function kv(e,t){return await e.checkout.sessions.create({payment_method_types:["card"],line_items:[{price_data:{currency:t.currency,unit_amount:t.price,product_data:{name:t.ticketName,description:`${t.eventTitle}`}},quantity:1}],mode:"payment",success_url:t.successUrl,cancel_url:t.cancelUrl,metadata:{event_id:t.eventId.toString(),ticket_id:t.ticketId.toString()},customer_email:void 0})}async function Av(e,t,r,n){return n.webhooks.constructEvent(e,t,r)}class D{constructor(t){this.db=t}async getArtists(){return(await this.db.prepare("SELECT * FROM artists ORDER BY name").all()).results}async getArtistBySlug(t){return await this.db.prepare("SELECT * FROM artists WHERE slug = ?").bind(t).first()}async createArtist(t){return(await this.db.prepare("INSERT INTO artists (name, slug, description, image_url) VALUES (?, ?, ?, ?)").bind(t.name,t.slug,t.description,t.image_url).run()).meta.last_row_id||0}async getEvents(t){let r="SELECT * FROM events WHERE 1=1";const n=[];return t!=null&&t.artistId&&(r+=" AND artist_id = ?",n.push(t.artistId)),t!=null&&t.status&&(r+=" AND status = ?",n.push(t.status)),r+=" ORDER BY start_time DESC",(await this.db.prepare(r).bind(...n).all()).results}async getEventBySlug(t){return await this.db.prepare("SELECT * FROM events WHERE slug = ?").bind(t).first()}async getEventById(t){return await this.db.prepare("SELECT * FROM events WHERE id = ?").bind(t).first()}async createEvent(t){return(await this.db.prepare(`INSERT INTO events (artist_id, title, slug, description, thumbnail_url, event_type, 
       stream_url, archive_url, cloudfront_key_pair_id, start_time, end_time, status) 
       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`).bind(t.artist_id,t.title,t.slug,t.description,t.thumbnail_url,t.event_type,t.stream_url,t.archive_url,t.cloudfront_key_pair_id,t.start_time,t.end_time,t.status).run()).meta.last_row_id||0}async updateEventStatus(t,r){await this.db.prepare("UPDATE events SET status = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?").bind(r,t).run()}async updateEvent(t,r){const n=[],s=[];if(r.title!==void 0&&(n.push("title = ?"),s.push(r.title)),r.description!==void 0&&(n.push("description = ?"),s.push(r.description)),r.stream_url!==void 0&&(n.push("stream_url = ?"),s.push(r.stream_url)),r.archive_url!==void 0&&(n.push("archive_url = ?"),s.push(r.archive_url)),r.thumbnail_url!==void 0&&(n.push("thumbnail_url = ?"),s.push(r.thumbnail_url)),r.cloudfront_key_pair_id!==void 0&&(n.push("cloudfront_key_pair_id = ?"),s.push(r.cloudfront_key_pair_id)),r.start_time!==void 0&&(n.push("start_time = ?"),s.push(r.start_time)),r.end_time!==void 0&&(n.push("end_time = ?"),s.push(r.end_time)),n.length===0)return;n.push("updated_at = CURRENT_TIMESTAMP"),s.push(t);const o=`UPDATE events SET ${n.join(", ")} WHERE id = ?`;await this.db.prepare(o).bind(...s).run()}async getTicketsByEventId(t){return(await this.db.prepare("SELECT * FROM tickets WHERE event_id = ? AND is_active = 1 ORDER BY price").bind(t).all()).results}async getTicketById(t){return await this.db.prepare("SELECT * FROM tickets WHERE id = ?").bind(t).first()}async createTicket(t){return(await this.db.prepare(`INSERT INTO tickets (event_id, name, description, price, currency, stripe_product_id, 
       stripe_price_id, stock, sale_start, sale_end, is_active) 
       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`).bind(t.event_id,t.name,t.description,t.price,t.currency,t.stripe_product_id,t.stripe_price_id,t.stock,t.sale_start,t.sale_end,t.is_active).run()).meta.last_row_id||0}async incrementTicketSoldCount(t){await this.db.prepare("UPDATE tickets SET sold_count = sold_count + 1 WHERE id = ?").bind(t).run()}async createPurchase(t){return(await this.db.prepare(`INSERT INTO purchases (event_id, ticket_id, stripe_customer_id, stripe_checkout_session_id, 
       stripe_payment_intent_id, customer_email, customer_name, amount, currency, status, 
       access_token, access_expires_at) 
       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`).bind(t.event_id,t.ticket_id,t.stripe_customer_id,t.stripe_checkout_session_id,t.stripe_payment_intent_id,t.customer_email,t.customer_name,t.amount,t.currency,t.status,t.access_token,t.access_expires_at).run()).meta.last_row_id||0}async getPurchaseByCheckoutSession(t){return await this.db.prepare("SELECT * FROM purchases WHERE stripe_checkout_session_id = ?").bind(t).first()}async getPurchaseByAccessToken(t){return await this.db.prepare("SELECT * FROM purchases WHERE access_token = ? AND status = ?").bind(t,"completed").first()}async getPurchasesByCustomer(t){return(await this.db.prepare("SELECT * FROM purchases WHERE stripe_customer_id = ? ORDER BY purchased_at DESC").bind(t).all()).results}async updatePurchaseStatus(t,r){await this.db.prepare("UPDATE purchases SET status = ? WHERE stripe_checkout_session_id = ?").bind(r,t).run()}async updatePurchaseAccessToken(t,r,n){await this.db.prepare("UPDATE purchases SET access_token = ?, access_expires_at = ? WHERE stripe_checkout_session_id = ?").bind(r,n,t).run()}}var Di=e=>Gi(e.replace(/_|-/g,t=>({_:"/","-":"+"})[t]??t)),Ni=e=>$v(e).replace(/\/|\+/g,t=>({"/":"_","+":"-"})[t]??t),$v=e=>{let t="";const r=new Uint8Array(e);for(let n=0,s=r.length;n<s;n++)t+=String.fromCharCode(r[n]);return btoa(t)},Gi=e=>{const t=atob(e),r=new Uint8Array(new ArrayBuffer(t.length)),n=t.length/2;for(let s=0,o=t.length-1;s<=n;s++,o--)r[s]=t.charCodeAt(s),r[o]=t.charCodeAt(o);return r},Vt=(e=>(e.HS256="HS256",e.HS384="HS384",e.HS512="HS512",e.RS256="RS256",e.RS384="RS384",e.RS512="RS512",e.PS256="PS256",e.PS384="PS384",e.PS512="PS512",e.ES256="ES256",e.ES384="ES384",e.ES512="ES512",e.EdDSA="EdDSA",e))(Vt||{}),Cv={deno:"Deno",bun:"Bun",workerd:"Cloudflare-Workers",node:"Node.js"},Rv=()=>{var r,n;const e=globalThis;if(typeof navigator<"u"&&typeof navigator.userAgent=="string"){for(const[s,o]of Object.entries(Cv))if(Iv(o))return s}return typeof(e==null?void 0:e.EdgeRuntime)=="string"?"edge-light":(e==null?void 0:e.fastly)!==void 0?"fastly":((n=(r=e==null?void 0:e.process)==null?void 0:r.release)==null?void 0:n.name)==="node"?"node":"other"},Iv=e=>navigator.userAgent.startsWith(e),jv=class extends Error{constructor(e){super(`${e} is not an implemented algorithm`),this.name="JwtAlgorithmNotImplemented"}},yo=class extends Error{constructor(){super('JWT verification requires "alg" option to be specified'),this.name="JwtAlgorithmRequired"}},zv=class extends Error{constructor(e,t){super(`JWT algorithm mismatch: expected "${e}", got "${t}"`),this.name="JwtAlgorithmMismatch"}},Zi=class extends Error{constructor(e){super(`invalid JWT token: ${e}`),this.name="JwtTokenInvalid"}},Mv=class extends Error{constructor(e){super(`token (${e}) is being used before it's valid`),this.name="JwtTokenNotBefore"}},Dv=class extends Error{constructor(e){super(`token (${e}) expired`),this.name="JwtTokenExpired"}},Nv=class extends Error{constructor(e,t){super(`Invalid "iat" claim, must be a valid number lower than "${e}" (iat: "${t}")`),this.name="JwtTokenIssuedAt"}},kn=class extends Error{constructor(e,t){super(`expected issuer "${e}", got ${t?`"${t}"`:"none"} `),this.name="JwtTokenIssuer"}},Gv=class extends Error{constructor(e){super(`jwt header is invalid: ${JSON.stringify(e)}`),this.name="JwtHeaderInvalid"}},Zv=class extends Error{constructor(e){super(`token(${e}) signature mismatched`),this.name="JwtTokenSignatureMismatched"}},Fv=class extends Error{constructor(e){super(`required "aud" in jwt payload: ${JSON.stringify(e)}`),this.name="JwtPayloadRequiresAud"}},Uv=class extends Error{constructor(e,t){super(`expected audience "${Array.isArray(e)?e.join(", "):e}", got "${t}"`),this.name="JwtTokenAudience"}},Xt=(e=>(e.Encrypt="encrypt",e.Decrypt="decrypt",e.Sign="sign",e.Verify="verify",e.DeriveKey="deriveKey",e.DeriveBits="deriveBits",e.WrapKey="wrapKey",e.UnwrapKey="unwrapKey",e))(Xt||{}),or=new TextEncoder,Lv=new TextDecoder;async function qv(e,t,r){const n=Fi(t),s=await Bv(e,n);return await crypto.subtle.sign(n,s,r)}async function Hv(e,t,r,n){const s=Fi(t),o=await Jv(e,s);return await crypto.subtle.verify(s,o,r,n)}function Nn(e){return Gi(e.replace(/-+(BEGIN|END).*/g,"").replace(/\s/g,""))}async function Bv(e,t){if(!crypto.subtle||!crypto.subtle.importKey)throw new Error("`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.");if(Ui(e)){if(e.type!=="private"&&e.type!=="secret")throw new Error(`unexpected key type: CryptoKey.type is ${e.type}, expected private or secret`);return e}const r=[Xt.Sign];return typeof e=="object"?await crypto.subtle.importKey("jwk",e,t,!1,r):e.includes("PRIVATE")?await crypto.subtle.importKey("pkcs8",Nn(e),t,!1,r):await crypto.subtle.importKey("raw",or.encode(e),t,!1,r)}async function Jv(e,t){if(!crypto.subtle||!crypto.subtle.importKey)throw new Error("`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.");if(Ui(e)){if(e.type==="public"||e.type==="secret")return e;e=await Po(e)}if(typeof e=="string"&&e.includes("PRIVATE")){const n=await crypto.subtle.importKey("pkcs8",Nn(e),t,!0,[Xt.Sign]);e=await Po(n)}const r=[Xt.Verify];return typeof e=="object"?await crypto.subtle.importKey("jwk",e,t,!1,r):e.includes("PUBLIC")?await crypto.subtle.importKey("spki",Nn(e),t,!1,r):await crypto.subtle.importKey("raw",or.encode(e),t,!1,r)}async function Po(e){if(e.type!=="private")throw new Error(`unexpected key type: ${e.type}`);if(!e.extractable)throw new Error("unexpected private key is unextractable");const t=await crypto.subtle.exportKey("jwk",e),{kty:r}=t,{alg:n,e:s,n:o}=t,{crv:i,x:a,y:c}=t;return{kty:r,alg:n,e:s,n:o,crv:i,x:a,y:c,key_ops:[Xt.Verify]}}function Fi(e){switch(e){case"HS256":return{name:"HMAC",hash:{name:"SHA-256"}};case"HS384":return{name:"HMAC",hash:{name:"SHA-384"}};case"HS512":return{name:"HMAC",hash:{name:"SHA-512"}};case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"RS384":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"RS512":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"PS256":return{name:"RSA-PSS",hash:{name:"SHA-256"},saltLength:32};case"PS384":return{name:"RSA-PSS",hash:{name:"SHA-384"},saltLength:48};case"PS512":return{name:"RSA-PSS",hash:{name:"SHA-512"},saltLength:64};case"ES256":return{name:"ECDSA",hash:{name:"SHA-256"},namedCurve:"P-256"};case"ES384":return{name:"ECDSA",hash:{name:"SHA-384"},namedCurve:"P-384"};case"ES512":return{name:"ECDSA",hash:{name:"SHA-512"},namedCurve:"P-521"};case"EdDSA":return{name:"Ed25519",namedCurve:"Ed25519"};default:throw new jv(e)}}function Ui(e){return Rv()==="node"&&crypto.webcrypto?e instanceof crypto.webcrypto.CryptoKey:e instanceof CryptoKey}var An=e=>Ni(or.encode(JSON.stringify(e)).buffer).replace(/=/g,""),Wv=e=>Ni(e).replace(/=/g,""),bo=e=>JSON.parse(Lv.decode(Di(e)));function Vv(e){if(typeof e=="object"&&e!==null){const t=e;return"alg"in t&&Object.values(Vt).includes(t.alg)&&(!("typ"in t)||t.typ==="JWT")}return!1}var Kv=async(e,t,r="HS256")=>{const n=An(e);let s;typeof t=="object"&&"alg"in t?(r=t.alg,s=An({alg:r,typ:"JWT",kid:t.kid})):s=An({alg:r,typ:"JWT"});const o=`${s}.${n}`,i=await qv(t,r,or.encode(o)),a=Wv(i);return`${o}.${a}`},Yv=async(e,t,r)=>{if(!r)throw new yo;const{alg:n,iss:s,nbf:o=!0,exp:i=!0,iat:a=!0,aud:c}=typeof r=="string"?{alg:r}:r;if(!n)throw new yo;const u=e.split(".");if(u.length!==3)throw new Zi(e);const{header:l,payload:h}=Xv(e);if(!Vv(l))throw new Gv(l);if(l.alg!==n)throw new zv(n,l.alg);const p=Date.now()/1e3|0;if(o&&h.nbf&&h.nbf>p)throw new Mv(e);if(i&&h.exp&&h.exp<=p)throw new Dv(e);if(a&&h.iat&&p<h.iat)throw new Nv(p,h.iat);if(s){if(!h.iss)throw new kn(s,null);if(typeof s=="string"&&h.iss!==s)throw new kn(s,h.iss);if(s instanceof RegExp&&!s.test(h.iss))throw new kn(s,h.iss)}if(c){if(!h.aud)throw new Fv(h);if(!(Array.isArray(h.aud)?h.aud:[h.aud]).some(P=>c instanceof RegExp?c.test(P):typeof c=="string"?P===c:Array.isArray(c)&&c.includes(P)))throw new Uv(c,h.aud)}const v=e.substring(0,e.lastIndexOf("."));if(!await Hv(t,n,Di(u[2]),or.encode(v)))throw new Zv(e);return h};Vt.HS256,Vt.HS384,Vt.HS512;var Xv=e=>{try{const[t,r]=e.split("."),n=bo(t),s=bo(r);return{header:n,payload:s}}catch{throw new Zi(e)}},Li={sign:Kv,verify:Yv},Qv=Li.verify,eg=Li.sign;async function tg(e,t,r=86400*30){const n=Math.floor(Date.now()/1e3)+r,s={...e,exp:n};return await eg(s,t)}async function rg(e,t){try{return await Qv(e,t)}catch(r){return console.error("Token verification failed:",r),null}}const en=new Ke,ng=Tt({ticketId:Ze(),eventId:Ze()});en.post("/checkout",Pt("json",ng),async e=>{try{const{ticketId:t,eventId:r}=e.req.valid("json"),n=ts(e.env.STRIPE_SECRET_KEY),s=new D(e.env.DB),o=await s.getTicketById(t),i=await s.getEventById(r);if(!o||!i)return e.json({error:"Ticket or event not found"},404);if(o.stock!==null&&o.sold_count>=o.stock)return e.json({error:"Ticket sold out"},400);const a=await kv(n,{ticketId:o.id,ticketName:o.name,price:o.price,currency:o.currency,eventId:i.id,eventTitle:i.title,successUrl:`${new URL(e.req.url).origin}/success?session_id={CHECKOUT_SESSION_ID}`,cancelUrl:`${new URL(e.req.url).origin}/events/${i.slug}`});return e.json({sessionId:a.id,url:a.url})}catch(t){return console.error("Checkout error:",t),e.json({error:"Failed to create checkout session",details:t.message},500)}});en.post("/webhook",async e=>{var t,r,n,s,o;try{const i=e.req.header("stripe-signature");if(!i)return e.json({error:"No signature"},400);const a=await e.req.text(),c=ts(e.env.STRIPE_SECRET_KEY),u=await Av(a,i,e.env.STRIPE_WEBHOOK_SECRET,c),l=new D(e.env.DB);switch(u.type){case"checkout.session.completed":{const h=u.data.object,p=parseInt(h.metadata.event_id),v=parseInt(h.metadata.ticket_id);if(await l.getPurchaseByCheckoutSession(h.id)){console.log("Purchase already exists:",h.id);break}const y=await tg({purchaseId:0,eventId:p,customerId:h.customer||((t=h.customer_details)==null?void 0:t.email)||"",email:((r=h.customer_details)==null?void 0:r.email)||""},e.env.JWT_SECRET,86400*365),_=new Date(Date.now()+86400*365*1e3).toISOString();await l.createPurchase({event_id:p,ticket_id:v,stripe_customer_id:h.customer||((n=h.customer_details)==null?void 0:n.email)||"",stripe_checkout_session_id:h.id,stripe_payment_intent_id:h.payment_intent,customer_email:((s=h.customer_details)==null?void 0:s.email)||"",customer_name:((o=h.customer_details)==null?void 0:o.name)||"",amount:h.amount_total,currency:h.currency,status:"completed",access_token:y,access_expires_at:_}),await l.incrementTicketSoldCount(v),console.log("Purchase completed:",h.id);break}case"charge.refunded":{const p=u.data.object.payment_intent;console.log("Charge refunded:",p);break}default:console.log(`Unhandled event type: ${u.type}`)}return e.json({received:!0})}catch(i){return console.error("Webhook error:",i),e.json({error:"Webhook handler failed",details:i.message},400)}});en.get("/checkout/:sessionId",async e=>{var t;try{const r=e.req.param("sessionId"),s=await ts(e.env.STRIPE_SECRET_KEY).checkout.sessions.retrieve(r),o=new D(e.env.DB),i=await o.getPurchaseByCheckoutSession(r);let a=null;if(i){const c=await o.getEventById(i.event_id);c&&(a={id:c.id,slug:c.slug,title:c.title})}return e.json({status:s.payment_status,customerEmail:(t=s.customer_details)==null?void 0:t.email,purchase:i,event:a})}catch(r){return console.error("Session retrieval error:",r),e.json({error:"Failed to retrieve session",details:r.message},500)}});const tn=new Ke;tn.get("/",async e=>{try{const t=e.req.query("artist"),r=e.req.query("status"),n=new D(e.env.DB);let s={};if(t){const a=await n.getArtistBySlug(t);a&&(s.artistId=a.id)}r&&(s.status=r);const o=await n.getEvents(s),i=await Promise.all(o.map(async a=>{const c=await n.getArtistBySlug("");return a}));return e.json(i)}catch(t){return console.error("Get events error:",t),e.json({error:"Failed to get events",details:t.message},500)}});tn.get("/:slug",async e=>{try{const t=e.req.param("slug"),r=new D(e.env.DB),n=await r.getEventBySlug(t);if(!n)return e.json({error:"Event not found"},404);const s=await r.getTicketsByEventId(n.id);return e.json({...n,tickets:s})}catch(t){return console.error("Get event error:",t),e.json({error:"Failed to get event",details:t.message},500)}});tn.get("/:slug/tickets",async e=>{try{const t=e.req.param("slug"),r=new D(e.env.DB),n=await r.getEventBySlug(t);if(!n)return e.json({error:"Event not found"},404);const s=await r.getTicketsByEventId(n.id);return e.json(s)}catch(t){return console.error("Get tickets error:",t),e.json({error:"Failed to get tickets",details:t.message},500)}});const rs=new Ke;rs.get("/",async e=>{try{const r=await new D(e.env.DB).getArtists();return e.json(r)}catch(t){return console.error("Get artists error:",t),e.json({error:"Failed to get artists",details:t.message},500)}});rs.get("/:slug",async e=>{try{const t=e.req.param("slug"),r=new D(e.env.DB),n=await r.getArtistBySlug(t);if(!n)return e.json({error:"Artist not found"},404);const s=await r.getEvents({artistId:n.id});return e.json({...n,events:s})}catch(t){return console.error("Get artist error:",t),e.json({error:"Failed to get artist",details:t.message},500)}});async function sg(e,t,r,n=3600){const s=Math.floor(Date.now()/1e3)+n,i=JSON.stringify({Statement:[{Resource:e,Condition:{DateLessThan:{"AWS:EpochTime":s}}}]}),a=btoa(i).replace(/\+/g,"-").replace(/\=/g,"_").replace(/\//g,"~"),u=(await qi(i)).replace(/\+/g,"-").replace(/\=/g,"_").replace(/\//g,"~"),l=e.includes("?")?"&":"?";return`${e}${l}Policy=${a}&Signature=${u}&Key-Pair-Id=${t}`}async function qi(e,t){const n=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",n),o=Array.from(new Uint8Array(s));return btoa(String.fromCharCode(...o))}async function og(e,t,r,n=3600){const s=Math.floor(Date.now()/1e3)+n,i=JSON.stringify({Statement:[{Resource:e,Condition:{DateLessThan:{"AWS:EpochTime":s}}}]}),a=btoa(i).replace(/\+/g,"-").replace(/\=/g,"_").replace(/\//g,"~"),u=(await qi(i)).replace(/\+/g,"-").replace(/\=/g,"_").replace(/\//g,"~");return{"CloudFront-Policy":a,"CloudFront-Signature":u,"CloudFront-Key-Pair-Id":t}}const rn=new Ke;rn.post("/verify",async e=>{try{const{token:t,eventSlug:r,preview:n}=await e.req.json();if(n===!0&&r){const u=await new D(e.env.DB).getEventBySlug(r);return u?e.json({valid:!0,preview:!0,event:{id:u.id,title:u.title,slug:u.slug,description:u.description,eventType:u.event_type,status:u.status}}):e.json({error:"Event not found"},404)}if(!t)return e.json({error:"Token required"},400);const s=new D(e.env.DB),o=await s.getPurchaseByAccessToken(t);if(!o)return e.json({error:"Invalid or expired token"},401);if(!await rg(t,e.env.JWT_SECRET))return e.json({error:"Invalid token"},401);if(o.access_expires_at&&new Date(o.access_expires_at)<new Date)return e.json({error:"Token expired"},401);const a=await s.getEventById(o.event_id);return a?e.json({valid:!0,purchase:{id:o.id,eventId:o.event_id,customerEmail:o.customer_email},event:{id:a.id,title:a.title,slug:a.slug,description:a.description,eventType:a.event_type,status:a.status}}):e.json({error:"Event not found"},404)}catch(t){return console.error("Token verification error:",t),e.json({error:"Verification failed",details:t.message},500)}});rn.post("/stream-url",async e=>{try{const{token:t,eventId:r,eventSlug:n,preview:s}=await e.req.json(),o=new D(e.env.DB);if(s===!0&&n){const u=await o.getEventBySlug(n);if(!u)return e.json({error:"Event not found"},404);const l=u.event_type==="archive"?u.archive_url:u.stream_url;return l?e.json({streamUrl:l,expiresIn:0,useSigned:!1,preview:!0}):e.json({error:"Stream URL not available"},404)}if(!t||!r)return e.json({error:"Token and eventId required"},400);const i=await o.getPurchaseByAccessToken(t);if(!i||i.event_id!==r)return e.json({error:"Invalid access"},401);const a=await o.getEventById(r);if(!a)return e.json({error:"Event not found"},404);const c=a.event_type==="archive"?a.archive_url:a.stream_url;if(!c)return e.json({error:"Stream URL not available"},404);if(e.env.CLOUDFRONT_PRIVATE_KEY&&e.env.CLOUDFRONT_KEY_PAIR_ID){const u=await sg(c,e.env.CLOUDFRONT_KEY_PAIR_ID,e.env.CLOUDFRONT_PRIVATE_KEY,3600);return e.json({streamUrl:u,expiresIn:3600,useSigned:!0})}return e.json({streamUrl:c,expiresIn:0,useSigned:!1})}catch(t){return console.error("Stream URL generation error:",t),e.json({error:"Failed to generate stream URL",details:t.message},500)}});rn.post("/stream-cookies",async e=>{try{const{token:t,eventId:r}=await e.req.json();if(!t||!r)return e.json({error:"Token and eventId required"},400);const n=new D(e.env.DB),s=await n.getPurchaseByAccessToken(t);if(!s||s.event_id!==r)return e.json({error:"Invalid access"},401);const o=await n.getEventById(r);if(!o)return e.json({error:"Event not found"},404);const i=o.event_type==="archive"?o.archive_url:o.stream_url;if(!i)return e.json({error:"Stream URL not available"},404);if(e.env.CLOUDFRONT_PRIVATE_KEY&&e.env.CLOUDFRONT_KEY_PAIR_ID){const a=new URL(i),c=`${a.origin}${a.pathname.split("/").slice(0,-1).join("/")}/*`,u=await og(c,e.env.CLOUDFRONT_KEY_PAIR_ID,e.env.CLOUDFRONT_PRIVATE_KEY,3600);return e.json({cookies:u,domain:a.hostname,path:"/",expiresIn:3600})}return e.json({error:"CloudFront signing not configured"},500)}catch(t){return console.error("Stream cookies generation error:",t),e.json({error:"Failed to generate stream cookies",details:t.message},500)}});const le=new Ke,ig=async(e,t)=>{const r=e.req.header("Authorization");if(!r||!r.startsWith("Basic "))return e.json({error:"Unauthorized"},401);const n=atob(r.substring(6)),[s,o]=n.split(":"),i=e.env.ADMIN_USERNAME||"admin",a=e.env.ADMIN_PASSWORD||"admin123";if(s!==i||o!==a)return e.json({error:"Invalid credentials"},401);await t()};le.use("/*",ig);le.get("/events",async e=>{try{const r=await new D(e.env.DB).getEvents();return e.json(r)}catch(t){return console.error("Admin get events error:",t),e.json({error:"Failed to get events",details:t.message},500)}});const ag=Tt({artist_id:Ze(),title:R(),slug:R(),description:R().optional(),thumbnail_url:R().optional(),event_type:Ur(["live","archive"]),stream_url:R().optional(),archive_url:R().optional(),cloudfront_key_pair_id:R().optional(),start_time:R().optional(),end_time:R().optional(),status:Ur(["upcoming","live","ended","archived"]).default("upcoming")});le.post("/events",Pt("json",ag),async e=>{try{const t=e.req.valid("json"),n=await new D(e.env.DB).createEvent(t);return e.json({id:n,message:"Event created successfully"},201)}catch(t){return console.error("Admin create event error:",t),e.json({error:"Failed to create event",details:t.message},500)}});const cg=Tt({status:Ur(["upcoming","live","ended","archived"])});le.patch("/events/:id/status",Pt("json",cg),async e=>{try{const t=parseInt(e.req.param("id")),{status:r}=e.req.valid("json");return await new D(e.env.DB).updateEventStatus(t,r),e.json({message:"Event status updated successfully"})}catch(t){return console.error("Admin update event status error:",t),e.json({error:"Failed to update event status",details:t.message},500)}});const ug=Tt({title:R().optional(),description:R().optional(),stream_url:R().optional(),archive_url:R().optional(),thumbnail_url:R().optional(),cloudfront_key_pair_id:R().optional(),start_time:R().optional(),end_time:R().optional()});le.patch("/events/:id",Pt("json",ug),async e=>{try{const t=parseInt(e.req.param("id")),r=e.req.valid("json");return await new D(e.env.DB).updateEvent(t,r),e.json({message:"Event updated successfully"})}catch(t){return console.error("Admin update event error:",t),e.json({error:"Failed to update event",details:t.message},500)}});le.get("/artists",async e=>{try{const r=await new D(e.env.DB).getArtists();return e.json(r)}catch(t){return console.error("Admin get artists error:",t),e.json({error:"Failed to get artists",details:t.message},500)}});const lg=Tt({name:R(),slug:R(),description:R().optional(),image_url:R().optional()});le.post("/artists",Pt("json",lg),async e=>{try{const t=e.req.valid("json"),n=await new D(e.env.DB).createArtist(t);return e.json({id:n,message:"Artist created successfully"},201)}catch(t){return console.error("Admin create artist error:",t),e.json({error:"Failed to create artist",details:t.message},500)}});const dg=Tt({event_id:Ze(),name:R(),description:R().optional(),price:Ze(),currency:R().default("jpy"),stripe_product_id:R().optional(),stripe_price_id:R().optional(),stock:Ze().optional(),sale_start:R().optional(),sale_end:R().optional(),is_active:Ze().default(1)});le.post("/tickets",Pt("json",dg),async e=>{try{const t=e.req.valid("json"),n=await new D(e.env.DB).createTicket(t);return e.json({id:n,message:"Ticket created successfully"},201)}catch(t){return console.error("Admin create ticket error:",t),e.json({error:"Failed to create ticket",details:t.message},500)}});le.get("/purchases",async e=>{try{const t=new D(e.env.DB),r=await e.env.DB.prepare("SELECT p.*, e.title as event_title, t.name as ticket_name FROM purchases p LEFT JOIN events e ON p.event_id = e.id LEFT JOIN tickets t ON p.ticket_id = t.id ORDER BY p.purchased_at DESC LIMIT 100").all();return e.json(r.results)}catch(t){return console.error("Admin get purchases error:",t),e.json({error:"Failed to get purchases",details:t.message},500)}});le.get("/stats",async e=>{try{const t=e.env.DB,r=await t.prepare("SELECT SUM(amount) as total_revenue, COUNT(*) as total_purchases FROM purchases WHERE status = ?").bind("completed").first(),n=await t.prepare("SELECT e.title, e.id, COUNT(p.id) as purchase_count, SUM(p.amount) as revenue FROM events e LEFT JOIN purchases p ON e.id = p.event_id AND p.status = ? GROUP BY e.id ORDER BY revenue DESC").bind("completed").all();return e.json({total_revenue:(r==null?void 0:r.total_revenue)||0,total_purchases:(r==null?void 0:r.total_purchases)||0,events:n.results})}catch(t){return console.error("Admin get stats error:",t),e.json({error:"Failed to get stats",details:t.message},500)}});const J=new Ke;J.use("/api/*",ka());J.use("/static/*",Na({root:"./public"}));J.route("/api/stripe",en);J.route("/api/events",tn);J.route("/api/artists",rs);J.route("/api/watch",rn);J.route("/api/admin",le);J.get("/api/health",e=>e.json({status:"ok",timestamp:new Date().toISOString()}));J.get("/",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title></title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    </head>
    <body class="bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 min-h-screen">
        <nav class="bg-black bg-opacity-50 backdrop-blur-md border-b border-gray-800 sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center">
                        <i class="fas fa-broadcast-tower text-purple-500 text-2xl mr-3"></i>
                        <a href="/" class="text-white text-xl font-bold hover:text-purple-400 transition">StreamingPlatform</a>
                    </div>
                    
                    <!-- Desktop Navigation -->
                    <div class="hidden md:flex space-x-4">
                        <a href="/" class="text-white px-3 py-2 hover:text-purple-400 transition"></a>
                        <a href="/artists" class="text-gray-300 hover:text-white px-3 py-2 transition"></a>
                        <a href="/events" class="text-gray-300 hover:text-white px-3 py-2 transition"></a>
                    </div>
                    
                    <!-- Mobile Menu Button -->
                    <button id="mobile-menu-button" onclick="toggleMobileMenu()" class="md:hidden text-white p-2 hover:text-purple-400 transition">
                        <i id="hamburger-icon" class="fas fa-bars text-2xl"></i>
                        <i id="close-icon" class="fas fa-times text-2xl hidden"></i>
                    </button>
                </div>
            </div>
            
            <!-- Mobile Navigation -->
            <div id="mobile-menu" class="hidden md:hidden bg-black bg-opacity-95 border-t border-gray-800">
                <div class="px-4 py-3 space-y-1">
                    <a href="/" class="block text-white px-3 py-2 rounded hover:bg-purple-600 transition">
                        <i class="fas fa-home mr-2"></i>
                    </a>
                    <a href="/artists" class="block text-gray-300 hover:text-white px-3 py-2 rounded hover:bg-gray-800 transition">
                        <i class="fas fa-users mr-2"></i>
                    </a>
                    <a href="/events" class="block text-gray-300 hover:text-white px-3 py-2 rounded hover:bg-gray-800 transition">
                        <i class="fas fa-calendar-alt mr-2"></i>
                    </a>
                </div>
            </div>
        </nav>
        
        <script src="/static/nav.js"><\/script>

        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="text-center mb-16">
                <h1 class="text-5xl font-bold text-white mb-4">
                    <br>
                </h1>
                <p class="text-xl text-gray-300 mb-8">
                    
                </p>
                <div class="flex justify-center space-x-4">
                    <a href="/events" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-8 rounded-lg transition">
                        <i class="fas fa-calendar-alt mr-2"></i>
                        
                    </a>
                    <a href="/artists" class="bg-gray-800 hover:bg-gray-700 text-white font-bold py-3 px-8 rounded-lg transition">
                        <i class="fas fa-users mr-2"></i>
                        
                    </a>
                </div>
            </div>

            <div id="upcoming-events" class="mb-12">
                <h2 class="text-3xl font-bold text-white mb-6">
                    <i class="fas fa-fire text-orange-500 mr-2"></i>
                    
                </h2>
                <div id="events-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="text-center text-gray-400 py-8">
                        <i class="fas fa-spinner fa-spin text-4xl mb-2"></i>
                        <p>...</p>
                    </div>
                </div>
            </div>

            <div class="bg-black bg-opacity-40 backdrop-blur-md rounded-xl p-8 border border-gray-800">
                <h2 class="text-2xl font-bold text-white mb-4">
                    <i class="fas fa-info-circle text-blue-500 mr-2"></i>
                    
                </h2>
                <div class="grid md:grid-cols-3 gap-6 text-gray-300">
                    <div>
                        <i class="fas fa-video text-purple-500 text-3xl mb-2"></i>
                        <h3 class="font-bold text-white mb-2"></h3>
                        <p>AWS + CloudFront</p>
                    </div>
                    <div>
                        <i class="fas fa-lock text-purple-500 text-3xl mb-2"></i>
                        <h3 class="font-bold text-white mb-2"></h3>
                        <p>DRMURL</p>
                    </div>
                    <div>
                        <i class="fas fa-credit-card text-purple-500 text-3xl mb-2"></i>
                        <h3 class="font-bold text-white mb-2"></h3>
                        <p>Stripe</p>
                    </div>
                </div>
            </div>
        </main>

        <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"><\/script>
        <script>
            // Load upcoming events
            async function loadEvents() {
                try {
                    const response = await axios.get('/api/events?status=upcoming');
                    const events = response.data;
                    
                    const eventsContainer = document.getElementById('events-list');
                    
                    if (events.length === 0) {
                        eventsContainer.innerHTML = \`
                            <div class="col-span-full text-center text-gray-400 py-8">
                                <i class="fas fa-calendar-times text-4xl mb-2"></i>
                                <p></p>
                            </div>
                        \`;
                        return;
                    }
                    
                    eventsContainer.innerHTML = events.map(event => \`
                        <a href="/events/\${event.slug}" class="block bg-black bg-opacity-40 backdrop-blur-md rounded-xl overflow-hidden border border-gray-800 hover:border-purple-500 transition">
                            <div class="aspect-video bg-gray-800 relative">
                                <img src="\${event.thumbnail_url || 'https://via.placeholder.com/800x450'}" 
                                     alt="\${event.title}" 
                                     class="w-full h-full object-cover">
                                <div class="absolute top-2 right-2 bg-red-600 text-white px-3 py-1 rounded-full text-sm font-bold">
                                    <i class="fas fa-circle animate-pulse mr-1"></i>
                                    UPCOMING
                                </div>
                            </div>
                            <div class="p-4">
                                <h3 class="text-white font-bold text-lg mb-2">\${event.title}</h3>
                                <p class="text-gray-400 text-sm mb-2">
                                    <i class="fas fa-clock mr-1"></i>
                                    \${event.start_time ? new Date(event.start_time).toLocaleString('ja-JP') : ''}
                                </p>
                                <p class="text-gray-500 text-sm line-clamp-2">\${event.description || ''}</p>
                            </div>
                        </a>
                    \`).join('');
                } catch (error) {
                    console.error('Failed to load events:', error);
                    document.getElementById('events-list').innerHTML = \`
                        <div class="col-span-full text-center text-red-400 py-8">
                            <i class="fas fa-exclamation-triangle text-4xl mb-2"></i>
                            <p></p>
                        </div>
                    \`;
                }
            }
            
            loadEvents();
        <\/script>
    </body>
    </html>
  `));J.get("/events",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> - StreamingPlatform</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    </head>
    <body class="bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 min-h-screen">
        <nav class="bg-black bg-opacity-50 backdrop-blur-md border-b border-gray-800 sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center">
                        <i class="fas fa-broadcast-tower text-purple-500 text-2xl mr-3"></i>
                        <a href="/" class="text-white text-xl font-bold hover:text-purple-400 transition">StreamingPlatform</a>
                    </div>
                    <div class="hidden md:flex space-x-4">
                        <a href="/" class="text-gray-300 hover:text-white px-3 py-2 transition"></a>
                        <a href="/artists" class="text-gray-300 hover:text-white px-3 py-2 transition"></a>
                        <a href="/events" class="text-white px-3 py-2 transition"></a>
                    </div>
                    <button id="mobile-menu-button" onclick="toggleMobileMenu()" class="md:hidden text-white p-2 hover:text-purple-400 transition">
                        <i id="hamburger-icon" class="fas fa-bars text-2xl"></i>
                        <i id="close-icon" class="fas fa-times text-2xl hidden"></i>
                    </button>
                </div>
            </div>
            <div id="mobile-menu" class="hidden md:hidden bg-black bg-opacity-95 border-t border-gray-800">
                <div class="px-4 py-3 space-y-1">
                    <a href="/" class="block text-gray-300 px-3 py-2 rounded hover:bg-gray-800 hover:text-white transition"><i class="fas fa-home mr-2"></i></a>
                    <a href="/artists" class="block text-gray-300 px-3 py-2 rounded hover:bg-gray-800 hover:text-white transition"><i class="fas fa-users mr-2"></i></a>
                    <a href="/events" class="block text-white bg-purple-600 px-3 py-2 rounded transition"><i class="fas fa-calendar-alt mr-2"></i></a>
                </div>
            </div>
        </nav>
        <script src="/static/nav.js"><\/script>

        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="mb-8">
                <h1 class="text-4xl font-bold text-white mb-4">
                    <i class="fas fa-calendar-alt text-purple-500 mr-2"></i>
                    
                </h1>
                <div class="flex space-x-4">
                    <button onclick="filterEvents('all')" class="filter-btn active bg-purple-600 text-white px-4 py-2 rounded-lg"></button>
                    <button onclick="filterEvents('upcoming')" class="filter-btn bg-gray-800 text-white px-4 py-2 rounded-lg"></button>
                    <button onclick="filterEvents('archived')" class="filter-btn bg-gray-800 text-white px-4 py-2 rounded-lg"></button>
                </div>
            </div>

            <div id="events-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="text-center text-gray-400 py-8">
                    <i class="fas fa-spinner fa-spin text-4xl mb-2"></i>
                    <p>...</p>
                </div>
            </div>
        </main>

        <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"><\/script>
        <script src="/static/events.js"><\/script>
    </body>
    </html>
  `));J.get("/events/:slug",async e=>{const t=e.req.param("slug");return e.html(`
    <!DOCTYPE html>
    <html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> - StreamingPlatform</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <script src="https://js.stripe.com/v3/"><\/script>
    </head>
    <body class="bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 min-h-screen">
        <nav class="bg-black bg-opacity-50 backdrop-blur-md border-b border-gray-800">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center">
                        <i class="fas fa-broadcast-tower text-purple-500 text-2xl mr-3"></i>
                        <a href="/" class="text-white text-xl font-bold">StreamingPlatform</a>
                    </div>
                    <div class="flex space-x-4">
                        <a href="/" class="text-gray-300 hover:text-white px-3 py-2"></a>
                        <a href="/artists" class="text-gray-300 hover:text-white px-3 py-2"></a>
                        <a href="/events" class="text-gray-300 hover:text-white px-3 py-2"></a>
                    </div>
                </div>
            </div>
        </nav>

        <main class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div id="event-detail">
                <div class="text-center text-gray-400 py-8">
                    <i class="fas fa-spinner fa-spin text-4xl mb-2"></i>
                    <p>...</p>
                </div>
            </div>
        </main>

        <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"><\/script>
        <script>
            const eventSlug = '${t}';
        <\/script>
        <script src="/static/event-detail.js"><\/script>
    </body>
    </html>
  `)});J.get("/artists",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> - StreamingPlatform</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    </head>
    <body class="bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 min-h-screen">
        <nav class="bg-black bg-opacity-50 backdrop-blur-md border-b border-gray-800">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center">
                        <i class="fas fa-broadcast-tower text-purple-500 text-2xl mr-3"></i>
                        <a href="/" class="text-white text-xl font-bold">StreamingPlatform</a>
                    </div>
                    <div class="flex space-x-4">
                        <a href="/" class="text-gray-300 hover:text-white px-3 py-2"></a>
                        <a href="/artists" class="text-white px-3 py-2"></a>
                        <a href="/events" class="text-gray-300 hover:text-white px-3 py-2"></a>
                    </div>
                </div>
            </div>
        </nav>

        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <h1 class="text-4xl font-bold text-white mb-8">
                <i class="fas fa-users text-purple-500 mr-2"></i>
                
            </h1>

            <div id="artists-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="text-center text-gray-400 py-8">
                    <i class="fas fa-spinner fa-spin text-4xl mb-2"></i>
                    <p>...</p>
                </div>
            </div>
        </main>

        <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"><\/script>
        <script src="/static/artists.js"><\/script>
    </body>
    </html>
  `));J.get("/artists/:slug",e=>{const t=e.req.param("slug");return e.html(`
    <!DOCTYPE html>
    <html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> - StreamingPlatform</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    </head>
    <body class="bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 min-h-screen">
        <nav class="bg-black bg-opacity-50 backdrop-blur-md border-b border-gray-800">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center">
                        <i class="fas fa-broadcast-tower text-purple-500 text-2xl mr-3"></i>
                        <a href="/" class="text-white text-xl font-bold">StreamingPlatform</a>
                    </div>
                    <div class="flex space-x-4">
                        <a href="/" class="text-gray-300 hover:text-white px-3 py-2"></a>
                        <a href="/artists" class="text-gray-300 hover:text-white px-3 py-2"></a>
                        <a href="/events" class="text-gray-300 hover:text-white px-3 py-2"></a>
                    </div>
                </div>
            </div>
        </nav>

        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div id="artist-detail">
                <div class="text-center text-gray-400 py-8">
                    <i class="fas fa-spinner fa-spin text-4xl mb-2"></i>
                    <p>...</p>
                </div>
            </div>
        </main>

        <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"><\/script>
        <script>
            const artistSlug = '${t}';
        <\/script>
        <script src="/static/artist-detail.js"><\/script>
    </body>
    </html>
  `)});J.get("/watch/:eventSlug",e=>{const t=e.req.param("eventSlug"),r=e.req.query("token");return e.html(`
    <!DOCTYPE html>
    <html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> - StreamingPlatform</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    </head>
    <body class="bg-black min-h-screen">
        <div id="watch-container">
            <div class="text-center text-gray-400 py-8">
                <i class="fas fa-spinner fa-spin text-4xl mb-2"></i>
                <p>...</p>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"><\/script>
        <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"><\/script>
        <script>
            const eventSlug = '${t}';
            const accessToken = '${r||""}';
        <\/script>
        <script src="/static/watch.js"><\/script>
    </body>
    </html>
  `)});J.get("/success",e=>{const t=e.req.query("session_id");return e.html(`
    <!DOCTYPE html>
    <html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> - StreamingPlatform</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    </head>
    <body class="bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 min-h-screen">
        <nav class="bg-black bg-opacity-50 backdrop-blur-md border-b border-gray-800">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center">
                        <i class="fas fa-broadcast-tower text-purple-500 text-2xl mr-3"></i>
                        <a href="/" class="text-white text-xl font-bold">StreamingPlatform</a>
                    </div>
                </div>
            </div>
        </nav>

        <main class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div id="success-content">
                <div class="text-center text-gray-400 py-8">
                    <i class="fas fa-spinner fa-spin text-4xl mb-2"></i>
                    <p>...</p>
                </div>
            </div>
        </main>

        <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"><\/script>
        <script>
            const sessionId = '${t||""}';
        <\/script>
        <script src="/static/success.js"><\/script>
    </body>
    </html>
  `)});J.get("/admin",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> - StreamingPlatform</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    </head>
    <body class="bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 min-h-screen">
        <nav class="bg-black bg-opacity-50 backdrop-blur-md border-b border-gray-800">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center">
                        <i class="fas fa-broadcast-tower text-purple-500 text-2xl mr-3"></i>
                        <a href="/" class="text-white text-xl font-bold">StreamingPlatform</a>
                        <span class="ml-4 text-sm text-gray-400"></span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <a href="/" class="text-gray-300 hover:text-white px-3 py-2">
                            <i class="fas fa-home mr-1"></i>
                        </a>
                        <button id="logout-btn" class="text-red-400 hover:text-red-300 px-3 py-2">
                            <i class="fas fa-sign-out-alt mr-1"></i>
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div id="login-section" class="hidden">
                <div class="max-w-md mx-auto bg-black bg-opacity-40 backdrop-blur-md rounded-xl p-8 border border-gray-800">
                    <h2 class="text-2xl font-bold text-white mb-6 text-center">
                        <i class="fas fa-lock mr-2"></i>
                    </h2>
                    <form id="login-form" class="space-y-4">
                        <div>
                            <label class="block text-gray-300 mb-2"></label>
                            <input type="text" id="username" class="w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-purple-500 focus:outline-none" required>
                        </div>
                        <div>
                            <label class="block text-gray-300 mb-2"></label>
                            <input type="password" id="password" class="w-full px-4 py-2 bg-gray-900 border border-gray-700 rounded-lg text-white focus:border-purple-500 focus:outline-none" required>
                        </div>
                        <button type="submit" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 rounded-lg transition">
                            <i class="fas fa-sign-in-alt mr-2"></i>
                        </button>
                    </form>
                    <div id="login-error" class="hidden mt-4 p-3 bg-red-900 bg-opacity-20 border border-red-800 rounded text-red-400 text-sm"></div>
                </div>
            </div>

            <div id="admin-content" class="hidden">
                <div class="mb-8">
                    <h1 class="text-4xl font-bold text-white mb-4">
                        <i class="fas fa-tachometer-alt text-purple-500 mr-2"></i>
                        
                    </h1>
                </div>

                <!-- Tabs -->
                <div class="mb-6 border-b border-gray-800">
                    <nav class="flex space-x-4">
                        <button onclick="switchTab('stats')" class="tab-btn active px-4 py-2 text-white border-b-2 border-purple-500">
                            <i class="fas fa-chart-line mr-2"></i>
                        </button>
                        <button onclick="switchTab('events')" class="tab-btn px-4 py-2 text-gray-400 hover:text-white border-b-2 border-transparent">
                            <i class="fas fa-calendar-alt mr-2"></i>
                        </button>
                        <button onclick="switchTab('artists')" class="tab-btn px-4 py-2 text-gray-400 hover:text-white border-b-2 border-transparent">
                            <i class="fas fa-users mr-2"></i>
                        </button>
                        <button onclick="switchTab('purchases')" class="tab-btn px-4 py-2 text-gray-400 hover:text-white border-b-2 border-transparent">
                            <i class="fas fa-receipt mr-2"></i>
                        </button>
                    </nav>
                </div>

                <!-- Stats Tab -->
                <div id="tab-stats" class="tab-content">
                    <div id="stats-content">
                        <div class="text-center text-gray-400 py-8">
                            <i class="fas fa-spinner fa-spin text-4xl mb-2"></i>
                            <p>...</p>
                        </div>
                    </div>
                </div>

                <!-- Events Tab -->
                <div id="tab-events" class="tab-content hidden">
                    <div class="mb-6">
                        <button onclick="showCreateEventModal()" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-6 rounded-lg transition">
                            <i class="fas fa-plus mr-2"></i>
                        </button>
                    </div>
                    <div id="events-content">
                        <div class="text-center text-gray-400 py-8">
                            <i class="fas fa-spinner fa-spin text-4xl mb-2"></i>
                            <p>...</p>
                        </div>
                    </div>
                </div>

                <!-- Artists Tab -->
                <div id="tab-artists" class="tab-content hidden">
                    <div class="mb-6">
                        <button onclick="showCreateArtistModal()" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-6 rounded-lg transition">
                            <i class="fas fa-plus mr-2"></i>
                        </button>
                    </div>
                    <div id="artists-content">
                        <div class="text-center text-gray-400 py-8">
                            <i class="fas fa-spinner fa-spin text-4xl mb-2"></i>
                            <p>...</p>
                        </div>
                    </div>
                </div>

                <!-- Purchases Tab -->
                <div id="tab-purchases" class="tab-content hidden">
                    <div id="purchases-content">
                        <div class="text-center text-gray-400 py-8">
                            <i class="fas fa-spinner fa-spin text-4xl mb-2"></i>
                            <p>...</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"><\/script>
        <script src="/static/admin.js"><\/script>
    </body>
    </html>
  `));const To=new Ke,hg=Object.assign({"/src/index.tsx":J});let Hi=!1;for(const[,e]of Object.entries(hg))e&&(To.all("*",t=>{let r;try{r=t.executionCtx}catch{}return e.fetch(t.req.raw,t.env,r)}),To.notFound(t=>{let r;try{r=t.executionCtx}catch{}return e.fetch(t.req.raw,t.env,r)}),Hi=!0);if(!Hi)throw new Error("Can't import modules from ['/src/index.ts','/src/index.tsx','/app/server.ts']");export{To as default};
